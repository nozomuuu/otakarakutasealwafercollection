/*!--------------------------------------------------------
 * Copyright (C) Microsoft Corporation. All rights reserved.
 *--------------------------------------------------------*/(function(){var le=["require","exports","vs/base/common/lifecycle","vs/base/common/types","vs/nls","vs/base/common/event","vs/platform/log/common/log","vs/base/common/errors","vs/base/common/async","vs/platform/files/common/files","vs/platform/instantiation/common/instantiation","vs/base/common/platform","vs/base/common/uri","vs/base/common/buffer","vs/base/common/network","vs/base/common/path","vs/base/common/resources","vs/platform/environment/common/environment","vs/platform/telemetry/common/telemetry","vs/base/common/arrays","vs/platform/extensionManagement/common/extensionManagement","vs/base/common/cancellation","vs/platform/extensions/common/extensions","vs/platform/uriIdentity/common/uriIdentity","vs/platform/userDataProfile/common/userDataProfile","vs/base/common/map","vs/platform/extensionManagement/common/extensionManagementUtil","vs/base/common/objects","vs/base/common/uuid","vs/base/node/pfs","vs/platform/configuration/common/configuration","vs/base/common/strings","fs","vs/platform/product/common/productService","vs/base/common/json","os","vs/base/common/process","vs/platform/registry/common/platform","vs/base/common/errorMessage","vs/platform/policy/common/policy","vs/platform/configuration/common/configurationRegistry","vs/platform/telemetry/common/telemetryUtils","vs/platform/extensionManagement/common/extensionsProfileScannerService","vs/base/common/hash","vs/platform/extensions/common/extensionValidator","vs/base/common/semver/semver","vs/platform/request/common/request","vs/base/common/stream","vs/base/common/marshalling","vs/base/common/ternarySearchTree","vs/base/node/zip","vs/platform/instantiation/common/descriptors","vs/platform/files/common/watcher","vs/platform/extensionManagement/common/abstractExtensionManagementService","vs/platform/extensionManagement/common/extensionsScannerService","vs/base/common/decorators","vs/base/common/severity","vs/base/common/processes","vs/amdX","vs/base/node/processes","vs/base/parts/ipc/common/ipc","child_process","vs/platform/download/common/download","vs/platform/files/common/io","vs/base/common/extpath","vs/platform/instantiation/common/serviceCollection","vs/base/common/iterator","vs/platform/configuration/common/configurationModels","vs/platform/remote/common/remoteHosts","vs/platform/languagePacks/common/languagePacks","vs/platform/state/node/stateService","vs/platform/telemetry/common/commonProperties","vs/platform/extensionManagement/node/extensionSignatureVerificationService","vs/platform/extensionManagement/node/extensionManagementUtil","vs/platform/storage/common/storage","vs/base/common/amd","vs/base/common/assert","vs/base/common/jsonFormatter","vs/base/common/jsonEdit","vs/base/common/jsonSchema","vs/base/common/numbers","vs/base/common/skipList","vs/base/node/macAddress","vs/base/parts/request/common/request","vs/base/common/date","vs/base/common/jsonErrorMessages","vs/base/common/console","vs/base/node/id","vs/base/node/powershell","vs/base/node/shell","vs/base/parts/ipc/node/ipc.cp","vs/base/parts/storage/common/storage","vs/platform/contextkey/common/scanner","vs/base/common/charCode","vs/platform/environment/common/environmentService","vs/platform/environment/node/userDataPath","vs/platform/environment/node/environmentService","vs/platform/extensionManagement/common/extensionNls","vs/platform/extensions/common/extensionsApiProposals","vs/platform/instantiation/common/extensions","vs/platform/instantiation/common/graph","vs/platform/contextkey/common/contextkey","vs/platform/files/node/watcher/baseWatcher","vs/platform/files/node/watcher/nodejs/nodejsWatcher","vs/platform/files/node/watcher/nodejs/nodejsClient","vs/platform/files/node/watcher/watcherClient","vs/platform/instantiation/common/instantiationService","vs/platform/files/common/diskFileSystemProvider","vs/platform/files/common/fileService","vs/base/common/performance","vs/platform/files/node/diskFileSystemProvider","vs/platform/log/common/logService","vs/platform/log/node/spdlogLog","vs/platform/log/node/loggerService","vs/platform/policy/common/filePolicyService","vs/platform/policy/node/nativePolicyService","vs/platform/jsonschemas/common/jsonContributionRegistry","vs/platform/configuration/common/configurations","vs/platform/configuration/common/configurationService","vs/platform/extensionManagement/node/extensionsManifestCache","vs/platform/download/common/downloadService","vs/platform/request/node/proxy","url","vs/platform/shell/node/shellEnv","vs/platform/state/node/state","vs/platform/extensionManagement/common/extensionManagementCLI","vs/platform/extensionManagement/node/extensionsWatcher","vs/platform/languagePacks/node/languagePacks","vs/platform/telemetry/common/1dsAppender","vs/platform/telemetry/common/telemetryService","vs/platform/product/common/product","vs/platform/telemetry/node/1dsAppender","vs/platform/telemetry/node/telemetry","vs/platform/telemetry/node/telemetryUtils","vs/platform/uriIdentity/common/uriIdentityService","vs/platform/userData/common/fileUserDataProvider","vs/platform/workspace/common/workspace","vs/platform/extensionManagement/node/extensionLifecycle","vs/platform/extensionManagement/node/extensionDownloader","vs/platform/extensionManagement/node/extensionManagementService","vs/platform/extensionManagement/node/extensionsProfileScannerService","vs/platform/extensionManagement/node/extensionsScannerService","vs/platform/externalServices/common/serviceMachineId","vs/platform/externalServices/common/marketplace","vs/platform/extensionManagement/common/extensionGalleryService","vs/platform/userDataProfile/node/userDataProfile","vs/platform/request/node/requestService","vs/base/common/lazy","vs/base/common/marshallingIds","path","vs/base/common/glob","vs/platform/files/node/watcher/nodejs/nodejsWatcherLib","vs/base/common/linkedList","vs/platform/environment/node/argvHelper","crypto","https","vs/base/common/stopwatch","zlib","vs/code/node/cliProcessMain","vs/base/node/unc"],he=function(Q){for(var e=[],P=0,I=Q.length;P<I;P++)e[P]=le[Q[P]];return e};define(le[75],he([0,1]),function(Q,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$X=e.LoaderEventType=e.$W=e.$V=void 0,e.$V=!1,e.$W=!0;var P;(function(y){y[y.LoaderAvailable=1]="LoaderAvailable",y[y.BeginLoadingScript=10]="BeginLoadingScript",y[y.EndLoadingScriptOK=11]="EndLoadingScriptOK",y[y.EndLoadingScriptError=12]="EndLoadingScriptError",y[y.BeginInvokeFactory=21]="BeginInvokeFactory",y[y.EndInvokeFactory=22]="EndInvokeFactory",y[y.NodeBeginEvaluatingScript=31]="NodeBeginEvaluatingScript",y[y.NodeEndEvaluatingScript=32]="NodeEndEvaluatingScript",y[y.NodeBeginNativeRequire=33]="NodeBeginNativeRequire",y[y.NodeEndNativeRequire=34]="NodeEndNativeRequire",y[y.CachedDataFound=60]="CachedDataFound",y[y.CachedDataMissed=61]="CachedDataMissed",y[y.CachedDataRejected=62]="CachedDataRejected",y[y.CachedDataCreated=63]="CachedDataCreated"})(P||(e.LoaderEventType=P={}));class I{static get(){const k=new Map,C=new Map,O=new Map,g=new Map;function u($,S){$.has(S.detail)||$.set(S.detail,-S.timestamp)}function d($,S){const b=$.get(S.detail);b&&(b>=0||$.set(S.detail,b+S.timestamp))}let f=[];typeof Q=="function"&&typeof Q.getStats=="function"&&(f=Q.getStats().slice(0).sort(($,S)=>$.timestamp-S.timestamp));for(const $ of f)switch($.type){case P.BeginLoadingScript:u(k,$);break;case P.EndLoadingScriptOK:case P.EndLoadingScriptError:d(k,$);break;case P.BeginInvokeFactory:u(C,$);break;case P.EndInvokeFactory:d(C,$);break;case P.NodeBeginNativeRequire:u(O,$);break;case P.NodeEndNativeRequire:d(O,$);break;case P.NodeBeginEvaluatingScript:u(g,$);break;case P.NodeEndEvaluatingScript:d(g,$);break}let m=0;O.forEach($=>m+=$);function a($){const S=[];return $.forEach((b,v)=>S.push([v,b])),S}return{amdLoad:a(k),amdInvoke:a(C),nodeRequire:a(O),nodeEval:a(g),nodeRequireTotal:m}}static toMarkdownTable(k,C){let O="";const g=[];return k.forEach((u,d)=>{g[d]=u.length}),C.forEach(u=>{u.forEach((d,f)=>{typeof d>"u"&&(d=u[f]="-");const m=d.toString().length;g[f]=Math.max(m,g[f])})}),k.forEach((u,d)=>{O+=`| ${u+" ".repeat(g[d]-u.toString().length)} `}),O+=`|
`,k.forEach((u,d)=>{O+=`| ${"-".repeat(g[d])} `}),O+=`|
`,C.forEach(u=>{u.forEach((d,f)=>{typeof d<"u"&&(O+=`| ${d+" ".repeat(g[f]-d.toString().length)} `)}),O+=`|
`}),O}}e.$X=I}),define(le[55],he([0,1]),function(Q,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$ci=I,e.$di=y,e.$ei=k;function P(C){return(O,g,u)=>{let d=null,f=null;if(typeof u.value=="function"?(d="value",f=u.value):typeof u.get=="function"&&(d="get",f=u.get),!f)throw new Error("not supported");u[d]=C(f,g)}}function I(C,O,g){let u=null,d=null;if(typeof g.value=="function"?(u="value",d=g.value,d.length!==0&&console.warn("Memoize should only be used in functions with zero parameters")):typeof g.get=="function"&&(u="get",d=g.get),!d)throw new Error("not supported");const f=`$memoize$${O}`;g[u]=function(...m){return this.hasOwnProperty(f)||Object.defineProperty(this,f,{configurable:!1,enumerable:!1,writable:!1,value:d.apply(this,m)}),this[f]}}function y(C,O,g){return P((u,d)=>{const f=`$debounce$${d}`,m=`$debounce$result$${d}`;return function(...a){this[m]||(this[m]=g?g():void 0),clearTimeout(this[f]),O&&(this[m]=O(this[m],...a),a=[this[m]]),this[f]=setTimeout(()=>{u.apply(this,a),this[m]=g?g():void 0},C)}})}function k(C,O,g){return P((u,d)=>{const f=`$throttle$timer$${d}`,m=`$throttle$result$${d}`,a=`$throttle$lastRun$${d}`,$=`$throttle$pending$${d}`;return function(...S){if(this[m]||(this[m]=g?g():void 0),(this[a]===null||this[a]===void 0)&&(this[a]=-Number.MAX_VALUE),O&&(this[m]=O(this[m],...S)),this[$])return;const b=this[a]+C;b<=Date.now()?(this[a]=Date.now(),u.apply(this,[this[m]]),this[m]=g?g():void 0):(this[$]=!0,this[f]=setTimeout(()=>{this[$]=!1,this[a]=Date.now(),u.apply(this,[this[m]]),this[m]=g?g():void 0},b-Date.now()))}})}}),define(le[76],he([0,1,7]),function(Q,e,P){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ok=I,e.$jd=y,e.$kd=k,e.$ld=C,e.$md=O,e.$nd=g;function I(u,d){if(!u)throw new Error(d?`Assertion failed (${d})`:"Assertion Failed")}function y(u,d="Unreachable"){throw new Error(d)}function k(u,d="unexpected state"){if(!u)throw new P.$gb(`Assertion Failed: ${d}`)}function C(u){u||(0,P.$4)(new P.$gb("Soft Assertion Failed"))}function O(u){if(!u()){debugger;u(),(0,P.$4)(new P.$gb("Assertion Failed"))}}function g(u,d){let f=0;for(;f<u.length-1;){const m=u[f],a=u[f+1];if(!d(m,a))return!1;f++}return!0}}),define(le[34],he([0,1]),function(Q,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ParseOptions=e.ParseErrorCode=e.SyntaxKind=e.ScanError=void 0,e.$3n=C,e.$4n=f,e.$5n=m,e.$6n=a,e.$7n=$,e.$8n=S,e.$9n=b,e.$0n=v,e.$$n=h,e.$_n=R,e.$ao=w;var P;(function(i){i[i.None=0]="None",i[i.UnexpectedEndOfComment=1]="UnexpectedEndOfComment",i[i.UnexpectedEndOfString=2]="UnexpectedEndOfString",i[i.UnexpectedEndOfNumber=3]="UnexpectedEndOfNumber",i[i.InvalidUnicode=4]="InvalidUnicode",i[i.InvalidEscapeCharacter=5]="InvalidEscapeCharacter",i[i.InvalidCharacter=6]="InvalidCharacter"})(P||(e.ScanError=P={}));var I;(function(i){i[i.OpenBraceToken=1]="OpenBraceToken",i[i.CloseBraceToken=2]="CloseBraceToken",i[i.OpenBracketToken=3]="OpenBracketToken",i[i.CloseBracketToken=4]="CloseBracketToken",i[i.CommaToken=5]="CommaToken",i[i.ColonToken=6]="ColonToken",i[i.NullKeyword=7]="NullKeyword",i[i.TrueKeyword=8]="TrueKeyword",i[i.FalseKeyword=9]="FalseKeyword",i[i.StringLiteral=10]="StringLiteral",i[i.NumericLiteral=11]="NumericLiteral",i[i.LineCommentTrivia=12]="LineCommentTrivia",i[i.BlockCommentTrivia=13]="BlockCommentTrivia",i[i.LineBreakTrivia=14]="LineBreakTrivia",i[i.Trivia=15]="Trivia",i[i.Unknown=16]="Unknown",i[i.EOF=17]="EOF"})(I||(e.SyntaxKind=I={}));var y;(function(i){i[i.InvalidSymbol=1]="InvalidSymbol",i[i.InvalidNumberFormat=2]="InvalidNumberFormat",i[i.PropertyNameExpected=3]="PropertyNameExpected",i[i.ValueExpected=4]="ValueExpected",i[i.ColonExpected=5]="ColonExpected",i[i.CommaExpected=6]="CommaExpected",i[i.CloseBraceExpected=7]="CloseBraceExpected",i[i.CloseBracketExpected=8]="CloseBracketExpected",i[i.EndOfFileExpected=9]="EndOfFileExpected",i[i.InvalidCommentToken=10]="InvalidCommentToken",i[i.UnexpectedEndOfComment=11]="UnexpectedEndOfComment",i[i.UnexpectedEndOfString=12]="UnexpectedEndOfString",i[i.UnexpectedEndOfNumber=13]="UnexpectedEndOfNumber",i[i.InvalidUnicode=14]="InvalidUnicode",i[i.InvalidEscapeCharacter=15]="InvalidEscapeCharacter",i[i.InvalidCharacter=16]="InvalidCharacter"})(y||(e.ParseErrorCode=y={}));var k;(function(i){i.DEFAULT={allowTrailingComma:!0}})(k||(e.ParseOptions=k={}));function C(i,c=!1){let n=0;const r=i.length;let t="",s=0,o=I.Unknown,l=P.None;function p(Y){let ne=0,ae=0;for(;ne<Y;){const ue=i.charCodeAt(n);if(ue>=d._0&&ue<=d._9)ae=ae*16+ue-d._0;else if(ue>=d.A&&ue<=d.F)ae=ae*16+ue-d.A+10;else if(ue>=d.a&&ue<=d.f)ae=ae*16+ue-d.a+10;else break;n++,ne++}return ne<Y&&(ae=-1),ae}function A(Y){n=Y,t="",s=0,o=I.Unknown,l=P.None}function T(){const Y=n;if(i.charCodeAt(n)===d._0)n++;else for(n++;n<i.length&&u(i.charCodeAt(n));)n++;if(n<i.length&&i.charCodeAt(n)===d.dot)if(n++,n<i.length&&u(i.charCodeAt(n)))for(n++;n<i.length&&u(i.charCodeAt(n));)n++;else return l=P.UnexpectedEndOfNumber,i.substring(Y,n);let ne=n;if(n<i.length&&(i.charCodeAt(n)===d.E||i.charCodeAt(n)===d.e))if(n++,(n<i.length&&i.charCodeAt(n)===d.plus||i.charCodeAt(n)===d.minus)&&n++,n<i.length&&u(i.charCodeAt(n))){for(n++;n<i.length&&u(i.charCodeAt(n));)n++;ne=n}else l=P.UnexpectedEndOfNumber;return i.substring(Y,ne)}function N(){let Y="",ne=n;for(;;){if(n>=r){Y+=i.substring(ne,n),l=P.UnexpectedEndOfString;break}const ae=i.charCodeAt(n);if(ae===d.doubleQuote){Y+=i.substring(ne,n),n++;break}if(ae===d.backslash){if(Y+=i.substring(ne,n),n++,n>=r){l=P.UnexpectedEndOfString;break}switch(i.charCodeAt(n++)){case d.doubleQuote:Y+='"';break;case d.backslash:Y+="\\";break;case d.slash:Y+="/";break;case d.b:Y+="\b";break;case d.f:Y+="\f";break;case d.n:Y+=`
`;break;case d.r:Y+="\r";break;case d.t:Y+="	";break;case d.u:{const me=p(4);me>=0?Y+=String.fromCharCode(me):l=P.InvalidUnicode;break}default:l=P.InvalidEscapeCharacter}ne=n;continue}if(ae>=0&&ae<=31)if(g(ae)){Y+=i.substring(ne,n),l=P.UnexpectedEndOfString;break}else l=P.InvalidCharacter;n++}return Y}function D(){if(t="",l=P.None,s=n,n>=r)return s=r,o=I.EOF;let Y=i.charCodeAt(n);if(O(Y)){do n++,t+=String.fromCharCode(Y),Y=i.charCodeAt(n);while(O(Y));return o=I.Trivia}if(g(Y))return n++,t+=String.fromCharCode(Y),Y===d.carriageReturn&&i.charCodeAt(n)===d.lineFeed&&(n++,t+=`
`),o=I.LineBreakTrivia;switch(Y){case d.openBrace:return n++,o=I.OpenBraceToken;case d.closeBrace:return n++,o=I.CloseBraceToken;case d.openBracket:return n++,o=I.OpenBracketToken;case d.closeBracket:return n++,o=I.CloseBracketToken;case d.colon:return n++,o=I.ColonToken;case d.comma:return n++,o=I.CommaToken;case d.doubleQuote:return n++,t=N(),o=I.StringLiteral;case d.slash:{const ne=n-1;if(i.charCodeAt(n+1)===d.slash){for(n+=2;n<r&&!g(i.charCodeAt(n));)n++;return t=i.substring(ne,n),o=I.LineCommentTrivia}if(i.charCodeAt(n+1)===d.asterisk){n+=2;const ae=r-1;let ue=!1;for(;n<ae;){if(i.charCodeAt(n)===d.asterisk&&i.charCodeAt(n+1)===d.slash){n+=2,ue=!0;break}n++}return ue||(n++,l=P.UnexpectedEndOfComment),t=i.substring(ne,n),o=I.BlockCommentTrivia}return t+=String.fromCharCode(Y),n++,o=I.Unknown}case d.minus:if(t+=String.fromCharCode(Y),n++,n===r||!u(i.charCodeAt(n)))return o=I.Unknown;case d._0:case d._1:case d._2:case d._3:case d._4:case d._5:case d._6:case d._7:case d._8:case d._9:return t+=T(),o=I.NumericLiteral;default:for(;n<r&&j(Y);)n++,Y=i.charCodeAt(n);if(s!==n){switch(t=i.substring(s,n),t){case"true":return o=I.TrueKeyword;case"false":return o=I.FalseKeyword;case"null":return o=I.NullKeyword}return o=I.Unknown}return t+=String.fromCharCode(Y),n++,o=I.Unknown}}function j(Y){if(O(Y)||g(Y))return!1;switch(Y){case d.closeBrace:case d.closeBracket:case d.openBrace:case d.openBracket:case d.doubleQuote:case d.colon:case d.comma:case d.slash:return!1}return!0}function x(){let Y;do Y=D();while(Y>=I.LineCommentTrivia&&Y<=I.Trivia);return Y}return{setPosition:A,getPosition:()=>n,scan:c?x:D,getToken:()=>o,getTokenValue:()=>t,getTokenOffset:()=>s,getTokenLength:()=>n-s,getTokenError:()=>l}}function O(i){return i===d.space||i===d.tab||i===d.verticalTab||i===d.formFeed||i===d.nonBreakingSpace||i===d.ogham||i>=d.enQuad&&i<=d.zeroWidthSpace||i===d.narrowNoBreakSpace||i===d.mathematicalSpace||i===d.ideographicSpace||i===d.byteOrderMark}function g(i){return i===d.lineFeed||i===d.carriageReturn||i===d.lineSeparator||i===d.paragraphSeparator}function u(i){return i>=d._0&&i<=d._9}var d;(function(i){i[i.nullCharacter=0]="nullCharacter",i[i.maxAsciiCharacter=127]="maxAsciiCharacter",i[i.lineFeed=10]="lineFeed",i[i.carriageReturn=13]="carriageReturn",i[i.lineSeparator=8232]="lineSeparator",i[i.paragraphSeparator=8233]="paragraphSeparator",i[i.nextLine=133]="nextLine",i[i.space=32]="space",i[i.nonBreakingSpace=160]="nonBreakingSpace",i[i.enQuad=8192]="enQuad",i[i.emQuad=8193]="emQuad",i[i.enSpace=8194]="enSpace",i[i.emSpace=8195]="emSpace",i[i.threePerEmSpace=8196]="threePerEmSpace",i[i.fourPerEmSpace=8197]="fourPerEmSpace",i[i.sixPerEmSpace=8198]="sixPerEmSpace",i[i.figureSpace=8199]="figureSpace",i[i.punctuationSpace=8200]="punctuationSpace",i[i.thinSpace=8201]="thinSpace",i[i.hairSpace=8202]="hairSpace",i[i.zeroWidthSpace=8203]="zeroWidthSpace",i[i.narrowNoBreakSpace=8239]="narrowNoBreakSpace",i[i.ideographicSpace=12288]="ideographicSpace",i[i.mathematicalSpace=8287]="mathematicalSpace",i[i.ogham=5760]="ogham",i[i._=95]="_",i[i.$=36]="$",i[i._0=48]="_0",i[i._1=49]="_1",i[i._2=50]="_2",i[i._3=51]="_3",i[i._4=52]="_4",i[i._5=53]="_5",i[i._6=54]="_6",i[i._7=55]="_7",i[i._8=56]="_8",i[i._9=57]="_9",i[i.a=97]="a",i[i.b=98]="b",i[i.c=99]="c",i[i.d=100]="d",i[i.e=101]="e",i[i.f=102]="f",i[i.g=103]="g",i[i.h=104]="h",i[i.i=105]="i",i[i.j=106]="j",i[i.k=107]="k",i[i.l=108]="l",i[i.m=109]="m",i[i.n=110]="n",i[i.o=111]="o",i[i.p=112]="p",i[i.q=113]="q",i[i.r=114]="r",i[i.s=115]="s",i[i.t=116]="t",i[i.u=117]="u",i[i.v=118]="v",i[i.w=119]="w",i[i.x=120]="x",i[i.y=121]="y",i[i.z=122]="z",i[i.A=65]="A",i[i.B=66]="B",i[i.C=67]="C",i[i.D=68]="D",i[i.E=69]="E",i[i.F=70]="F",i[i.G=71]="G",i[i.H=72]="H",i[i.I=73]="I",i[i.J=74]="J",i[i.K=75]="K",i[i.L=76]="L",i[i.M=77]="M",i[i.N=78]="N",i[i.O=79]="O",i[i.P=80]="P",i[i.Q=81]="Q",i[i.R=82]="R",i[i.S=83]="S",i[i.T=84]="T",i[i.U=85]="U",i[i.V=86]="V",i[i.W=87]="W",i[i.X=88]="X",i[i.Y=89]="Y",i[i.Z=90]="Z",i[i.ampersand=38]="ampersand",i[i.asterisk=42]="asterisk",i[i.at=64]="at",i[i.backslash=92]="backslash",i[i.bar=124]="bar",i[i.caret=94]="caret",i[i.closeBrace=125]="closeBrace",i[i.closeBracket=93]="closeBracket",i[i.closeParen=41]="closeParen",i[i.colon=58]="colon",i[i.comma=44]="comma",i[i.dot=46]="dot",i[i.doubleQuote=34]="doubleQuote",i[i.equals=61]="equals",i[i.exclamation=33]="exclamation",i[i.greaterThan=62]="greaterThan",i[i.lessThan=60]="lessThan",i[i.minus=45]="minus",i[i.openBrace=123]="openBrace",i[i.openBracket=91]="openBracket",i[i.openParen=40]="openParen",i[i.percent=37]="percent",i[i.plus=43]="plus",i[i.question=63]="question",i[i.semicolon=59]="semicolon",i[i.singleQuote=39]="singleQuote",i[i.slash=47]="slash",i[i.tilde=126]="tilde",i[i.backspace=8]="backspace",i[i.formFeed=12]="formFeed",i[i.byteOrderMark=65279]="byteOrderMark",i[i.tab=9]="tab",i[i.verticalTab=11]="verticalTab"})(d||(d={}));function f(i,c){const n=[],r=new Object;let t;const s={value:{},offset:0,length:0,type:"object",parent:void 0};let o=!1;function l(p,A,T,N){s.value=p,s.offset=A,s.length=T,s.type=N,s.colonOffset=void 0,t=s}try{R(i,{onObjectBegin:(p,A)=>{if(c<=p)throw r;t=void 0,o=c>p,n.push("")},onObjectProperty:(p,A,T)=>{if(c<A||(l(p,A,T,"property"),n[n.length-1]=p,c<=A+T))throw r},onObjectEnd:(p,A)=>{if(c<=p)throw r;t=void 0,n.pop()},onArrayBegin:(p,A)=>{if(c<=p)throw r;t=void 0,n.push(0)},onArrayEnd:(p,A)=>{if(c<=p)throw r;t=void 0,n.pop()},onLiteralValue:(p,A,T)=>{if(c<A||(l(p,A,T,w(p)),c<=A+T))throw r},onSeparator:(p,A,T)=>{if(c<=A)throw r;if(p===":"&&t&&t.type==="property")t.colonOffset=A,o=!1,t=void 0;else if(p===","){const N=n[n.length-1];typeof N=="number"?n[n.length-1]=N+1:(o=!0,n[n.length-1]=""),t=void 0}}})}catch(p){if(p!==r)throw p}return{path:n,previousNode:t,isAtPropertyKey:o,matches:p=>{let A=0;for(let T=0;A<p.length&&T<n.length;T++)if(p[A]===n[T]||p[A]==="*")A++;else if(p[A]!=="**")return!1;return A===p.length}}}function m(i,c=[],n=k.DEFAULT){let r=null,t=[];const s=[];function o(p){Array.isArray(t)?t.push(p):r!==null&&(t[r]=p)}return R(i,{onObjectBegin:()=>{const p={};o(p),s.push(t),t=p,r=null},onObjectProperty:p=>{r=p},onObjectEnd:()=>{t=s.pop()},onArrayBegin:()=>{const p=[];o(p),s.push(t),t=p,r=null},onArrayEnd:()=>{t=s.pop()},onLiteralValue:o,onError:(p,A,T)=>{c.push({error:p,offset:A,length:T})}},n),t[0]}function a(i,c=[],n=k.DEFAULT){let r={type:"array",offset:-1,length:-1,children:[],parent:void 0};function t(p){r.type==="property"&&(r.length=p-r.offset,r=r.parent)}function s(p){return r.children.push(p),p}R(i,{onObjectBegin:p=>{r=s({type:"object",offset:p,length:-1,parent:r,children:[]})},onObjectProperty:(p,A,T)=>{r=s({type:"property",offset:A,length:-1,parent:r,children:[]}),r.children.push({type:"string",value:p,offset:A,length:T,parent:r})},onObjectEnd:(p,A)=>{r.length=p+A-r.offset,r=r.parent,t(p+A)},onArrayBegin:(p,A)=>{r=s({type:"array",offset:p,length:-1,parent:r,children:[]})},onArrayEnd:(p,A)=>{r.length=p+A-r.offset,r=r.parent,t(p+A)},onLiteralValue:(p,A,T)=>{s({type:w(p),offset:A,length:T,parent:r,value:p}),t(A+T)},onSeparator:(p,A,T)=>{r.type==="property"&&(p===":"?r.colonOffset=A:p===","&&t(A))},onError:(p,A,T)=>{c.push({error:p,offset:A,length:T})}},n);const l=r.children[0];return l&&delete l.parent,l}function $(i,c){if(!i)return;let n=i;for(const r of c)if(typeof r=="string"){if(n.type!=="object"||!Array.isArray(n.children))return;let t=!1;for(const s of n.children)if(Array.isArray(s.children)&&s.children[0].value===r){n=s.children[1],t=!0;break}if(!t)return}else{const t=r;if(n.type!=="array"||t<0||!Array.isArray(n.children)||t>=n.children.length)return;n=n.children[t]}return n}function S(i){if(!i.parent||!i.parent.children)return[];const c=S(i.parent);if(i.parent.type==="property"){const n=i.parent.children[0].value;c.push(n)}else if(i.parent.type==="array"){const n=i.parent.children.indexOf(i);n!==-1&&c.push(n)}return c}function b(i){switch(i.type){case"array":return i.children.map(b);case"object":{const c=Object.create(null);for(const n of i.children){const r=n.children[1];r&&(c[n.children[0].value]=b(r))}return c}case"null":case"string":case"number":case"boolean":return i.value;default:return}}function v(i,c,n=!1){return c>=i.offset&&c<i.offset+i.length||n&&c===i.offset+i.length}function h(i,c,n=!1){if(v(i,c,n)){const r=i.children;if(Array.isArray(r))for(let t=0;t<r.length&&r[t].offset<=c;t++){const s=h(r[t],c,n);if(s)return s}return i}}function R(i,c,n=k.DEFAULT){const r=C(i,!1);function t(K){return K?()=>K(r.getTokenOffset(),r.getTokenLength()):()=>!0}function s(K){return K?ie=>K(ie,r.getTokenOffset(),r.getTokenLength()):()=>!0}const o=t(c.onObjectBegin),l=s(c.onObjectProperty),p=t(c.onObjectEnd),A=t(c.onArrayBegin),T=t(c.onArrayEnd),N=s(c.onLiteralValue),D=s(c.onSeparator),j=t(c.onComment),x=s(c.onError),Y=n&&n.disallowComments,ne=n&&n.allowTrailingComma;function ae(){for(;;){const K=r.scan();switch(r.getTokenError()){case P.InvalidUnicode:ue(y.InvalidUnicode);break;case P.InvalidEscapeCharacter:ue(y.InvalidEscapeCharacter);break;case P.UnexpectedEndOfNumber:ue(y.UnexpectedEndOfNumber);break;case P.UnexpectedEndOfComment:Y||ue(y.UnexpectedEndOfComment);break;case P.UnexpectedEndOfString:ue(y.UnexpectedEndOfString);break;case P.InvalidCharacter:ue(y.InvalidCharacter);break}switch(K){case I.LineCommentTrivia:case I.BlockCommentTrivia:Y?ue(y.InvalidCommentToken):j();break;case I.Unknown:ue(y.InvalidSymbol);break;case I.Trivia:case I.LineBreakTrivia:break;default:return K}}}function ue(K,ie=[],se=[]){if(x(K),ie.length+se.length>0){let L=r.getToken();for(;L!==I.EOF;){if(ie.indexOf(L)!==-1){ae();break}else if(se.indexOf(L)!==-1)break;L=ae()}}}function me(K){const ie=r.getTokenValue();return K?N(ie):l(ie),ae(),!0}function W(){switch(r.getToken()){case I.NumericLiteral:{let K=0;try{K=JSON.parse(r.getTokenValue()),typeof K!="number"&&(ue(y.InvalidNumberFormat),K=0)}catch{ue(y.InvalidNumberFormat)}N(K);break}case I.NullKeyword:N(null);break;case I.TrueKeyword:N(!0);break;case I.FalseKeyword:N(!1);break;default:return!1}return ae(),!0}function _(){return r.getToken()!==I.StringLiteral?(ue(y.PropertyNameExpected,[],[I.CloseBraceToken,I.CommaToken]),!1):(me(!1),r.getToken()===I.ColonToken?(D(":"),ae(),H()||ue(y.ValueExpected,[],[I.CloseBraceToken,I.CommaToken])):ue(y.ColonExpected,[],[I.CloseBraceToken,I.CommaToken]),!0)}function M(){o(),ae();let K=!1;for(;r.getToken()!==I.CloseBraceToken&&r.getToken()!==I.EOF;){if(r.getToken()===I.CommaToken){if(K||ue(y.ValueExpected,[],[]),D(","),ae(),r.getToken()===I.CloseBraceToken&&ne)break}else K&&ue(y.CommaExpected,[],[]);_()||ue(y.ValueExpected,[],[I.CloseBraceToken,I.CommaToken]),K=!0}return p(),r.getToken()!==I.CloseBraceToken?ue(y.CloseBraceExpected,[I.CloseBraceToken],[]):ae(),!0}function U(){A(),ae();let K=!1;for(;r.getToken()!==I.CloseBracketToken&&r.getToken()!==I.EOF;){if(r.getToken()===I.CommaToken){if(K||ue(y.ValueExpected,[],[]),D(","),ae(),r.getToken()===I.CloseBracketToken&&ne)break}else K&&ue(y.CommaExpected,[],[]);H()||ue(y.ValueExpected,[],[I.CloseBracketToken,I.CommaToken]),K=!0}return T(),r.getToken()!==I.CloseBracketToken?ue(y.CloseBracketExpected,[I.CloseBracketToken],[]):ae(),!0}function H(){switch(r.getToken()){case I.OpenBracketToken:return U();case I.OpenBraceToken:return M();case I.StringLiteral:return me(!0);default:return W()}}return ae(),r.getToken()===I.EOF?n.allowEmptyContent?!0:(ue(y.ValueExpected,[],[]),!1):H()?(r.getToken()!==I.EOF&&ue(y.EndOfFileExpected,[],[]),!0):(ue(y.ValueExpected,[],[]),!1)}function w(i){switch(typeof i){case"boolean":return"boolean";case"number":return"number";case"string":return"string";case"object":{if(i){if(Array.isArray(i))return"array"}else return"null";return"object"}default:return"null"}}}),define(le[77],he([0,1,34]),function(Q,e,P){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$bo=I,e.$co=y,e.$do=O,e.$eo=g;function I(u,d,f){let m,a,$,S,b;if(d){for(S=d.offset,b=S+d.length,$=S;$>0&&!g(u,$-1);)$--;let l=b;for(;l<u.length&&!g(u,l);)l++;a=u.substring($,l),m=C(a,f)}else a=u,m=0,$=0,S=0,b=u.length;const v=O(f,u);let h=!1,R=0,w;f.insertSpaces?w=k(" ",f.tabSize||4):w="	";const i=(0,P.$3n)(a,!1);let c=!1;function n(){return v+k(w,m+R)}function r(){let l=i.scan();for(h=!1;l===P.SyntaxKind.Trivia||l===P.SyntaxKind.LineBreakTrivia;)h=h||l===P.SyntaxKind.LineBreakTrivia,l=i.scan();return c=l===P.SyntaxKind.Unknown||i.getTokenError()!==P.ScanError.None,l}const t=[];function s(l,p,A){!c&&p<b&&A>S&&u.substring(p,A)!==l&&t.push({offset:p,length:A-p,content:l})}let o=r();if(o!==P.SyntaxKind.EOF){const l=i.getTokenOffset()+$,p=k(w,m);s(p,$,l)}for(;o!==P.SyntaxKind.EOF;){let l=i.getTokenOffset()+i.getTokenLength()+$,p=r(),A="";for(;!h&&(p===P.SyntaxKind.LineCommentTrivia||p===P.SyntaxKind.BlockCommentTrivia);){const N=i.getTokenOffset()+$;s(" ",l,N),l=i.getTokenOffset()+i.getTokenLength()+$,A=p===P.SyntaxKind.LineCommentTrivia?n():"",p=r()}if(p===P.SyntaxKind.CloseBraceToken)o!==P.SyntaxKind.OpenBraceToken&&(R--,A=n());else if(p===P.SyntaxKind.CloseBracketToken)o!==P.SyntaxKind.OpenBracketToken&&(R--,A=n());else{switch(o){case P.SyntaxKind.OpenBracketToken:case P.SyntaxKind.OpenBraceToken:R++,A=n();break;case P.SyntaxKind.CommaToken:case P.SyntaxKind.LineCommentTrivia:A=n();break;case P.SyntaxKind.BlockCommentTrivia:h?A=n():A=" ";break;case P.SyntaxKind.ColonToken:A=" ";break;case P.SyntaxKind.StringLiteral:if(p===P.SyntaxKind.ColonToken){A="";break}case P.SyntaxKind.NullKeyword:case P.SyntaxKind.TrueKeyword:case P.SyntaxKind.FalseKeyword:case P.SyntaxKind.NumericLiteral:case P.SyntaxKind.CloseBraceToken:case P.SyntaxKind.CloseBracketToken:p===P.SyntaxKind.LineCommentTrivia||p===P.SyntaxKind.BlockCommentTrivia?A=" ":p!==P.SyntaxKind.CommaToken&&p!==P.SyntaxKind.EOF&&(c=!0);break;case P.SyntaxKind.Unknown:c=!0;break}h&&(p===P.SyntaxKind.LineCommentTrivia||p===P.SyntaxKind.BlockCommentTrivia)&&(A=n())}const T=i.getTokenOffset()+$;s(A,l,T),o=p}return t}function y(u,d){const f=JSON.stringify(u,void 0,d.insertSpaces?d.tabSize||4:"	");return d.eol!==void 0?f.replace(/\r\n|\r|\n/g,d.eol):f}function k(u,d){let f="";for(let m=0;m<d;m++)f+=u;return f}function C(u,d){let f=0,m=0;const a=d.tabSize||4;for(;f<u.length;){const $=u.charAt(f);if($===" ")m++;else if($==="	")m+=a;else break;f++}return Math.floor(m/a)}function O(u,d){for(let f=0;f<d.length;f++){const m=d.charAt(f);if(m==="\r")return f+1<d.length&&d.charAt(f+1)===`
`?`\r
`:"\r";if(m===`
`)return`
`}return u&&u.eol||`
`}function g(u,d){return`\r
`.indexOf(u.charAt(d))!==-1}}),define(le[78],he([0,1,34,77]),function(Q,e,P,I){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$fo=y,e.$go=k,e.$ho=C,e.$io=O,e.$jo=g;function y(u,d,f){return k(u,d,void 0,f)}function k(u,d,f,m,a){const $=d.slice(),S=[],b=(0,P.$6n)(u,S);let v,h;for(;$.length>0&&(h=$.pop(),v=(0,P.$7n)(b,$),v===void 0&&f!==void 0);)typeof h=="string"?f={[h]:f}:f=[f];if(v)if(v.type==="object"&&typeof h=="string"&&Array.isArray(v.children)){const R=(0,P.$7n)(v,[h]);if(R!==void 0)if(f===void 0){if(!R.parent)throw new Error("Malformed AST");const w=v.children.indexOf(R.parent);let i,c=R.parent.offset+R.parent.length;if(w>0){const n=v.children[w-1];i=n.offset+n.length}else i=v.offset+1,v.children.length>1&&(c=v.children[1].offset);return C(u,{offset:i,length:c-i,content:""},m)}else return C(u,{offset:R.offset,length:R.length,content:JSON.stringify(f)},m);else{if(f===void 0)return[];const w=`${JSON.stringify(h)}: ${JSON.stringify(f)}`,i=a?a(v.children.map(n=>n.children[0].value)):v.children.length;let c;if(i>0){const n=v.children[i-1];c={offset:n.offset+n.length,length:0,content:","+w}}else v.children.length===0?c={offset:v.offset+1,length:0,content:w}:c={offset:v.offset+1,length:0,content:w+","};return C(u,c,m)}}else if(v.type==="array"&&typeof h=="number"&&Array.isArray(v.children))if(f!==void 0){const R=`${JSON.stringify(f)}`;let w;if(v.children.length===0||h===0)w={offset:v.offset+1,length:0,content:v.children.length===0?R:R+","};else{const i=h===-1||h>v.children.length?v.children.length:h,c=v.children[i-1];w={offset:c.offset+c.length,length:0,content:","+R}}return C(u,w,m)}else{const R=h,w=v.children[R];let i;if(v.children.length===1)i={offset:v.offset+1,length:v.length-2,content:""};else if(v.children.length-1===R){const c=v.children[R-1],n=c.offset+c.length,r=v.offset+v.length;i={offset:n,length:r-2-n,content:""}}else i={offset:w.offset,length:v.children[R+1].offset-w.offset,content:""};return C(u,i,m)}else throw new Error(`Can not add ${typeof h!="number"?"index":"property"} to parent of type ${v.type}`);else return f===void 0?[]:C(u,{offset:b?b.offset:0,length:b?b.length:0,content:JSON.stringify(f)},m)}function C(u,d,f){let m=O(u,d),a=d.offset,$=d.offset+d.content.length;if(d.length===0||d.content.length===0){for(;a>0&&!(0,I.$eo)(m,a-1);)a--;for(;$<m.length&&!(0,I.$eo)(m,$);)$++}const S=(0,I.$bo)(m,{offset:a,length:$-a},f);for(let v=S.length-1;v>=0;v--){const h=S[v];m=O(m,h),a=Math.min(a,h.offset),$=Math.max($,h.offset+h.length),$+=h.content.length-h.length}const b=u.length-(m.length-$)-a;return[{offset:a,length:b,content:m.substring(a,$)}]}function O(u,d){return u.substring(0,d.offset)+d.content+u.substring(d.offset+d.length)}function g(u,d){const f=d.slice(0).sort((a,$)=>{const S=a.offset-$.offset;return S===0?a.length-$.length:S});let m=u.length;for(let a=f.length-1;a>=0;a--){const $=f[a];if($.offset+$.length<=m)u=O(u,$);else throw new Error("Overlapping edit");m=$.offset}return u}}),define(le[79],he([0,1]),function(Q,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$ak=P;function P(k){let C=!1;const O=new Map,g=new Map;if(y(k,S=>{if(k===S)return!0;const b=JSON.stringify(S);if(b.length<30)return!0;const v=O.get(b);if(!v){const h={schemas:[S]};return O.set(b,h),g.set(S,h),!0}return v.schemas.push(S),g.set(S,v),C=!0,!1}),O.clear(),!C)return JSON.stringify(k);let d="$defs";for(;k.hasOwnProperty(d);)d+="_";const f=[];function m(S){return JSON.stringify(S,(b,v)=>{if(v!==S){const h=g.get(v);if(h&&h.schemas.length>1)return h.id||(h.id=`_${f.length}`,f.push(h.schemas[0])),{$ref:`#/${d}/${h.id}`}}return v})}const a=m(k),$=[];for(let S=0;S<f.length;S++)$.push(`"_${S}":${m(f[S])}`);return $.length?`${a.substring(0,a.length-1)},"${d}":{${$.join(",")}}}`:a}function I(k){return typeof k=="object"&&k!==null}function y(k,C){if(!k||typeof k!="object")return;const O=(...a)=>{for(const $ of a)I($)&&f.push($)},g=(...a)=>{for(const $ of a)if(I($))for(const S in $){const b=$[S];I(b)&&f.push(b)}},u=(...a)=>{for(const $ of a)if(Array.isArray($))for(const S of $)I(S)&&f.push(S)},d=a=>{if(Array.isArray(a))for(const $ of a)I($)&&f.push($);else I(a)&&f.push(a)},f=[k];let m=f.pop();for(;m;)C(m)&&(O(m.additionalItems,m.additionalProperties,m.not,m.contains,m.propertyNames,m.if,m.then,m.else,m.unevaluatedItems,m.unevaluatedProperties),g(m.definitions,m.$defs,m.properties,m.patternProperties,m.dependencies,m.dependentSchemas),u(m.anyOf,m.allOf,m.oneOf,m.prefixItems),d(m.items)),m=f.pop()}}),define(le[80],he([0,1]),function(Q,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$Um=e.$Tm=e.$Sm=void 0,e.$Qm=P,e.rot=I,e.$Vm=O;function P(g,u,d){return Math.min(Math.max(g,u),d)}function I(g,u){return(u+g%u)%u}class y{constructor(){this.a=0}getNext(){return this.a++}}e.$Sm=y;class k{constructor(){this.a=1,this.b=0}update(u){return this.b=this.b+(u-this.b)/this.a,this.a+=1,this.b}get value(){return this.b}}e.$Tm=k;class C{constructor(u){this.a=0,this.b=0,this.c=[],this.d=0,this.e=0,this.c=new Array(u),this.c.fill(0,0,u)}update(u){const d=this.c[this.d];return this.c[this.d]=u,this.d=(this.d+1)%this.c.length,this.e-=d,this.e+=u,this.a<this.c.length&&(this.a+=1),this.b=this.e/this.a,this.b}get value(){return this.b}}e.$Um=C;function O(g,u,d,f,m,a,$,S){const b=$-d,v=S-f,h=m-d,R=a-f,w=g-d,i=u-f,c=b*b+v*v,n=b*h+v*R,r=b*w+v*i,t=h*h+R*R,s=h*w+R*i,o=1/(c*t-n*n),l=(t*r-n*s)*o,p=(c*s-n*r)*o;return l>=0&&p>=0&&l+p<1}}),function(){function Q(y){const k=[];typeof y=="number"&&k.push("code/timeOrigin",y);function C(g){k.push(g,Date.now())}function O(){const g=[];for(let u=0;u<k.length;u+=2)g.push({name:k[u],startTime:k[u+1]});return g}return{mark:C,getMarks:O}}function e(){if(typeof performance=="object"&&typeof performance.mark=="function"&&!performance.nodeTiming)return typeof performance.timeOrigin!="number"&&!performance.timing?Q():{mark(y){performance.mark(y)},getMarks(){let y=performance.timeOrigin;typeof y!="number"&&(y=performance.timing.navigationStart||performance.timing.redirectStart||performance.timing.fetchStart);const k=[{name:"code/timeOrigin",startTime:Math.round(y)}];for(const C of performance.getEntriesByType("mark"))k.push({name:C.name,startTime:Math.round(y+C.startTime)});return k}};if(typeof process=="object"){const y=performance?.timeOrigin;return Q(y)}else return console.trace("perf-util loaded in UNKNOWN environment"),Q()}function P(y){return y.MonacoPerformanceMarks||(y.MonacoPerformanceMarks=e()),y.MonacoPerformanceMarks}var I;typeof global=="object"?I=global:typeof self=="object"?I=self:I={},typeof define=="function"?define("vs/base/common/performance",[],function(){return P(I)}):typeof module=="object"&&typeof module.exports=="object"?module.exports=P(I):(console.trace("perf-util defined in UNKNOWN context (neither requirejs or commonjs)"),I.perf=P(I))}(),function(Q,e){if(typeof exports=="object"&&typeof module=="object")module.exports=e();else if(typeof define=="function"&&define.amd)define("vs/base/common/semver/semver",[],e);else{var P=e();for(var I in P)(typeof exports=="object"?exports:Q)[I]=P[I]}}(typeof self<"u"?self:this,function(){return function(Q){var e={};function P(I){if(e[I])return e[I].exports;var y=e[I]={i:I,l:!1,exports:{}};return Q[I].call(y.exports,y,y.exports,P),y.l=!0,y.exports}return P.m=Q,P.c=e,P.d=function(I,y,k){P.o(I,y)||Object.defineProperty(I,y,{enumerable:!0,get:k})},P.r=function(I){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(I,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(I,"__esModule",{value:!0})},P.t=function(I,y){if(1&y&&(I=P(I)),8&y||4&y&&typeof I=="object"&&I&&I.__esModule)return I;var k=Object.create(null);if(P.r(k),Object.defineProperty(k,"default",{enumerable:!0,value:I}),2&y&&typeof I!="string")for(var C in I)P.d(k,C,function(O){return I[O]}.bind(null,C));return k},P.n=function(I){var y=I&&I.__esModule?function(){return I.default}:function(){return I};return P.d(y,"a",y),y},P.o=function(I,y){return Object.prototype.hasOwnProperty.call(I,y)},P.p="",P(P.s=0)}([function(Q,e,P){(function(I){var y;e=Q.exports=L,y=typeof I=="object"&&I.env&&I.env.NODE_DEBUG&&/\bsemver\b/i.test(I.env.NODE_DEBUG)?function(){var B=Array.prototype.slice.call(arguments,0);B.unshift("SEMVER"),console.log.apply(console,B)}:function(){},e.SEMVER_SPEC_VERSION="2.0.0";var k=256,C=Number.MAX_SAFE_INTEGER||9007199254740991,O=e.re=[],g=e.src=[],u=0,d=u++;g[d]="0|[1-9]\\d*";var f=u++;g[f]="[0-9]+";var m=u++;g[m]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var a=u++;g[a]="("+g[d]+")\\.("+g[d]+")\\.("+g[d]+")";var $=u++;g[$]="("+g[f]+")\\.("+g[f]+")\\.("+g[f]+")";var S=u++;g[S]="(?:"+g[d]+"|"+g[m]+")";var b=u++;g[b]="(?:"+g[f]+"|"+g[m]+")";var v=u++;g[v]="(?:-("+g[S]+"(?:\\."+g[S]+")*))";var h=u++;g[h]="(?:-?("+g[b]+"(?:\\."+g[b]+")*))";var R=u++;g[R]="[0-9A-Za-z-]+";var w=u++;g[w]="(?:\\+("+g[R]+"(?:\\."+g[R]+")*))";var i=u++,c="v?"+g[a]+g[v]+"?"+g[w]+"?";g[i]="^"+c+"$";var n="[v=\\s]*"+g[$]+g[h]+"?"+g[w]+"?",r=u++;g[r]="^"+n+"$";var t=u++;g[t]="((?:<|>)?=?)";var s=u++;g[s]=g[f]+"|x|X|\\*";var o=u++;g[o]=g[d]+"|x|X|\\*";var l=u++;g[l]="[v=\\s]*("+g[o]+")(?:\\.("+g[o]+")(?:\\.("+g[o]+")(?:"+g[v]+")?"+g[w]+"?)?)?";var p=u++;g[p]="[v=\\s]*("+g[s]+")(?:\\.("+g[s]+")(?:\\.("+g[s]+")(?:"+g[h]+")?"+g[w]+"?)?)?";var A=u++;g[A]="^"+g[t]+"\\s*"+g[l]+"$";var T=u++;g[T]="^"+g[t]+"\\s*"+g[p]+"$";var N=u++;g[N]="(?:^|[^\\d])(\\d{1,16})(?:\\.(\\d{1,16}))?(?:\\.(\\d{1,16}))?(?:$|[^\\d])";var D=u++;g[D]="(?:~>?)";var j=u++;g[j]="(\\s*)"+g[D]+"\\s+",O[j]=new RegExp(g[j],"g");var x=u++;g[x]="^"+g[D]+g[l]+"$";var Y=u++;g[Y]="^"+g[D]+g[p]+"$";var ne=u++;g[ne]="(?:\\^)";var ae=u++;g[ae]="(\\s*)"+g[ne]+"\\s+",O[ae]=new RegExp(g[ae],"g");var ue=u++;g[ue]="^"+g[ne]+g[l]+"$";var me=u++;g[me]="^"+g[ne]+g[p]+"$";var W=u++;g[W]="^"+g[t]+"\\s*("+n+")$|^$";var _=u++;g[_]="^"+g[t]+"\\s*("+c+")$|^$";var M=u++;g[M]="(\\s*)"+g[t]+"\\s*("+n+"|"+g[l]+")",O[M]=new RegExp(g[M],"g");var U=u++;g[U]="^\\s*("+g[l]+")\\s+-\\s+("+g[l]+")\\s*$";var H=u++;g[H]="^\\s*("+g[p]+")\\s+-\\s+("+g[p]+")\\s*$";var K=u++;g[K]="(<|>)?=?\\s*\\*";for(var ie=0;ie<35;ie++)y(ie,g[ie]),O[ie]||(O[ie]=new RegExp(g[ie]));function se(B,ee){if(B instanceof L)return B;if(typeof B!="string"||B.length>k||!(ee?O[r]:O[i]).test(B))return null;try{return new L(B,ee)}catch{return null}}function L(B,ee){if(B instanceof L){if(B.loose===ee)return B;B=B.version}else if(typeof B!="string")throw new TypeError("Invalid Version: "+B);if(B.length>k)throw new TypeError("version is longer than "+k+" characters");if(!(this instanceof L))return new L(B,ee);y("SemVer",B,ee),this.loose=ee;var te=B.trim().match(ee?O[r]:O[i]);if(!te)throw new TypeError("Invalid Version: "+B);if(this.raw=B,this.major=+te[1],this.minor=+te[2],this.patch=+te[3],this.major>C||this.major<0)throw new TypeError("Invalid major version");if(this.minor>C||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>C||this.patch<0)throw new TypeError("Invalid patch version");te[4]?this.prerelease=te[4].split(".").map(function($e){if(/^[0-9]+$/.test($e)){var Se=+$e;if(Se>=0&&Se<C)return Se}return $e}):this.prerelease=[],this.build=te[5]?te[5].split("."):[],this.format()}e.parse=se,e.valid=function(B,ee){var te=se(B,ee);return te?te.version:null},e.clean=function(B,ee){var te=se(B.trim().replace(/^[=v]+/,""),ee);return te?te.version:null},e.SemVer=L,L.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},L.prototype.toString=function(){return this.version},L.prototype.compare=function(B){return y("SemVer.compare",this.version,this.loose,B),B instanceof L||(B=new L(B,this.loose)),this.compareMain(B)||this.comparePre(B)},L.prototype.compareMain=function(B){return B instanceof L||(B=new L(B,this.loose)),z(this.major,B.major)||z(this.minor,B.minor)||z(this.patch,B.patch)},L.prototype.comparePre=function(B){if(B instanceof L||(B=new L(B,this.loose)),this.prerelease.length&&!B.prerelease.length)return-1;if(!this.prerelease.length&&B.prerelease.length)return 1;if(!this.prerelease.length&&!B.prerelease.length)return 0;var ee=0;do{var te=this.prerelease[ee],$e=B.prerelease[ee];if(y("prerelease compare",ee,te,$e),te===void 0&&$e===void 0)return 0;if($e===void 0)return 1;if(te===void 0)return-1;if(te!==$e)return z(te,$e)}while(++ee)},L.prototype.inc=function(B,ee){switch(B){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",ee);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",ee);break;case"prepatch":this.prerelease.length=0,this.inc("patch",ee),this.inc("pre",ee);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",ee),this.inc("pre",ee);break;case"major":this.minor===0&&this.patch===0&&this.prerelease.length!==0||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":this.patch===0&&this.prerelease.length!==0||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{for(var te=this.prerelease.length;--te>=0;)typeof this.prerelease[te]=="number"&&(this.prerelease[te]++,te=-2);te===-1&&this.prerelease.push(0)}ee&&(this.prerelease[0]===ee?isNaN(this.prerelease[1])&&(this.prerelease=[ee,0]):this.prerelease=[ee,0]);break;default:throw new Error("invalid increment argument: "+B)}return this.format(),this.raw=this.version,this},e.inc=function(B,ee,te,$e){typeof te=="string"&&($e=te,te=void 0);try{return new L(B,te).inc(ee,$e).version}catch{return null}},e.diff=function(B,ee){if(Z(B,ee))return null;var te=se(B),$e=se(ee);if(te.prerelease.length||$e.prerelease.length){for(var Se in te)if((Se==="major"||Se==="minor"||Se==="patch")&&te[Se]!==$e[Se])return"pre"+Se;return"prerelease"}for(var Se in te)if((Se==="major"||Se==="minor"||Se==="patch")&&te[Se]!==$e[Se])return Se},e.compareIdentifiers=z;var V=/^[0-9]+$/;function z(B,ee){var te=V.test(B),$e=V.test(ee);return te&&$e&&(B=+B,ee=+ee),te&&!$e?-1:$e&&!te?1:B<ee?-1:B>ee?1:0}function E(B,ee,te){return new L(B,te).compare(new L(ee,te))}function F(B,ee,te){return E(B,ee,te)>0}function J(B,ee,te){return E(B,ee,te)<0}function Z(B,ee,te){return E(B,ee,te)===0}function G(B,ee,te){return E(B,ee,te)!==0}function q(B,ee,te){return E(B,ee,te)>=0}function X(B,ee,te){return E(B,ee,te)<=0}function re(B,ee,te,$e){var Se;switch(ee){case"===":typeof B=="object"&&(B=B.version),typeof te=="object"&&(te=te.version),Se=B===te;break;case"!==":typeof B=="object"&&(B=B.version),typeof te=="object"&&(te=te.version),Se=B!==te;break;case"":case"=":case"==":Se=Z(B,te,$e);break;case"!=":Se=G(B,te,$e);break;case">":Se=F(B,te,$e);break;case">=":Se=q(B,te,$e);break;case"<":Se=J(B,te,$e);break;case"<=":Se=X(B,te,$e);break;default:throw new TypeError("Invalid operator: "+ee)}return Se}function ce(B,ee){if(B instanceof ce){if(B.loose===ee)return B;B=B.value}if(!(this instanceof ce))return new ce(B,ee);y("comparator",B,ee),this.loose=ee,this.parse(B),this.semver===fe?this.value="":this.value=this.operator+this.semver.version,y("comp",this)}e.rcompareIdentifiers=function(B,ee){return z(ee,B)},e.major=function(B,ee){return new L(B,ee).major},e.minor=function(B,ee){return new L(B,ee).minor},e.patch=function(B,ee){return new L(B,ee).patch},e.compare=E,e.compareLoose=function(B,ee){return E(B,ee,!0)},e.rcompare=function(B,ee,te){return E(ee,B,te)},e.sort=function(B,ee){return B.sort(function(te,$e){return e.compare(te,$e,ee)})},e.rsort=function(B,ee){return B.sort(function(te,$e){return e.rcompare(te,$e,ee)})},e.gt=F,e.lt=J,e.eq=Z,e.neq=G,e.gte=q,e.lte=X,e.cmp=re,e.Comparator=ce;var fe={};function we(B,ee){if(B instanceof we)return B.loose===ee?B:new we(B.raw,ee);if(B instanceof ce)return new we(B.value,ee);if(!(this instanceof we))return new we(B,ee);if(this.loose=ee,this.raw=B,this.set=B.split(/\s*\|\|\s*/).map(function(te){return this.parseRange(te.trim())},this).filter(function(te){return te.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+B);this.format()}function de(B){return!B||B.toLowerCase()==="x"||B==="*"}function pe(B,ee,te,$e,Se,Ne,ke,Te,Re,Ce,Ue,De,Le){return((ee=de(te)?"":de($e)?">="+te+".0.0":de(Se)?">="+te+"."+$e+".0":">="+ee)+" "+(Te=de(Re)?"":de(Ce)?"<"+(+Re+1)+".0.0":de(Ue)?"<"+Re+"."+(+Ce+1)+".0":De?"<="+Re+"."+Ce+"."+Ue+"-"+De:"<="+Te)).trim()}function ge(B,ee){for(var te=0;te<B.length;te++)if(!B[te].test(ee))return!1;if(ee.prerelease.length){for(te=0;te<B.length;te++)if(y(B[te].semver),B[te].semver!==fe&&B[te].semver.prerelease.length>0){var $e=B[te].semver;if($e.major===ee.major&&$e.minor===ee.minor&&$e.patch===ee.patch)return!0}return!1}return!0}function ye(B,ee,te){try{ee=new we(ee,te)}catch{return!1}return ee.test(B)}function ve(B,ee,te,$e){var Se,Ne,ke,Te,Re;switch(B=new L(B,$e),ee=new we(ee,$e),te){case">":Se=F,Ne=X,ke=J,Te=">",Re=">=";break;case"<":Se=J,Ne=q,ke=F,Te="<",Re="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(ye(B,ee,$e))return!1;for(var Ce=0;Ce<ee.set.length;++Ce){var Ue=ee.set[Ce],De=null,Le=null;if(Ue.forEach(function(Fe){Fe.semver===fe&&(Fe=new ce(">=0.0.0")),De=De||Fe,Le=Le||Fe,Se(Fe.semver,De.semver,$e)?De=Fe:ke(Fe.semver,Le.semver,$e)&&(Le=Fe)}),De.operator===Te||De.operator===Re||(!Le.operator||Le.operator===Te)&&Ne(B,Le.semver)||Le.operator===Re&&ke(B,Le.semver))return!1}return!0}ce.prototype.parse=function(B){var ee=this.loose?O[W]:O[_],te=B.match(ee);if(!te)throw new TypeError("Invalid comparator: "+B);this.operator=te[1],this.operator==="="&&(this.operator=""),te[2]?this.semver=new L(te[2],this.loose):this.semver=fe},ce.prototype.toString=function(){return this.value},ce.prototype.test=function(B){return y("Comparator.test",B,this.loose),this.semver===fe||(typeof B=="string"&&(B=new L(B,this.loose)),re(B,this.operator,this.semver,this.loose))},ce.prototype.intersects=function(B,ee){if(!(B instanceof ce))throw new TypeError("a Comparator is required");var te;if(this.operator==="")return te=new we(B.value,ee),ye(this.value,te,ee);if(B.operator==="")return te=new we(this.value,ee),ye(B.semver,te,ee);var $e=!(this.operator!==">="&&this.operator!==">"||B.operator!==">="&&B.operator!==">"),Se=!(this.operator!=="<="&&this.operator!=="<"||B.operator!=="<="&&B.operator!=="<"),Ne=this.semver.version===B.semver.version,ke=!(this.operator!==">="&&this.operator!=="<="||B.operator!==">="&&B.operator!=="<="),Te=re(this.semver,"<",B.semver,ee)&&(this.operator===">="||this.operator===">")&&(B.operator==="<="||B.operator==="<"),Re=re(this.semver,">",B.semver,ee)&&(this.operator==="<="||this.operator==="<")&&(B.operator===">="||B.operator===">");return $e||Se||Ne&&ke||Te||Re},e.Range=we,we.prototype.format=function(){return this.range=this.set.map(function(B){return B.join(" ").trim()}).join("||").trim(),this.range},we.prototype.toString=function(){return this.range},we.prototype.parseRange=function(B){var ee=this.loose;B=B.trim(),y("range",B,ee);var te=ee?O[H]:O[U];B=B.replace(te,pe),y("hyphen replace",B),B=B.replace(O[M],"$1$2$3"),y("comparator trim",B,O[M]),B=(B=(B=B.replace(O[j],"$1~")).replace(O[ae],"$1^")).split(/\s+/).join(" ");var $e=ee?O[W]:O[_],Se=B.split(" ").map(function(Ne){return function(ke,Te){return y("comp",ke),ke=function(Re,Ce){return Re.trim().split(/\s+/).map(function(Ue){return function(De,Le){y("caret",De,Le);var Fe=Le?O[me]:O[ue];return De.replace(Fe,function(qe,Pe,Ie,Oe,Ae){var je;return y("caret",De,qe,Pe,Ie,Oe,Ae),de(Pe)?je="":de(Ie)?je=">="+Pe+".0.0 <"+(+Pe+1)+".0.0":de(Oe)?je=Pe==="0"?">="+Pe+"."+Ie+".0 <"+Pe+"."+(+Ie+1)+".0":">="+Pe+"."+Ie+".0 <"+(+Pe+1)+".0.0":Ae?(y("replaceCaret pr",Ae),Ae.charAt(0)!=="-"&&(Ae="-"+Ae),je=Pe==="0"?Ie==="0"?">="+Pe+"."+Ie+"."+Oe+Ae+" <"+Pe+"."+Ie+"."+(+Oe+1):">="+Pe+"."+Ie+"."+Oe+Ae+" <"+Pe+"."+(+Ie+1)+".0":">="+Pe+"."+Ie+"."+Oe+Ae+" <"+(+Pe+1)+".0.0"):(y("no pr"),je=Pe==="0"?Ie==="0"?">="+Pe+"."+Ie+"."+Oe+" <"+Pe+"."+Ie+"."+(+Oe+1):">="+Pe+"."+Ie+"."+Oe+" <"+Pe+"."+(+Ie+1)+".0":">="+Pe+"."+Ie+"."+Oe+" <"+(+Pe+1)+".0.0"),y("caret return",je),je})}(Ue,Ce)}).join(" ")}(ke,Te),y("caret",ke),ke=function(Re,Ce){return Re.trim().split(/\s+/).map(function(Ue){return function(De,Le){var Fe=Le?O[Y]:O[x];return De.replace(Fe,function(qe,Pe,Ie,Oe,Ae){var je;return y("tilde",De,qe,Pe,Ie,Oe,Ae),de(Pe)?je="":de(Ie)?je=">="+Pe+".0.0 <"+(+Pe+1)+".0.0":de(Oe)?je=">="+Pe+"."+Ie+".0 <"+Pe+"."+(+Ie+1)+".0":Ae?(y("replaceTilde pr",Ae),Ae.charAt(0)!=="-"&&(Ae="-"+Ae),je=">="+Pe+"."+Ie+"."+Oe+Ae+" <"+Pe+"."+(+Ie+1)+".0"):je=">="+Pe+"."+Ie+"."+Oe+" <"+Pe+"."+(+Ie+1)+".0",y("tilde return",je),je})}(Ue,Ce)}).join(" ")}(ke,Te),y("tildes",ke),ke=function(Re,Ce){return y("replaceXRanges",Re,Ce),Re.split(/\s+/).map(function(Ue){return function(De,Le){De=De.trim();var Fe=Le?O[T]:O[A];return De.replace(Fe,function(qe,Pe,Ie,Oe,Ae,je){y("xRange",De,qe,Pe,Ie,Oe,Ae,je);var Ve=de(Ie),Me=Ve||de(Oe),Be=Me||de(Ae);return Pe==="="&&Be&&(Pe=""),Ve?qe=Pe===">"||Pe==="<"?"<0.0.0":"*":Pe&&Be?(Me&&(Oe=0),Be&&(Ae=0),Pe===">"?(Pe=">=",Me?(Ie=+Ie+1,Oe=0,Ae=0):Be&&(Oe=+Oe+1,Ae=0)):Pe==="<="&&(Pe="<",Me?Ie=+Ie+1:Oe=+Oe+1),qe=Pe+Ie+"."+Oe+"."+Ae):Me?qe=">="+Ie+".0.0 <"+(+Ie+1)+".0.0":Be&&(qe=">="+Ie+"."+Oe+".0 <"+Ie+"."+(+Oe+1)+".0"),y("xRange return",qe),qe})}(Ue,Ce)}).join(" ")}(ke,Te),y("xrange",ke),ke=function(Re,Ce){return y("replaceStars",Re,Ce),Re.trim().replace(O[K],"")}(ke,Te),y("stars",ke),ke}(Ne,ee)}).join(" ").split(/\s+/);return this.loose&&(Se=Se.filter(function(Ne){return!!Ne.match($e)})),Se=Se.map(function(Ne){return new ce(Ne,ee)})},we.prototype.intersects=function(B,ee){if(!(B instanceof we))throw new TypeError("a Range is required");return this.set.some(function(te){return te.every(function($e){return B.set.some(function(Se){return Se.every(function(Ne){return $e.intersects(Ne,ee)})})})})},e.toComparators=function(B,ee){return new we(B,ee).set.map(function(te){return te.map(function($e){return $e.value}).join(" ").trim().split(" ")})},we.prototype.test=function(B){if(!B)return!1;typeof B=="string"&&(B=new L(B,this.loose));for(var ee=0;ee<this.set.length;ee++)if(ge(this.set[ee],B))return!0;return!1},e.satisfies=ye,e.maxSatisfying=function(B,ee,te){var $e=null,Se=null;try{var Ne=new we(ee,te)}catch{return null}return B.forEach(function(ke){Ne.test(ke)&&($e&&Se.compare(ke)!==-1||(Se=new L($e=ke,te)))}),$e},e.minSatisfying=function(B,ee,te){var $e=null,Se=null;try{var Ne=new we(ee,te)}catch{return null}return B.forEach(function(ke){Ne.test(ke)&&($e&&Se.compare(ke)!==1||(Se=new L($e=ke,te)))}),$e},e.validRange=function(B,ee){try{return new we(B,ee).range||"*"}catch{return null}},e.ltr=function(B,ee,te){return ve(B,ee,"<",te)},e.gtr=function(B,ee,te){return ve(B,ee,">",te)},e.outside=ve,e.prerelease=function(B,ee){var te=se(B,ee);return te&&te.prerelease.length?te.prerelease:null},e.intersects=function(B,ee,te){return B=new we(B,te),ee=new we(ee,te),B.intersects(ee)},e.coerce=function(B){if(B instanceof L)return B;if(typeof B!="string")return null;var ee=B.match(O[N]);return ee==null?null:se((ee[1]||"0")+"."+(ee[2]||"0")+"."+(ee[3]||"0"))}}).call(this,P(1))},function(Q,e){var P,I,y=Q.exports={};function k(){throw new Error("setTimeout has not been defined")}function C(){throw new Error("clearTimeout has not been defined")}function O(b){if(P===setTimeout)return setTimeout(b,0);if((P===k||!P)&&setTimeout)return P=setTimeout,setTimeout(b,0);try{return P(b,0)}catch{try{return P.call(null,b,0)}catch{return P.call(this,b,0)}}}(function(){try{P=typeof setTimeout=="function"?setTimeout:k}catch{P=k}try{I=typeof clearTimeout=="function"?clearTimeout:C}catch{I=C}})();var g,u=[],d=!1,f=-1;function m(){d&&g&&(d=!1,g.length?u=g.concat(u):f=-1,u.length&&a())}function a(){if(!d){var b=O(m);d=!0;for(var v=u.length;v;){for(g=u,u=[];++f<v;)g&&g[f].run();f=-1,v=u.length}g=null,d=!1,function(h){if(I===clearTimeout)return clearTimeout(h);if((I===C||!I)&&clearTimeout)return I=clearTimeout,clearTimeout(h);try{I(h)}catch{try{return I.call(null,h)}catch{return I.call(this,h)}}}(b)}}function $(b,v){this.fun=b,this.array=v}function S(){}y.nextTick=function(b){var v=new Array(arguments.length-1);if(arguments.length>1)for(var h=1;h<arguments.length;h++)v[h-1]=arguments[h];u.push(new $(b,v)),u.length!==1||d||O(a)},$.prototype.run=function(){this.fun.apply(null,this.array)},y.title="browser",y.browser=!0,y.env={},y.argv=[],y.version="",y.versions={},y.on=S,y.addListener=S,y.once=S,y.off=S,y.removeListener=S,y.removeAllListeners=S,y.emit=S,y.prependListener=S,y.prependOnceListener=S,y.listeners=function(b){return[]},y.binding=function(b){throw new Error("process.binding is not supported")},y.cwd=function(){return"/"},y.chdir=function(b){throw new Error("process.chdir is not supported")},y.umask=function(){return 0}}])}),define(le[81],he([0,1]),function(Q,e){"use strict";var P;Object.defineProperty(e,"__esModule",{value:!0}),e.$2s=void 0;class I{constructor(O,g,u){this.level=O,this.key=g,this.value=u,this.forward=[]}}const y=void 0;class k{constructor(O,g=2**16){this.comparator=O,this[P]="SkipList",this.d=0,this.f=0,this.c=Math.max(1,Math.log2(g)|0),this.e=new I(this.c,y,y)}get size(){return this.f}clear(){this.e=new I(this.c,y,y),this.f=0}has(O){return!!k.g(this,O,this.comparator)}get(O){return k.g(this,O,this.comparator)?.value}set(O,g){return k.h(this,O,g,this.comparator)&&(this.f+=1),this}delete(O){const g=k.k(this,O,this.comparator);return g&&(this.f-=1),g}forEach(O,g){let u=this.e.forward[0];for(;u;)O.call(g,u.value,u.key,this),u=u.forward[0]}[(P=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}*entries(){let O=this.e.forward[0];for(;O;)yield[O.key,O.value],O=O.forward[0]}*keys(){let O=this.e.forward[0];for(;O;)yield O.key,O=O.forward[0]}*values(){let O=this.e.forward[0];for(;O;)yield O.value,O=O.forward[0]}toString(){let O="[SkipList]:",g=this.e.forward[0];for(;g;)O+=`node(${g.key}, ${g.value}, lvl:${g.level})`,g=g.forward[0];return O}static g(O,g,u){let d=O.e;for(let f=O.d-1;f>=0;f--)for(;d.forward[f]&&u(d.forward[f].key,g)<0;)d=d.forward[f];if(d=d.forward[0],d&&u(d.key,g)===0)return d}static h(O,g,u,d){const f=[];let m=O.e;for(let a=O.d-1;a>=0;a--){for(;m.forward[a]&&d(m.forward[a].key,g)<0;)m=m.forward[a];f[a]=m}if(m=m.forward[0],m&&d(m.key,g)===0)return m.value=u,!1;{const a=k.j(O);if(a>O.d){for(let $=O.d;$<a;$++)f[$]=O.e;O.d=a}m=new I(a,g,u);for(let $=0;$<a;$++)m.forward[$]=f[$].forward[$],f[$].forward[$]=m;return!0}}static j(O,g=.5){let u=1;for(;Math.random()<g&&u<O.c;)u+=1;return u}static k(O,g,u){const d=[];let f=O.e;for(let m=O.d-1;m>=0;m--){for(;f.forward[m]&&u(f.forward[m].key,g)<0;)f=f.forward[m];d[m]=f}if(f=f.forward[0],!f||u(f.key,g)!==0)return!1;for(let m=0;m<O.d&&d[m].forward[m]===f;m++)d[m].forward[m]=f.forward[m];for(;O.d>0&&O.e.forward[O.d-1]===y;)O.d-=1;return!0}}e.$2s=k}),define(le[47],he([0,1,7,2]),function(Q,e,P,I){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$De=y,e.$Ee=k,e.$Fe=C,e.$Ge=O,e.$He=u,e.$Ie=d,e.$Je=f,e.$Ke=m,e.$Le=a,e.$Me=$,e.$Ne=S,e.$Oe=b,e.$Pe=v,e.$Qe=h,e.$Re=R;function y(w){const i=w;return i?typeof i.read=="function":!1}function k(w){const i=w;return i?[i.on,i.pause,i.resume,i.destroy].every(c=>typeof c=="function"):!1}function C(w){const i=w;return i?k(i.stream)&&Array.isArray(i.buffer)&&typeof i.ended=="boolean":!1}function O(w,i){return new g(w,i)}class g{constructor(i,c){this.e=i,this.f=c,this.a={flowing:!1,ended:!1,destroyed:!1},this.b={data:[],error:[]},this.c={data:[],error:[],end:[]},this.d=[]}pause(){this.a.destroyed||(this.a.flowing=!1)}resume(){this.a.destroyed||this.a.flowing||(this.a.flowing=!0,this.j(),this.k(),this.l())}write(i){if(!this.a.destroyed){if(this.a.flowing)this.g(i);else if(this.b.data.push(i),typeof this.f?.highWaterMark=="number"&&this.b.data.length>this.f.highWaterMark)return new Promise(c=>this.d.push(c))}}error(i){this.a.destroyed||(this.a.flowing?this.h(i):this.b.error.push(i))}end(i){this.a.destroyed||(typeof i<"u"&&this.write(i),this.a.flowing?(this.i(),this.destroy()):this.a.ended=!0)}g(i){this.c.data.slice(0).forEach(c=>c(i))}h(i){this.c.error.length===0?(0,P.$4)(i):this.c.error.slice(0).forEach(c=>c(i))}i(){this.c.end.slice(0).forEach(i=>i())}on(i,c){if(!this.a.destroyed)switch(i){case"data":this.c.data.push(c),this.resume();break;case"end":this.c.end.push(c),this.a.flowing&&this.l()&&this.destroy();break;case"error":this.c.error.push(c),this.a.flowing&&this.k();break}}removeListener(i,c){if(this.a.destroyed)return;let n;switch(i){case"data":n=this.c.data;break;case"end":n=this.c.end;break;case"error":n=this.c.error;break}if(n){const r=n.indexOf(c);r>=0&&n.splice(r,1)}}j(){if(this.b.data.length>0){const i=this.e(this.b.data);this.g(i),this.b.data.length=0;const c=[...this.d];this.d.length=0,c.forEach(n=>n())}}k(){if(this.c.error.length>0){for(const i of this.b.error)this.h(i);this.b.error.length=0}}l(){return this.a.ended?(this.i(),this.c.end.length>0):!1}destroy(){this.a.destroyed||(this.a.destroyed=!0,this.a.ended=!0,this.b.data.length=0,this.b.error.length=0,this.c.data.length=0,this.c.error.length=0,this.c.end.length=0,this.d.length=0)}}function u(w,i){const c=[];let n;for(;(n=w.read())!==null;)c.push(n);return i(c)}function d(w,i,c){const n=[];let r;for(;(r=w.read())!==null&&n.length<c;)n.push(r);return r===null&&n.length>0?i(n):{read:()=>{if(n.length>0)return n.shift();if(typeof r<"u"){const t=r;return r=void 0,t}return w.read()}}}function f(w,i){return new Promise((c,n)=>{const r=[];m(w,{onData:t=>{i&&r.push(t)},onError:t=>{i?n(t):c(void 0)},onEnd:()=>{c(i?i(r):void 0)}})})}function m(w,i,c){w.on("error",n=>{c?.isCancellationRequested||i.onError(n)}),w.on("end",()=>{c?.isCancellationRequested||i.onEnd()}),w.on("data",n=>{c?.isCancellationRequested||i.onData(n)})}function a(w,i){return new Promise((c,n)=>{const r=new I.$Yc,t=[],s=p=>{if(t.push(p),t.length>i)return r.dispose(),w.pause(),c({stream:w,buffer:t,ended:!1})},o=p=>(r.dispose(),n(p)),l=()=>(r.dispose(),c({stream:w,buffer:t,ended:!0}));r.add((0,I.$Xc)(()=>w.removeListener("error",o))),w.on("error",o),r.add((0,I.$Xc)(()=>w.removeListener("end",l))),w.on("end",l),r.add((0,I.$Xc)(()=>w.removeListener("data",s))),w.on("data",s)})}function $(w,i){const c=O(i);return c.end(w),c}function S(){const w=O(()=>{throw new Error("not supported")});return w.end(),w}function b(w){let i=!1;return{read:()=>i?null:(i=!0,w)}}function v(w,i,c){const n=O(c);return m(w,{onData:r=>n.write(i.data(r)),onError:r=>n.error(i.error?i.error(r):r),onEnd:()=>n.end()}),n}function h(w,i,c){let n=!1;return{read:()=>{const r=i.read();return n?r:(n=!0,r!==null?c([w,r]):w)}}}function R(w,i,c){let n=!1;const r=O(c);return m(i,{onData:t=>n?r.write(t):(n=!0,r.write(c([w,t]))),onError:t=>r.error(t),onEnd:()=>{n||(n=!0,r.write(w)),r.end()}}),r}});var We=this&&this.__createBinding||(Object.create?function(Q,e,P,I){I===void 0&&(I=P);var y=Object.getOwnPropertyDescriptor(e,P);(!y||("get"in y?!e.__esModule:y.writable||y.configurable))&&(y={enumerable:!0,get:function(){return e[P]}}),Object.defineProperty(Q,I,y)}:function(Q,e,P,I){I===void 0&&(I=P),Q[I]=e[P]}),xe=this&&this.__setModuleDefault||(Object.create?function(Q,e){Object.defineProperty(Q,"default",{enumerable:!0,value:e})}:function(Q,e){Q.default=e}),be=this&&this.__importStar||function(Q){if(Q&&Q.__esModule)return Q;var e={};if(Q!=null)for(var P in Q)P!=="default"&&Object.prototype.hasOwnProperty.call(Q,P)&&We(e,Q,P);return xe(e,Q),e};define(le[13],he([0,1,147,47]),function(Q,e,P,I){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$Se=void 0,e.$Te=u,e.$Ue=d,e.$Ve=f,e.$We=m,e.$Xe=a,e.$Ye=$,e.$Ze=S,e.$1e=b,e.$2e=v,e.$3e=h,e.$4e=R,e.$5e=w,e.$6e=i,e.$7e=c,e.$8e=n,e.$9e=r,e.$0e=t,e.$$e=s,e.$_e=o,e.$af=A,I=be(I);const y=typeof Buffer<"u",k=new P.$Y(()=>new Uint8Array(256));let C,O;class g{static alloc(N){return y?new g(Buffer.allocUnsafe(N)):new g(new Uint8Array(N))}static wrap(N){return y&&!Buffer.isBuffer(N)&&(N=Buffer.from(N.buffer,N.byteOffset,N.byteLength)),new g(N)}static fromString(N,D){return!(D?.dontUseNodeBuffer||!1)&&y?new g(Buffer.from(N)):(C||(C=new TextEncoder),new g(C.encode(N)))}static fromByteArray(N){const D=g.alloc(N.length);for(let j=0,x=N.length;j<x;j++)D.buffer[j]=N[j];return D}static concat(N,D){if(typeof D>"u"){D=0;for(let Y=0,ne=N.length;Y<ne;Y++)D+=N[Y].byteLength}const j=g.alloc(D);let x=0;for(let Y=0,ne=N.length;Y<ne;Y++){const ae=N[Y];j.set(ae,x),x+=ae.byteLength}return j}constructor(N){this.buffer=N,this.byteLength=this.buffer.byteLength}clone(){const N=g.alloc(this.byteLength);return N.set(this),N}toString(){return y?this.buffer.toString():(O||(O=new TextDecoder),O.decode(this.buffer))}slice(N,D){return new g(this.buffer.subarray(N,D))}set(N,D){if(N instanceof g)this.buffer.set(N.buffer,D);else if(N instanceof Uint8Array)this.buffer.set(N,D);else if(N instanceof ArrayBuffer)this.buffer.set(new Uint8Array(N),D);else if(ArrayBuffer.isView(N))this.buffer.set(new Uint8Array(N.buffer,N.byteOffset,N.byteLength),D);else throw new Error("Unknown argument 'array'")}readUInt32BE(N){return m(this.buffer,N)}writeUInt32BE(N,D){a(this.buffer,N,D)}readUInt32LE(N){return $(this.buffer,N)}writeUInt32LE(N,D){S(this.buffer,N,D)}readUInt8(N){return b(this.buffer,N)}writeUInt8(N,D){v(this.buffer,N,D)}indexOf(N,D=0){return u(this.buffer,N instanceof g?N.buffer:N,D)}}e.$Se=g;function u(T,N,D=0){const j=N.byteLength,x=T.byteLength;if(j===0)return 0;if(j===1)return T.indexOf(N[0]);if(j>x-D)return-1;const Y=k.value;Y.fill(N.length);for(let me=0;me<N.length;me++)Y[N[me]]=N.length-me-1;let ne=D+N.length-1,ae=ne,ue=-1;for(;ne<x;)if(T[ne]===N[ae]){if(ae===0){ue=ne;break}ne--,ae--}else ne+=Math.max(N.length-ae,Y[T[ne]]),ae=N.length-1;return ue}function d(T,N){return T[N+0]<<0>>>0|T[N+1]<<8>>>0}function f(T,N,D){T[D+0]=N&255,N=N>>>8,T[D+1]=N&255}function m(T,N){return T[N]*2**24+T[N+1]*2**16+T[N+2]*2**8+T[N+3]}function a(T,N,D){T[D+3]=N,N=N>>>8,T[D+2]=N,N=N>>>8,T[D+1]=N,N=N>>>8,T[D]=N}function $(T,N){return T[N+0]<<0>>>0|T[N+1]<<8>>>0|T[N+2]<<16>>>0|T[N+3]<<24>>>0}function S(T,N,D){T[D+0]=N&255,N=N>>>8,T[D+1]=N&255,N=N>>>8,T[D+2]=N&255,N=N>>>8,T[D+3]=N&255}function b(T,N){return T[N]}function v(T,N,D){T[D]=N}function h(T){return I.$He(T,N=>g.concat(N))}function R(T){return I.$Oe(T)}function w(T){return I.$Je(T,N=>g.concat(N))}async function i(T){return T.ended?g.concat(T.buffer):g.concat([...T.buffer,await w(T.stream)])}function c(T){return I.$Me(T,N=>g.concat(N))}function n(T){return I.$Pe(T,{data:N=>typeof N=="string"?g.fromString(N):g.wrap(N)},N=>g.concat(N))}function r(T){return I.$Ge(N=>g.concat(N),T)}function t(T,N){return I.$Qe(T,N,D=>g.concat(D))}function s(T,N){return I.$Re(T,N,D=>g.concat(D))}function o(T){let N=0,D=0,j=0;const x=new Uint8Array(Math.floor(T.length/4*3)),Y=ae=>{switch(D){case 3:x[j++]=N|ae,D=0;break;case 2:x[j++]=N|ae>>>2,N=ae<<6,D=3;break;case 1:x[j++]=N|ae>>>4,N=ae<<4,D=2;break;default:N=ae<<2,D=1}};for(let ae=0;ae<T.length;ae++){const ue=T.charCodeAt(ae);if(ue>=65&&ue<=90)Y(ue-65);else if(ue>=97&&ue<=122)Y(ue-97+26);else if(ue>=48&&ue<=57)Y(ue-48+52);else if(ue===43||ue===45)Y(62);else if(ue===47||ue===95)Y(63);else{if(ue===61)break;throw new SyntaxError(`Unexpected base64 character ${T[ae]}`)}}const ne=j;for(;D>0;)Y(0);return g.wrap(x).slice(0,ne)}const l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_";function A({buffer:T},N=!0,D=!1){const j=D?p:l;let x="";const Y=T.byteLength%3;let ne=0;for(;ne<T.byteLength-Y;ne+=3){const ae=T[ne+0],ue=T[ne+1],me=T[ne+2];x+=j[ae>>>2],x+=j[(ae<<4|ue>>>4)&63],x+=j[(ue<<2|me>>>6)&63],x+=j[me&63]}if(Y===1){const ae=T[ne+0];x+=j[ae>>>2],x+=j[ae<<4&63],N&&(x+="==")}else if(Y===2){const ae=T[ne+0],ue=T[ne+1];x+=j[ae>>>2],x+=j[(ae<<4|ue>>>4)&63],x+=j[ue<<2&63],N&&(x+="=")}return x}}),define(le[27],he([0,1,3]),function(Q,e,P){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$ko=I,e.$lo=y,e.$mo=C,e.$no=g,e.$oo=u,e.$po=d,e.$qo=f,e.$ro=m,e.$so=a,e.$to=$,e.$uo=S,e.$vo=b,e.$wo=v;function I(h){if(!h||typeof h!="object"||h instanceof RegExp)return h;const R=Array.isArray(h)?[]:{};return Object.entries(h).forEach(([w,i])=>{R[w]=i&&typeof i=="object"?I(i):i}),R}function y(h){if(!h||typeof h!="object")return h;const R=[h];for(;R.length>0;){const w=R.shift();Object.freeze(w);for(const i in w)if(k.call(w,i)){const c=w[i];typeof c=="object"&&!Object.isFrozen(c)&&!(0,P.$mg)(c)&&R.push(c)}}return h}const k=Object.prototype.hasOwnProperty;function C(h,R){return O(h,R,new Set)}function O(h,R,w){if((0,P.$sg)(h))return h;const i=R(h);if(typeof i<"u")return i;if(Array.isArray(h)){const c=[];for(const n of h)c.push(O(n,R,w));return c}if((0,P.$lg)(h)){if(w.has(h))throw new Error("Cannot clone recursive data-structure");w.add(h);const c={};for(const n in h)k.call(h,n)&&(c[n]=O(h[n],R,w));return w.delete(h),c}return h}function g(h,R,w=!0){return(0,P.$lg)(h)?((0,P.$lg)(R)&&Object.keys(R).forEach(i=>{i in h?w&&((0,P.$lg)(h[i])&&(0,P.$lg)(R[i])?g(h[i],R[i],w):h[i]=R[i]):h[i]=R[i]}),h):R}function u(h,R){if(h===R)return!0;if(h==null||R===null||R===void 0||typeof h!=typeof R||typeof h!="object"||Array.isArray(h)!==Array.isArray(R))return!1;let w,i;if(Array.isArray(h)){if(h.length!==R.length)return!1;for(w=0;w<h.length;w++)if(!u(h[w],R[w]))return!1}else{const c=[];for(i in h)c.push(i);c.sort();const n=[];for(i in R)n.push(i);if(n.sort(),!u(c,n))return!1;for(w=0;w<c.length;w++)if(!u(h[c[w]],R[c[w]]))return!1}return!0}function d(h){const R=new Set;return JSON.stringify(h,(w,i)=>{if((0,P.$lg)(i)||Array.isArray(i)){if(R.has(i))return"[Circular]";R.add(i)}return typeof i=="bigint"?`[BigInt ${i.toString()}]`:i})}function f(h,R){const w=Object.create(null);return!h||!R||Object.keys(R).forEach(c=>{const n=h[c],r=R[c];u(n,r)||(w[c]=r)}),w}function m(h,R){const w=R.toLowerCase(),i=Object.keys(h).find(c=>c.toLowerCase()===w);return i?h[i]:h[R]}function a(h,R){const w=Object.create(null);for(const[i,c]of Object.entries(h))R(i,c)&&(w[i]=c);return w}function $(h){let R=[];for(;Object.prototype!==h;)R=R.concat(Object.getOwnPropertyNames(h)),h=Object.getPrototypeOf(h);return R}function S(h){const R=[];for(const w of $(h))typeof h[w]=="function"&&R.push(w);return R}function b(h,R){const w=c=>function(){const n=Array.prototype.slice.call(arguments,0);return R(c,n)},i={};for(const c of h)i[c]=w(c);return i}function v(h,R){const w={};for(const[i,c]of Object.entries(h))w[i]=R(c,i);return w}}),define(le[43],he([0,1,31]),function(Q,e,P){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$Ej=e.$Cj=void 0,e.$yj=I,e.$zj=y,e.$Aj=k,e.$Bj=O,e.$Dj=S,P=be(P);function I(v){return y(v,0)}function y(v,h){switch(typeof v){case"object":return v===null?k(349,h):Array.isArray(v)?g(v,h):u(v,h);case"string":return O(v,h);case"boolean":return C(v,h);case"number":return k(v,h);case"undefined":return k(937,h);default:return k(617,h)}}function k(v,h){return(h<<5)-h+v|0}function C(v,h){return k(v?433:863,h)}function O(v,h){h=k(149417,h);for(let R=0,w=v.length;R<w;R++)h=k(v.charCodeAt(R),h);return h}function g(v,h){return h=k(104579,h),v.reduce((R,w)=>y(w,R),h)}function u(v,h){return h=k(181387,h),Object.keys(v).sort().reduce((R,w)=>(R=O(w,R),y(v[w],R)),h)}class d{constructor(){this.g=0}get value(){return this.g}hash(h){return this.g=y(h,this.g),this.g}}e.$Cj=d;var f;(function(v){v[v.BLOCK_SIZE=64]="BLOCK_SIZE",v[v.UNICODE_REPLACEMENT=65533]="UNICODE_REPLACEMENT"})(f||(f={}));function m(v,h,R=32){const w=R-h,i=~((1<<w)-1);return(v<<h|(i&v)>>>w)>>>0}function a(v,h=0,R=v.byteLength,w=0){for(let i=0;i<R;i++)v[h+i]=w}function $(v,h,R="0"){for(;v.length<h;)v=R+v;return v}function S(v,h=32){return v instanceof ArrayBuffer?Array.from(new Uint8Array(v)).map(R=>R.toString(16).padStart(2,"0")).join(""):$((v>>>0).toString(16),h/4)}class b{static{this.g=new DataView(new ArrayBuffer(320))}constructor(){this.h=1732584193,this.l=4023233417,this.m=2562383102,this.n=271733878,this.o=3285377520,this.p=new Uint8Array(f.BLOCK_SIZE+3),this.q=new DataView(this.p.buffer),this.r=0,this.t=0,this.u=0,this.v=!1}update(h){const R=h.length;if(R===0)return;const w=this.p;let i=this.r,c=this.u,n,r;for(c!==0?(n=c,r=-1,c=0):(n=h.charCodeAt(0),r=0);;){let t=n;if(P.$Of(n))if(r+1<R){const s=h.charCodeAt(r+1);P.$Pf(s)?(r++,t=P.$Qf(n,s)):t=f.UNICODE_REPLACEMENT}else{c=n;break}else P.$Pf(n)&&(t=f.UNICODE_REPLACEMENT);if(i=this.w(w,i,t),r++,r<R)n=h.charCodeAt(r);else break}this.r=i,this.u=c}w(h,R,w){return w<128?h[R++]=w:w<2048?(h[R++]=192|(w&1984)>>>6,h[R++]=128|(w&63)>>>0):w<65536?(h[R++]=224|(w&61440)>>>12,h[R++]=128|(w&4032)>>>6,h[R++]=128|(w&63)>>>0):(h[R++]=240|(w&1835008)>>>18,h[R++]=128|(w&258048)>>>12,h[R++]=128|(w&4032)>>>6,h[R++]=128|(w&63)>>>0),R>=f.BLOCK_SIZE&&(this.y(),R-=f.BLOCK_SIZE,this.t+=f.BLOCK_SIZE,h[0]=h[f.BLOCK_SIZE+0],h[1]=h[f.BLOCK_SIZE+1],h[2]=h[f.BLOCK_SIZE+2]),R}digest(){return this.v||(this.v=!0,this.u&&(this.u=0,this.r=this.w(this.p,this.r,f.UNICODE_REPLACEMENT)),this.t+=this.r,this.x()),S(this.h)+S(this.l)+S(this.m)+S(this.n)+S(this.o)}x(){this.p[this.r++]=128,a(this.p,this.r),this.r>56&&(this.y(),a(this.p));const h=8*this.t;this.q.setUint32(56,Math.floor(h/4294967296),!1),this.q.setUint32(60,h%4294967296,!1),this.y()}y(){const h=b.g,R=this.q;for(let l=0;l<64;l+=4)h.setUint32(l,R.getUint32(l,!1),!1);for(let l=64;l<320;l+=4)h.setUint32(l,m(h.getUint32(l-12,!1)^h.getUint32(l-32,!1)^h.getUint32(l-56,!1)^h.getUint32(l-64,!1),1),!1);let w=this.h,i=this.l,c=this.m,n=this.n,r=this.o,t,s,o;for(let l=0;l<80;l++)l<20?(t=i&c|~i&n,s=1518500249):l<40?(t=i^c^n,s=1859775393):l<60?(t=i&c|i&n|c&n,s=2400959708):(t=i^c^n,s=3395469782),o=m(w,5)+t+r+s+h.getUint32(l*4,!1)&4294967295,r=n,n=c,c=m(i,30),i=w,w=o;this.h=this.h+w&4294967295,this.l=this.l+i&4294967295,this.m=this.m+c&4294967295,this.n=this.n+n&4294967295,this.o=this.o+r&4294967295}}e.$Ej=b}),define(le[56],he([0,1,31]),function(Q,e,P){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),P=be(P);var I;(function(y){y[y.Ignore=0]="Ignore",y[y.Info=1]="Info",y[y.Warning=2]="Warning",y[y.Error=3]="Error"})(I||(I={})),function(y){const k="error",C="warning",O="warn",g="info",u="ignore";function d(m){return m?P.$Kf(k,m)?y.Error:P.$Kf(C,m)||P.$Kf(O,m)?y.Warning:P.$Kf(g,m)?y.Info:y.Ignore:y.Ignore}y.fromValue=d;function f(m){switch(m){case y.Error:return k;case y.Warning:return C;case y.Info:return g;default:return u}}y.toString=f}(I||(I={})),e.default=I}),define(le[28],he([0,1]),function(Q,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$7g=void 0,e.$6g=I;const P=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function I(y){return P.test(y)}e.$7g=function(){if(typeof crypto=="object"&&typeof crypto.randomUUID=="function")return crypto.randomUUID.bind(crypto);let y;typeof crypto=="object"&&typeof crypto.getRandomValues=="function"?y=crypto.getRandomValues.bind(crypto):y=function(O){for(let g=0;g<O.length;g++)O[g]=Math.floor(Math.random()*256);return O};const k=new Uint8Array(16),C=[];for(let O=0;O<256;O++)C.push(O.toString(16).padStart(2,"0"));return function(){y(k),k[6]=k[6]&15|64,k[8]=k[8]&63|128;let g=0,u="";return u+=C[k[g++]],u+=C[k[g++]],u+=C[k[g++]],u+=C[k[g++]],u+="-",u+=C[k[g++]],u+=C[k[g++]],u+="-",u+=C[k[g++]],u+=C[k[g++]],u+="-",u+=C[k[g++]],u+=C[k[g++]],u+="-",u+=C[k[g++]],u+=C[k[g++]],u+=C[k[g++]],u+=C[k[g++]],u+=C[k[g++]],u+=C[k[g++]],u}}()}),define(le[82],he([0,1,35]),function(Q,e,P){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$Xn=k;const I=new Set(["00:00:00:00:00:00","ff:ff:ff:ff:ff:ff","ac:de:48:00:11:22"]);function y(C){const O=C.replace(/\-/g,":").toLowerCase();return!I.has(O)}function k(){const C=(0,P.networkInterfaces)();for(const O in C){const g=C[O];if(g){for(const{mac:u}of g)if(y(u))return u}}throw new Error("Unable to retrieve mac address (unexpected format)")}}),define(le[83],he([0,1]),function(Q,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$dp=void 0,e.$cp=I;const P="Offline";function I(k){return k instanceof y?!0:k instanceof Error&&k.name===P&&k.message===P}class y extends Error{constructor(){super(P),this.name=this.message}}e.$dp=y}),define(le[84],he([0,1,4]),function(Q,e,P){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$7m=u,e.$8m=d,e.$9m=f,e.$0m=m;const I=60,y=I*60,k=y*24,C=k*7,O=k*30,g=k*365;function u(a,$,S,b){typeof a!="number"&&(a=a.getTime());const v=Math.round((new Date().getTime()-a)/1e3);if(v<-30)return(0,P.localize)(42,null,u(new Date().getTime()+v*1e3,!1));if(!b&&v<30)return(0,P.localize)(43,null);let h;return v<I?(h=v,$?h===1?S?(0,P.localize)(44,null,h):(0,P.localize)(45,null,h):S?(0,P.localize)(46,null,h):(0,P.localize)(47,null,h):h===1?S?(0,P.localize)(48,null,h):(0,P.localize)(49,null,h):S?(0,P.localize)(50,null,h):(0,P.localize)(51,null,h)):v<y?(h=Math.floor(v/I),$?h===1?S?(0,P.localize)(52,null,h):(0,P.localize)(53,null,h):S?(0,P.localize)(54,null,h):(0,P.localize)(55,null,h):h===1?S?(0,P.localize)(56,null,h):(0,P.localize)(57,null,h):S?(0,P.localize)(58,null,h):(0,P.localize)(59,null,h)):v<k?(h=Math.floor(v/y),$?h===1?S?(0,P.localize)(60,null,h):(0,P.localize)(61,null,h):S?(0,P.localize)(62,null,h):(0,P.localize)(63,null,h):h===1?S?(0,P.localize)(64,null,h):(0,P.localize)(65,null,h):S?(0,P.localize)(66,null,h):(0,P.localize)(67,null,h)):v<C?(h=Math.floor(v/k),$?h===1?(0,P.localize)(68,null,h):(0,P.localize)(69,null,h):h===1?(0,P.localize)(70,null,h):(0,P.localize)(71,null,h)):v<O?(h=Math.floor(v/C),$?h===1?S?(0,P.localize)(72,null,h):(0,P.localize)(73,null,h):S?(0,P.localize)(74,null,h):(0,P.localize)(75,null,h):h===1?S?(0,P.localize)(76,null,h):(0,P.localize)(77,null,h):S?(0,P.localize)(78,null,h):(0,P.localize)(79,null,h)):v<g?(h=Math.floor(v/O),$?h===1?S?(0,P.localize)(80,null,h):(0,P.localize)(81,null,h):S?(0,P.localize)(82,null,h):(0,P.localize)(83,null,h):h===1?S?(0,P.localize)(84,null,h):(0,P.localize)(85,null,h):S?(0,P.localize)(86,null,h):(0,P.localize)(87,null,h)):(h=Math.floor(v/g),$?h===1?S?(0,P.localize)(88,null,h):(0,P.localize)(89,null,h):S?(0,P.localize)(90,null,h):(0,P.localize)(91,null,h):h===1?S?(0,P.localize)(92,null,h):(0,P.localize)(93,null,h):S?(0,P.localize)(94,null,h):(0,P.localize)(95,null,h))}function d(a,$,S){typeof a!="number"&&(a=a.getTime());const b=new Date;b.setHours(0,0,0,0);const v=new Date(b.getTime());return v.setDate(v.getDate()-1),a>b.getTime()?(0,P.localize)(96,null):a>v.getTime()?(0,P.localize)(97,null):u(a,$,S)}function f(a,$){const S=Math.abs(a/1e3);return S<1?$?(0,P.localize)(98,null,a):(0,P.localize)(99,null,a):S<I?$?(0,P.localize)(100,null,Math.round(a)/1e3):(0,P.localize)(101,null,Math.round(a)/1e3):S<y?$?(0,P.localize)(102,null,Math.round(a/(1e3*I))):(0,P.localize)(103,null,Math.round(a/(1e3*I))):S<k?$?(0,P.localize)(104,null,Math.round(a/(1e3*y))):(0,P.localize)(105,null,Math.round(a/(1e3*y))):(0,P.localize)(106,null,Math.round(a/(1e3*k)))}function m(a){return a.getFullYear()+"-"+String(a.getMonth()+1).padStart(2,"0")+"-"+String(a.getDate()).padStart(2,"0")+"T"+String(a.getHours()).padStart(2,"0")+":"+String(a.getMinutes()).padStart(2,"0")+":"+String(a.getSeconds()).padStart(2,"0")+"."+(a.getMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"}}),define(le[38],he([0,1,19,3,4]),function(Q,e,P,I,y){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$vj=g,e.$wj=u,e.$xj=d,P=be(P),I=be(I),y=be(y);function k(f,m){return m&&(f.stack||f.stacktrace)?y.localize(107,null,O(f),C(f.stack)||C(f.stacktrace)):O(f)}function C(f){return Array.isArray(f)?f.join(`
`):f}function O(f){return f.code==="ERR_UNC_HOST_NOT_ALLOWED"?`${f.message}. Please update the 'security.allowedUNCHosts' setting if you want to allow this host.`:typeof f.code=="string"&&typeof f.errno=="number"&&typeof f.syscall=="string"?y.localize(108,null,f.message):f.message||y.localize(109,null)}function g(f=null,m=!1){if(!f)return y.localize(110,null);if(Array.isArray(f)){const a=P.$Lb(f),$=g(a[0],m);return a.length>1?y.localize(111,null,$,a.length):$}if(I.$jg(f))return f;if(f.detail){const a=f.detail;if(a.error)return k(a.error,m);if(a.exception)return k(a.exception,m)}return f.stack?k(f,m):f.message?f.message:y.localize(112,null)}function u(f){const m=f;return m instanceof Error&&Array.isArray(m.actions)}function d(f,m){let a;return typeof f=="string"?a=new Error(f):a=f,a.actions=m,a}}),define(le[85],he([0,1,4,34]),function(Q,e,P,I){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$Tq=y;function y(k){switch(k){case I.ParseErrorCode.InvalidSymbol:return(0,P.localize)(113,null);case I.ParseErrorCode.InvalidNumberFormat:return(0,P.localize)(114,null);case I.ParseErrorCode.PropertyNameExpected:return(0,P.localize)(115,null);case I.ParseErrorCode.ValueExpected:return(0,P.localize)(116,null);case I.ParseErrorCode.ColonExpected:return(0,P.localize)(117,null);case I.ParseErrorCode.CommaExpected:return(0,P.localize)(118,null);case I.ParseErrorCode.CloseBraceExpected:return(0,P.localize)(119,null);case I.ParseErrorCode.CloseBracketExpected:return(0,P.localize)(120,null);case I.ParseErrorCode.EndOfFileExpected:return(0,P.localize)(121,null);default:return""}}}),define(le[57],he([0,1,11]),function(Q,e,P){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TerminateResponseCode=e.Source=void 0,e.$qm=k,e.$rm=C;var I;(function(O){O[O.stdout=0]="stdout",O[O.stderr=1]="stderr"})(I||(e.Source=I={}));var y;(function(O){O[O.Success=0]="Success",O[O.Unknown=1]="Unknown",O[O.AccessDenied=2]="AccessDenied",O[O.ProcessNotFound=3]="ProcessNotFound"})(y||(e.TerminateResponseCode=y={}));function k(O,...g){const u=g.reduce((m,a)=>(m[a]=!0,m),{}),d=[/^ELECTRON_.+$/,/^VSCODE_(?!(PORTABLE|SHELL_LOGIN|ENV_REPLACE|ENV_APPEND|ENV_PREPEND)).+$/,/^SNAP(|_.*)$/,/^GDK_PIXBUF_.+$/];Object.keys(O).filter(m=>!u[m]).forEach(m=>{for(let a=0;a<d.length;a++)if(m.search(d[a])!==-1){delete O[m];break}})}function C(O){O&&(delete O.DEBUG,P.$n&&delete O.LD_PRELOAD)}}),define(le[86],he([0,1,12]),function(Q,e,P){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$lr=I,e.$mr=y,e.$nr=k,e.log=O;function I(u){const d=u;return d&&typeof d.type=="string"&&typeof d.severity=="string"}function y(u){const d=[];let f;try{const m=JSON.parse(u.arguments),a=m[m.length-1];a&&a.__$stack&&(m.pop(),f=a.__$stack),d.push(...m)}catch{d.push("Unable to log remote console arguments",u.arguments)}return{args:d,stack:f}}function k(u){if(typeof u!="string")return k(y(u).stack);const d=u;if(d){const f=C(d),m=/at [^\/]*((?:(?:[a-zA-Z]+:)|(?:[\/])|(?:\\\\))(?:.+)):(\d+):(\d+)/.exec(f||"");if(m&&m.length===4)return{uri:P.URI.file(m[1]),line:Number(m[2]),column:Number(m[3])}}}function C(u){if(!u)return u;const d=u.indexOf(`
`);return d===-1?u:u.substring(0,d)}function O(u,d){const{args:f,stack:m}=y(u),a=typeof f[0]=="string"&&f.length===1;let $=C(m);$&&($=`(${$.trim()})`);let S=[];if(typeof f[0]=="string"?$&&a?S=[`%c[${d}] %c${f[0]} %c${$}`,g("blue"),g(""),g("grey")]:S=[`%c[${d}] %c${f[0]}`,g("blue"),g(""),...f.slice(1)]:S=[`%c[${d}]%`,g("blue"),...f],$&&!a&&S.push($),typeof console[u.severity]!="function")throw new Error("Unknown console method");console[u.severity].apply(console,S)}function g(u){return`color: ${u}`}}),define(le[48],he([0,1,13,12,148]),function(Q,e,P,I,y){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$fi=k,e.$gi=C,e.$hi=g;function k(u){return JSON.stringify(u,O)}function C(u){let d=JSON.parse(u);return d=g(d),d}function O(u,d){return d instanceof RegExp?{$mid:y.MarshalledId.Regexp,source:d.source,flags:d.flags}:d}function g(u,d=0){if(!u||d>200)return u;if(typeof u=="object"){switch(u.$mid){case y.MarshalledId.Uri:return I.URI.revive(u);case y.MarshalledId.Regexp:return new RegExp(u.source,u.flags);case y.MarshalledId.Date:return new Date(u.source)}if(u instanceof P.$Se||u instanceof Uint8Array)return u;if(Array.isArray(u))for(let f=0;f<u.length;++f)u[f]=g(u[f],d+1);else for(const f in u)Object.hasOwnProperty.call(u,f)&&(u[f]=g(u[f],d+1))}return u}}),define(le[58],he([0,1,75,14,11,3,12]),function(Q,e,P,I,y,k,C){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$zq=d,e.$Aq=f,y=be(y);class O{constructor(a,$,S){this.id=a,this.dependencies=$,this.callback=S}}class g{static{this.INSTANCE=new g}constructor(){this.a=typeof self=="object"&&self.constructor&&self.constructor.name==="DedicatedWorkerGlobalScope",this.b=typeof document=="object",this.c=[],this.d=!1}g(){this.d||(this.d=!0,globalThis.define=(a,$,S)=>{typeof a!="string"&&(S=$,$=a,a=null),(typeof $!="object"||!Array.isArray($))&&(S=$,$=null),this.c.push(new O(a,$,S))},globalThis.define.amd=!0,this.b?this.f=globalThis._VSCODE_WEB_PACKAGE_TTP??window.trustedTypes?.createPolicy("amdLoader",{createScriptURL(a){if(a.startsWith(window.location.origin)||a.startsWith(`${I.Schemas.vscodeFileResource}://${I.$4g}`))return a;throw new Error(`[trusted_script_src] Invalid script url: ${a}`)}}):this.a&&(this.f=globalThis._VSCODE_WEB_PACKAGE_TTP??globalThis.trustedTypes?.createPolicy("amdLoader",{createScriptURL(a){return a}})))}async load(a){this.g();const $=await(this.a?this.i(a):this.b?this.h(a):this.j(a));if(!$){console.warn(`Did not receive a define call from script ${a}`);return}const S={},b=[],v=[];if(Array.isArray($.dependencies))for(const h of $.dependencies)h==="exports"?b.push(S):v.push(h);if(v.length>0)throw new Error(`Cannot resolve dependencies for script ${a}. The dependencies are: ${v.join(", ")}`);return typeof $.callback=="function"?$.callback(...b)??S:$.callback}h(a){return new Promise(($,S)=>{const b=document.createElement("script");b.setAttribute("async","async"),b.setAttribute("type","text/javascript");const v=()=>{b.removeEventListener("load",h),b.removeEventListener("error",R)},h=w=>{v(),$(this.c.pop())},R=w=>{v(),S(w)};b.addEventListener("load",h),b.addEventListener("error",R),this.f&&(a=this.f.createScriptURL(a)),b.setAttribute("src",a),window.document.getElementsByTagName("head")[0].appendChild(b)})}async i(a){return this.f&&(a=this.f.createScriptURL(a)),P.$V?await new Promise(($,S)=>{Q([a],$,S)}).then(be):importScripts(a),this.c.pop()}async j(a){try{const $=globalThis._VSCODE_NODE_MODULES.fs,S=globalThis._VSCODE_NODE_MODULES.vm,b=globalThis._VSCODE_NODE_MODULES.module,v=C.URI.parse(a).fsPath,h=$.readFileSync(v).toString(),R=b.wrap(h.replace(/^#!.*/,""));return new S.Script(R).runInThisContext().apply(),this.c.pop()}catch($){throw $}}}const u=new Map;async function d(m,a,$){if(P.$V){$===void 0&&($=!!(globalThis._VSCODE_PRODUCT_JSON??globalThis.vscode?.context?.configuration()?.product)?.commit);const S=a?`${m}/${a}`:m;if(u.has(S))return u.get(S);let b;if(/^\w[\w\d+.-]*:\/\//.test(S))b=S;else{const w=`${P.$W&&$&&!y.$r?I.$2g:I.$1g}/${S}`;b=I.$5g.asBrowserUri(w).toString(!0)}const v=g.INSTANCE.load(b);return u.set(S,v),v}else return await new Promise((S,b)=>{Q([m],S,b)}).then(be)}function f(m,a){(0,k.$tg)(P.$V);const S=!!(globalThis._VSCODE_PRODUCT_JSON??globalThis.vscode?.context?.configuration()?.product)?.commit,b=P.$W&&S&&!y.$r,v=`${m}/${a}`,R=`${b?I.$2g:I.$1g}/${v}`;return I.$5g.asBrowserUri(R).toString(!0)}}),define(le[87],he([0,1,35,49,28,82,11]),function(Q,e,P,I,y,k,C){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$Yn=void 0,e.$Zn=g,e.$1n=f,e.$2n=m,y=be(y),e.$Yn=new class{c(a){return this.a||(this.a=I.$Qi.forStrings(),this.a.set("00-50-56",!0),this.a.set("00-0C-29",!0),this.a.set("00-05-69",!0),this.a.set("00-03-FF",!0),this.a.set("00-1C-42",!0),this.a.set("00-16-3E",!0),this.a.set("08-00-27",!0),this.a.set("00:50:56",!0),this.a.set("00:0C:29",!0),this.a.set("00:05:69",!0),this.a.set("00:03:FF",!0),this.a.set("00:1C:42",!0),this.a.set("00:16:3E",!0),this.a.set("08:00:27",!0)),!!this.a.findSubstr(a)}value(){if(this.b===void 0){let a=0,$=0;const S=(0,P.networkInterfaces)();for(const b in S){const v=S[b];if(v)for(const{mac:h,internal:R}of v)R||($+=1,this.c(h.toUpperCase())&&(a+=1))}this.b=$>0?a/$:0}return this.b}};let O;async function g(a){return O||(O=(async()=>await u(a)||y.$7g())()),O}async function u(a){try{const $=await new Promise((b,v)=>{Q(["crypto"],b,v)}).then(be),S=(0,k.$Xn)();return $.createHash("sha256").update(S,"utf8").digest("hex")}catch($){a($);return}}const d="Software\\Microsoft\\SQMClient";async function f(a){if(C.$l){const $=await new Promise((S,b)=>{Q(["@vscode/windows-registry"],S,b)}).then(be);try{return $.GetStringRegKey("HKEY_LOCAL_MACHINE",d,"MachineId")||""}catch(S){return a(S),""}}return""}async function m(a){try{return await(await new Promise((b,v)=>{Q(["@vscode/deviceid"],b,v)}).then(be)).getDeviceId()}catch($){return a($),""}}}),define(le[88],he([0,1,35,15,29]),function(Q,e,P,I,y){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$Bm=h,e.$Cm=R,P=be(P),I=be(I),y=be(y);const k=/^\d+$/,C=/^Microsoft.PowerShell_.*/,O=/^Microsoft.PowerShellPreview_.*/;var g;(function(w){w[w.x64=0]="x64",w[w.x86=1]="x86",w[w.ARM=2]="ARM"})(g||(g={}));let u;switch(process.arch){case"ia32":u=g.x86;break;case"arm":case"arm64":u=g.ARM;break;default:u=g.x64;break}let d;process.env.PROCESSOR_ARCHITEW6432?d=process.env.PROCESSOR_ARCHITEW6432==="ARM64"?g.ARM:g.x64:process.env.PROCESSOR_ARCHITECTURE==="ARM64"?d=g.ARM:process.env.PROCESSOR_ARCHITECTURE==="X86"?d=g.x86:d=g.x64;class f{constructor(i,c,n){this.exePath=i,this.displayName=c,this.a=n}async exists(){return this.a===void 0&&(this.a=await y.SymlinkSupport.existsFile(this.exePath)),this.a}}function m({useAlternateBitness:w=!1}={}){return w?u===g.x64?process.env["ProgramFiles(x86)"]||null:d===g.x64&&process.env.ProgramW6432||null:process.env.ProgramFiles||null}async function a({useAlternateBitness:w=!1,findPreview:i=!1}={}){const c=m({useAlternateBitness:w});if(!c)return null;const n=I.$oc(c,"PowerShell");if(!await y.SymlinkSupport.existsDirectory(n))return null;let r=-1,t=null;for(const l of await y.Promises.readdir(n)){let p=-1;if(i){const T=l.indexOf("-");if(T<0)continue;const N=l.substring(0,T);if(!k.test(N)||l.substring(T+1)!=="preview")continue;p=parseInt(N,10)}else{if(!k.test(l))continue;p=parseInt(l,10)}if(p<=r)continue;const A=I.$oc(n,l,"pwsh.exe");await y.SymlinkSupport.existsFile(A)&&(t=A,r=p)}if(!t)return null;const s=c.includes("x86")?" (x86)":"",o=i?" Preview":"";return new f(t,`PowerShell${o}${s}`,!0)}async function $({findPreview:w}={}){if(!process.env.LOCALAPPDATA)return null;const i=I.$oc(process.env.LOCALAPPDATA,"Microsoft","WindowsApps");if(!await y.SymlinkSupport.existsDirectory(i))return null;const{pwshMsixDirRegex:c,pwshMsixName:n}=w?{pwshMsixDirRegex:O,pwshMsixName:"PowerShell Preview (Store)"}:{pwshMsixDirRegex:C,pwshMsixName:"PowerShell (Store)"};for(const r of await y.Promises.readdir(i))if(c.test(r)){const t=I.$oc(i,r,"pwsh.exe");return new f(t,n)}return null}function S(){const w=I.$oc(P.homedir(),".dotnet","tools","pwsh.exe");return new f(w,".NET Core PowerShell Global Tool")}function b(){const w=I.$oc(process.env.windir,u===g.x86&&d!==g.x86?"SysNative":"System32","WindowsPowerShell","v1.0","powershell.exe");return new f(w,"Windows PowerShell",!0)}async function*v(){let w=await a();w&&(yield w),w=await a({useAlternateBitness:!0}),w&&(yield w),w=await $(),w&&(yield w),w=S(),w&&(yield w),w=await a({findPreview:!0}),w&&(yield w),w=await $({findPreview:!0}),w&&(yield w),w=await a({useAlternateBitness:!0,findPreview:!0}),w&&(yield w),w=b(),w&&(yield w)}async function*h(){for await(const w of v())await w.exists()&&(yield w)}async function R(){for await(const w of h())return w;return null}}),define(le[59],he([0,1,32,15,11,36,57,3,29]),function(Q,e,P,I,y,k,C,O,g){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.win32=e.TerminateResponseCode=e.Source=void 0,e.$Dm=u,e.$Em=d,I=be(I),y=be(y),k=be(k),O=be(O),g=be(g),Object.defineProperty(e,"Source",{enumerable:!0,get:function(){return C.Source}}),Object.defineProperty(e,"TerminateResponseCode",{enumerable:!0,get:function(){return C.TerminateResponseCode}});function u(m=k.env){return m.comspec||"cmd.exe"}function d(m){let a=[],$=!1;const S=function(b){if($){a.push(b);return}(!m.send(b,h=>{if(h&&console.error(h),$=!1,a.length>0){const R=a.slice(0);a=[],R.forEach(w=>S(w))}})||y.$l)&&($=!0)};return{send:S}}var f;(function(m){async function a($,S,b){if(I.$nc($))return $;if(S===void 0&&(S=k.cwd()),I.$rc($)!=="."||(b===void 0&&O.$jg(k.env.PATH)&&(b=k.env.PATH.split(I.$yc)),b===void 0||b.length===0))return I.$oc(S,$);async function h(R){if(await g.Promises.exists(R)){let w;try{w=await P.promises.stat(R)}catch(i){i.message.startsWith("EACCES")&&(w=await P.promises.lstat(R))}return w?!w.isDirectory():!1}return!1}for(const R of b){let w;if(I.$nc(R)?w=I.$oc(R,$):w=I.$oc(S,R,$),await h(w))return w;let i=w+".com";if(await h(i)||(i=w+".exe",await h(i)))return i}return I.$oc(S,$)}m.findExecutable=a})(f||(e.win32=f={}))}),define(le[89],he([0,1,35,11,88,59]),function(Q,e,P,I,y,k){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$Fm=C,I=be(I),k=be(k);async function C(f,m){return f===I.OperatingSystem.Windows?I.$l?d():k.$Dm(m):g(f,m)}let O=null;function g(f,m){if(I.$n&&f===I.OperatingSystem.Macintosh||I.$m&&f===I.OperatingSystem.Linux)return"/bin/bash";if(!O){let a;if(I.$l)a="/bin/bash";else{if(a=m.SHELL,!a)try{a=(0,P.userInfo)().shell}catch{}a||(a="sh"),a==="/bin/false"&&(a="/bin/bash")}O=a}return O}let u=null;async function d(){return u||(u=(await(0,y.$Cm)()).exePath),u}}),define(le[50],he([0,1,32,8,15,3,29,4]),function(Q,e,P,I,y,k,C,O){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$Jq=e.$Iq=void 0,e.zip=b,e.$Lq=v,e.$Mq=R,y=be(y),O=be(O),e.$Iq="end of central directory record signature not found";const g=new RegExp(e.$Iq);class u extends Error{constructor(i,c){let n=c.message;switch(i){case"CorruptZip":n=`Corrupt ZIP: ${n}`;break}super(n),this.type=i,this.cause=c}}e.$Jq=u;function d(w){const i=w.externalFileAttributes>>16||33188;return[448,56,7].map(c=>i&c).reduce((c,n)=>c+n,i&61440)}function f(w){if(w instanceof u)return w;let i;return g.test(w.message)&&(i="CorruptZip"),new u(i,w)}function m(w,i,c,n,r,t){const s=y.$rc(i),o=y.$oc(n,s);if(!o.startsWith(n))return Promise.reject(new Error(O.localize(142,null,i)));const l=y.$oc(n,i);let p;return t.onCancellationRequested(()=>{p?.destroy()}),Promise.resolve(P.promises.mkdir(o,{recursive:!0})).then(()=>new Promise((A,T)=>{if(!t.isCancellationRequested)try{p=(0,P.createWriteStream)(l,{mode:c}),p.once("close",()=>A()),p.once("error",T),w.once("error",T),w.pipe(p)}catch(N){T(N)}}))}function a(w,i,c,n){let r=(0,I.$xh)(()=>Promise.resolve()),t=0;const s=n.onCancellationRequested(()=>{r.cancel(),w.close()});return new Promise((o,l)=>{const p=new I.$Fh,A=T=>{T.isCancellationRequested||(t++,w.readEntry())};w.once("error",l),w.once("close",()=>r.then(()=>{n.isCancellationRequested||w.entryCount===t?o():l(new u("Incomplete",new Error(O.localize(143,null,t,w.entryCount))))},l)),w.readEntry(),w.on("entry",T=>{if(n.isCancellationRequested)return;if(!c.sourcePathRegex.test(T.fileName)){A(n);return}const N=T.fileName.replace(c.sourcePathRegex,"");if(/\/$/.test(N)){const x=y.$oc(i,N);r=(0,I.$xh)(Y=>P.promises.mkdir(x,{recursive:!0}).then(()=>A(Y)).then(void 0,l));return}const D=S(w,T),j=d(T);r=(0,I.$xh)(x=>p.queue(()=>D.then(Y=>m(Y,N,j,i,c,x).then(()=>A(x)))).then(null,l))})}).finally(()=>s.dispose())}async function $(w,i=!1){const{open:c}=await new Promise((n,r)=>{Q(["yauzl"],n,r)}).then(be);return new Promise((n,r)=>{c(w,i?{lazyEntries:!0}:void 0,(t,s)=>{t?r(f(t)):n((0,k.$ug)(s))})})}function S(w,i){return new Promise((c,n)=>{w.openReadStream(i,(r,t)=>{r?n(f(r)):c((0,k.$ug)(t))})})}async function b(w,i){const{ZipFile:c}=await new Promise((n,r)=>{Q(["yazl"],n,r)}).then(be);return new Promise((n,r)=>{const t=new c;i.forEach(o=>{o.contents?t.addBuffer(typeof o.contents=="string"?Buffer.from(o.contents,"utf8"):o.contents,o.path):o.localPath&&t.addFile(o.localPath,o.path)}),t.end();const s=(0,P.createWriteStream)(w);t.outputStream.pipe(s),t.outputStream.once("error",r),s.once("error",r),s.once("finish",()=>n(w))})}function v(w,i,c={},n){const r=new RegExp(c.sourcePath?`^${c.sourcePath}`:"");let t=$(w,!0);return c.overwrite&&(t=t.then(s=>C.Promises.rm(i).then(()=>s))),t.then(s=>a(s,i,{sourcePathRegex:r},n))}function h(w,i){return $(w).then(c=>new Promise((n,r)=>{c.on("entry",t=>{t.fileName===i&&S(c,t).then(s=>n(s),s=>r(s))}),c.once("close",()=>r(new Error(O.localize(144,null,i))))}))}function R(w,i){return h(w,i).then(c=>new Promise((n,r)=>{const t=[];c.once("error",r),c.on("data",s=>t.push(s)),c.on("end",()=>n(Buffer.concat(t)))}))}});var Ee=this&&this.__decorate||function(Q,e,P,I){var y=arguments.length,k=y<3?e:I===null?I=Object.getOwnPropertyDescriptor(e,P):I,C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(Q,e,P,I);else for(var O=Q.length-1;O>=0;O--)(C=Q[O])&&(k=(y<3?C(k):y>3?C(e,P,k):C(e,P))||k);return y>3&&k&&Object.defineProperty(e,P,k),k};define(le[60],he([0,1,19,8,13,21,55,7,5,2,48,31,3]),function(Q,e,P,I,y,k,C,O,g,u,d,f,m){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$ti=e.ProxyChannel=e.$si=e.$pi=e.$oi=e.$ni=e.RequestInitiator=e.$mi=e.$ji=e.$ii=void 0,e.$ki=o,e.$li=l,e.$qi=j,e.$ri=x,f=be(f);var a;(function(M){M[M.Promise=100]="Promise",M[M.PromiseCancel=101]="PromiseCancel",M[M.EventListen=102]="EventListen",M[M.EventDispose=103]="EventDispose"})(a||(a={}));function $(M){switch(M){case a.Promise:return"req";case a.PromiseCancel:return"cancel";case a.EventListen:return"subscribe";case a.EventDispose:return"unsubscribe"}}var S;(function(M){M[M.Initialize=200]="Initialize",M[M.PromiseSuccess=201]="PromiseSuccess",M[M.PromiseError=202]="PromiseError",M[M.PromiseErrorObj=203]="PromiseErrorObj",M[M.EventFire=204]="EventFire"})(S||(S={}));function b(M){switch(M){case S.Initialize:return"init";case S.PromiseSuccess:return"reply:";case S.PromiseError:case S.PromiseErrorObj:return"replyErr:";case S.EventFire:return"event:"}}var v;(function(M){M[M.Uninitialized=0]="Uninitialized",M[M.Idle=1]="Idle"})(v||(v={}));function h(M){let U=0;for(let H=0;;H+=7){const K=M.read(1);if(U|=(K.buffer[0]&127)<<H,!(K.buffer[0]&128))return U}}const R=r(0);function w(M,U){if(U===0){M.write(R);return}let H=0;for(let ie=U;ie!==0;ie=ie>>>7)H++;const K=y.$Se.alloc(H);for(let ie=0;U!==0;ie++)K.buffer[ie]=U&127,U=U>>>7,U>0&&(K.buffer[ie]|=128);M.write(K)}class i{constructor(U){this.b=U,this.a=0}read(U){const H=this.b.slice(this.a,this.a+U);return this.a+=H.byteLength,H}}e.$ii=i;class c{constructor(){this.a=[]}get buffer(){return y.$Se.concat(this.a)}write(U){this.a.push(U)}}e.$ji=c;var n;(function(M){M[M.Undefined=0]="Undefined",M[M.String=1]="String",M[M.Buffer=2]="Buffer",M[M.VSBuffer=3]="VSBuffer",M[M.Array=4]="Array",M[M.Object=5]="Object",M[M.Int=6]="Int"})(n||(n={}));function r(M){const U=y.$Se.alloc(1);return U.writeUInt8(M,0),U}const t={Undefined:r(n.Undefined),String:r(n.String),Buffer:r(n.Buffer),VSBuffer:r(n.VSBuffer),Array:r(n.Array),Object:r(n.Object),Uint:r(n.Int)},s=typeof Buffer<"u";function o(M,U){if(typeof U>"u")M.write(t.Undefined);else if(typeof U=="string"){const H=y.$Se.fromString(U);M.write(t.String),w(M,H.byteLength),M.write(H)}else if(s&&Buffer.isBuffer(U)){const H=y.$Se.wrap(U);M.write(t.Buffer),w(M,H.byteLength),M.write(H)}else if(U instanceof y.$Se)M.write(t.VSBuffer),w(M,U.byteLength),M.write(U);else if(Array.isArray(U)){M.write(t.Array),w(M,U.length);for(const H of U)o(M,H)}else if(typeof U=="number"&&(U|0)===U)M.write(t.Uint),w(M,U);else{const H=y.$Se.fromString(JSON.stringify(U));M.write(t.Object),w(M,H.byteLength),M.write(H)}}function l(M){switch(M.read(1).readUInt8(0)){case n.Undefined:return;case n.String:return M.read(h(M)).toString();case n.Buffer:return M.read(h(M)).buffer;case n.VSBuffer:return M.read(h(M));case n.Array:{const H=h(M),K=[];for(let ie=0;ie<H;ie++)K.push(l(M));return K}case n.Object:return JSON.parse(M.read(h(M)).toString());case n.Int:return h(M)}}class p{constructor(U,H,K=null,ie=1e3){this.h=U,this.j=H,this.k=K,this.l=ie,this.b=new Map,this.d=new Map,this.g=new Map,this.f=this.h.onMessage(se=>this.q(se)),this.m({type:S.Initialize})}registerChannel(U,H){this.b.set(U,H),setTimeout(()=>this.w(U),0)}m(U){switch(U.type){case S.Initialize:{const H=this.o([U.type]);this.k?.logOutgoing(H,0,A.OtherSide,b(U.type));return}case S.PromiseSuccess:case S.PromiseError:case S.EventFire:case S.PromiseErrorObj:{const H=this.o([U.type,U.id],U.data);this.k?.logOutgoing(H,U.id,A.OtherSide,b(U.type),U.data);return}}}o(U,H=void 0){const K=new c;return o(K,U),o(K,H),this.p(K.buffer)}p(U){try{return this.h.send(U),U.byteLength}catch{return 0}}q(U){const H=new i(U),K=l(H),ie=l(H),se=K[0];switch(se){case a.Promise:return this.k?.logIncoming(U.byteLength,K[1],A.OtherSide,`${$(se)}: ${K[2]}.${K[3]}`,ie),this.s({type:se,id:K[1],channelName:K[2],name:K[3],arg:ie});case a.EventListen:return this.k?.logIncoming(U.byteLength,K[1],A.OtherSide,`${$(se)}: ${K[2]}.${K[3]}`,ie),this.t({type:se,id:K[1],channelName:K[2],name:K[3],arg:ie});case a.PromiseCancel:return this.k?.logIncoming(U.byteLength,K[1],A.OtherSide,`${$(se)}`),this.u({type:se,id:K[1]});case a.EventDispose:return this.k?.logIncoming(U.byteLength,K[1],A.OtherSide,`${$(se)}`),this.u({type:se,id:K[1]})}}s(U){const H=this.b.get(U.channelName);if(!H){this.v(U);return}const K=new k.$Be;let ie;try{ie=H.call(this.j,U.name,U.arg,K.token)}catch(V){ie=Promise.reject(V)}const se=U.id;ie.then(V=>{this.m({id:se,data:V,type:S.PromiseSuccess})},V=>{V instanceof Error?this.m({id:se,data:{message:V.message,name:V.name,stack:V.stack?V.stack.split(`
`):void 0},type:S.PromiseError}):this.m({id:se,data:V,type:S.PromiseErrorObj})}).finally(()=>{L.dispose(),this.d.delete(U.id)});const L=(0,u.$Xc)(()=>K.cancel());this.d.set(U.id,L)}t(U){const H=this.b.get(U.channelName);if(!H){this.v(U);return}const K=U.id,se=H.listen(this.j,U.name,U.arg)(L=>this.m({id:K,data:L,type:S.EventFire}));this.d.set(U.id,se)}u(U){const H=this.d.get(U.id);H&&(H.dispose(),this.d.delete(U.id))}v(U){let H=this.g.get(U.channelName);H||(H=[],this.g.set(U.channelName,H));const K=setTimeout(()=>{console.error(`Unknown channel: ${U.channelName}`),U.type===a.Promise&&this.m({id:U.id,data:{name:"Unknown channel",message:`Channel name '${U.channelName}' timed out after ${this.l}ms`,stack:void 0},type:S.PromiseError})},this.l);H.push({request:U,timeoutTimer:K})}w(U){const H=this.g.get(U);if(H){for(const K of H)switch(clearTimeout(K.timeoutTimer),K.request.type){case a.Promise:this.s(K.request);break;case a.EventListen:this.t(K.request);break}this.g.delete(U)}}dispose(){this.f&&(this.f.dispose(),this.f=null),(0,u.$Uc)(this.d.values()),this.d.clear()}}e.$mi=p;var A;(function(M){M[M.LocalSide=0]="LocalSide",M[M.OtherSide=1]="OtherSide"})(A||(e.RequestInitiator=A={}));class T{constructor(U,H=null){this.l=U,this.a=!1,this.b=v.Uninitialized,this.d=new Set,this.f=new Map,this.g=0,this.k=new g.$qe,this.onDidInitialize=this.k.event,this.h=this.l.onMessage(K=>this.s(K)),this.j=H}getChannel(U){const H=this;return{call(K,ie,se){return H.a?Promise.reject(new O.$9):H.m(U,K,ie,se)},listen(K,ie){return H.a?g.Event.None:H.o(U,K,ie)}}}m(U,H,K,ie=k.CancellationToken.None){const se=this.g++,L=a.Promise,V={id:se,type:L,channelName:U,name:H,arg:K};if(ie.isCancellationRequested)return Promise.reject(new O.$9);let z;return new Promise((F,J)=>{if(ie.isCancellationRequested)return J(new O.$9);const Z=()=>{const re=ce=>{switch(ce.type){case S.PromiseSuccess:this.f.delete(se),F(ce.data);break;case S.PromiseError:{this.f.delete(se);const fe=new Error(ce.data.message);fe.stack=Array.isArray(ce.data.stack)?ce.data.stack.join(`
`):ce.data.stack,fe.name=ce.data.name,J(fe);break}case S.PromiseErrorObj:this.f.delete(se),J(ce.data);break}};this.f.set(se,re),this.p(V)};let G=null;this.b===v.Idle?Z():(G=(0,I.$xh)(re=>this.u()),G.then(()=>{G=null,Z()}));const q=()=>{G?(G.cancel(),G=null):this.p({id:se,type:a.PromiseCancel}),J(new O.$9)},X=ie.onCancellationRequested(q);z=(0,u.$Wc)((0,u.$Xc)(q),X),this.d.add(z)}).finally(()=>{z.dispose(),this.d.delete(z)})}o(U,H,K){const ie=this.g++,se=a.EventListen,L={id:ie,type:se,channelName:U,name:H,arg:K};let V=null;const z=new g.$qe({onWillAddFirstListener:()=>{V=(0,I.$xh)(F=>this.u()),V.then(()=>{V=null,this.d.add(z),this.p(L)})},onDidRemoveLastListener:()=>{V?(V.cancel(),V=null):(this.d.delete(z),this.p({id:ie,type:a.EventDispose}))}}),E=F=>z.fire(F.data);return this.f.set(ie,E),z.event}p(U){switch(U.type){case a.Promise:case a.EventListen:{const H=this.q([U.type,U.id,U.channelName,U.name],U.arg);this.j?.logOutgoing(H,U.id,A.LocalSide,`${$(U.type)}: ${U.channelName}.${U.name}`,U.arg);return}case a.PromiseCancel:case a.EventDispose:{const H=this.q([U.type,U.id]);this.j?.logOutgoing(H,U.id,A.LocalSide,$(U.type));return}}}q(U,H=void 0){const K=new c;return o(K,U),o(K,H),this.r(K.buffer)}r(U){try{return this.l.send(U),U.byteLength}catch{return 0}}s(U){const H=new i(U),K=l(H),ie=l(H),se=K[0];switch(se){case S.Initialize:return this.j?.logIncoming(U.byteLength,0,A.LocalSide,b(se)),this.t({type:K[0]});case S.PromiseSuccess:case S.PromiseError:case S.EventFire:case S.PromiseErrorObj:return this.j?.logIncoming(U.byteLength,K[1],A.LocalSide,b(se),ie),this.t({type:K[0],id:K[1],data:ie})}}t(U){if(U.type===S.Initialize){this.b=v.Idle,this.k.fire();return}this.f.get(U.id)?.(U)}get onDidInitializePromise(){return g.Event.toPromise(this.onDidInitialize)}u(){return this.b===v.Idle?Promise.resolve():this.onDidInitializePromise}dispose(){this.a=!0,this.h&&(this.h.dispose(),this.h=null),(0,u.$Uc)(this.d.values()),this.d.clear()}}e.$ni=T,Ee([C.$ci],T.prototype,"onDidInitializePromise",null);class N{get connections(){const U=[];return this.f.forEach(H=>U.push(H)),U}constructor(U,H,K){this.a=new Map,this.f=new Set,this.g=new g.$qe,this.onDidAddConnection=this.g.event,this.h=new g.$qe,this.onDidRemoveConnection=this.h.event,this.j=new u.$Yc,this.j.add(U(({protocol:ie,onDidClientDisconnect:se})=>{const L=g.Event.once(ie.onMessage);this.j.add(L(V=>{const z=new i(V),E=l(z),F=new p(ie,E,H,K),J=new T(ie,H);this.a.forEach((G,q)=>F.registerChannel(q,G));const Z={channelServer:F,channelClient:J,ctx:E};this.f.add(Z),this.g.fire(Z),this.j.add(se(()=>{F.dispose(),J.dispose(),this.f.delete(Z),this.h.fire(Z)}))}))}))}getChannel(U,H){const K=this;return{call(ie,se,L){let V;if((0,m.$xg)(H)){const E=(0,P.$7b)(K.connections.filter(H));V=E?Promise.resolve(E):g.Event.toPromise(g.Event.filter(K.onDidAddConnection,H))}else V=H.routeCall(K,ie,se);const z=V.then(E=>E.channelClient.getChannel(U));return j(z).call(ie,se,L)},listen(ie,se){if((0,m.$xg)(H))return K.k(U,H,ie,se);const L=H.routeEvent(K,ie,se).then(V=>V.channelClient.getChannel(U));return j(L).listen(ie,se)}}}k(U,H,K,ie){const se=this;let L;const V=new g.$qe({onWillAddFirstListener:()=>{L=new u.$Yc;const z=new g.$we,E=new Map,F=Z=>{const q=Z.channelClient.getChannel(U).listen(K,ie),X=z.add(q);E.set(Z,X)},J=Z=>{const G=E.get(Z);G&&(G.dispose(),E.delete(Z))};se.connections.filter(H).forEach(F),g.Event.filter(se.onDidAddConnection,H)(F,void 0,L),se.onDidRemoveConnection(J,void 0,L),z.event(V.fire,V,L),L.add(z)},onDidRemoveLastListener:()=>{L?.dispose(),L=void 0}});return V.event}registerChannel(U,H){this.a.set(U,H);for(const K of this.f)K.channelServer.registerChannel(U,H)}dispose(){this.j.dispose();for(const U of this.f)U.channelClient.dispose(),U.channelServer.dispose();this.f.clear(),this.a.clear(),this.g.dispose(),this.h.dispose()}}e.$oi=N;class D{constructor(U,H,K=null){const ie=new c;o(ie,H),U.send(ie.buffer),this.a=new T(U,K),this.d=new p(U,H,K)}getChannel(U){return this.a.getChannel(U)}registerChannel(U,H){this.d.registerChannel(U,H)}dispose(){this.a.dispose(),this.d.dispose()}}e.$pi=D;function j(M){return{call(U,H,K){return M.then(ie=>ie.call(U,H,K))},listen(U,H){const K=new g.$ze;return M.then(ie=>K.input=ie.listen(U,H)),K.event}}}function x(M){let U=!1;return{call(H,K,ie){return U?M.call(H,K,ie):(0,I.$Lh)(0).then(()=>U=!0).then(()=>M.call(H,K,ie))},listen(H,K){if(U)return M.listen(H,K);const ie=new g.$ze;return(0,I.$Lh)(0).then(()=>U=!0).then(()=>ie.input=M.listen(H,K)),ie.event}}}class Y{constructor(U){this.a=U}routeCall(U){return this.b(U)}routeEvent(U){return this.b(U)}async b(U){for(const H of U.connections)if(await Promise.resolve(this.a(H.ctx)))return Promise.resolve(H);return await g.Event.toPromise(U.onDidAddConnection),await this.b(U)}}e.$si=Y;var ne;(function(M){function U(se,L,V){const z=se,E=V&&V.disableMarshalling,F=new Map;for(const J in z)K(J)&&F.set(J,g.Event.buffer(z[J],!0,void 0,L));return new class{listen(J,Z,G){const q=F.get(Z);if(q)return q;const X=z[Z];if(typeof X=="function"){if(ie(Z))return X.call(z,G);if(K(Z))return F.set(Z,g.Event.buffer(z[Z],!0,void 0,L)),F.get(Z)}throw new O.$fb(`Event not found: ${Z}`)}call(J,Z,G){const q=z[Z];if(typeof q=="function"){if(!E&&Array.isArray(G))for(let re=0;re<G.length;re++)G[re]=(0,d.$hi)(G[re]);let X=q.apply(z,G);return X instanceof Promise||(X=Promise.resolve(X)),X}throw new O.$fb(`Method not found: ${Z}`)}}}M.fromService=U;function H(se,L){const V=L&&L.disableMarshalling;return new Proxy({},{get(z,E){if(typeof E=="string")return L?.properties?.has(E)?L.properties.get(E):ie(E)?function(F){return se.listen(E,F)}:K(E)?se.listen(E):async function(...F){let J;L&&!(0,m.$sg)(L.context)?J=[L.context,...F]:J=F;const Z=await se.call(E,J);return V?Z:(0,d.$hi)(Z)};throw new O.$fb(`Property not found: ${String(E)}`)}})}M.toService=H;function K(se){return se[0]==="o"&&se[1]==="n"&&f.$Jf(se.charCodeAt(2))}function ie(se){return/^onDynamic/.test(se)&&f.$Jf(se.charCodeAt(9))}})(ne||(e.ProxyChannel=ne={}));const ae=[["#2977B1","#FC802D","#34A13A","#D3282F","#9366BA"],["#8B564C","#E177C0","#7F7F7F","#BBBE3D","#2EBECD"]];function ue(M){if(Array.isArray(M))return M;if(M&&typeof M=="object"&&typeof M.toString=="function"){const U=M.toString();if(U!=="[object Object]")return U}return M}function me(M){return Array.isArray(M)?M.map(ue):ue(M)}function W(M,U,H,K,ie,se,L){L=me(L);const V=ae[ie],z=V[K%V.length];let E=[`%c[${M}]%c[${String(U).padStart(7," ")}]%c[len: ${String(H).padStart(5," ")}]%c${String(K).padStart(5," ")} - ${se}`,"color: darkgreen","color: grey","color: grey",`color: ${z}`];/\($/.test(se)?(E=E.concat(L),E.push(")")):E.push(L),console.log.apply(console,E)}class _{constructor(U,H){this.d=U,this.f=H,this.a=0,this.b=0}logOutgoing(U,H,K,ie,se){this.b+=U,W(this.d,this.b,U,H,K,ie,se)}logIncoming(U,H,K,ie,se){this.a+=U,W(this.f,this.a,U,H,K,ie,se)}}e.$ti=_}),define(le[90],he([0,1,61,8,13,21,86,7,5,2,27,59,57,60]),function(Q,e,P,I,y,k,C,O,g,u,d,f,m,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$qr=e.$pr=void 0,O=be(O);class $ extends a.$mi{constructor(v){super({send:h=>{try{process.send?.(h.buffer.toString("base64"))}catch{}},onMessage:g.Event.fromNodeEventEmitter(process,"message",h=>y.$Se.wrap(Buffer.from(h,"base64")))},v),process.once("disconnect",()=>this.dispose())}}e.$pr=$;class S{constructor(v,h){this.i=v,this.j=h,this.c=new Set,this.g=new Map,this.h=new g.$qe,this.onDidProcessExit=this.h.event;const R=h&&h.timeout?h.timeout:6e4;this.b=new I.$Hh(R),this.d=null,this.f=null}getChannel(v){const h=this;return{call(R,w,i){return h.k(v,R,w,i)},listen(R,w){return h.l(v,R,w)}}}k(v,h,R,w=k.CancellationToken.None){if(!this.b)return Promise.reject(new Error("disposed"));if(w.isCancellationRequested)return Promise.reject(O.$0());this.b.cancel();const i=this.n(v),c=(0,I.$xh)(t=>i.call(h,R,t)),n=w.onCancellationRequested(()=>c.cancel()),r=(0,u.$Xc)(()=>c.cancel());return this.c.add(r),c.finally(()=>{n.dispose(),this.c.delete(r),this.c.size===0&&this.b&&this.b.trigger(()=>this.o())}),c}l(v,h,R){if(!this.b)return g.Event.None;this.b.cancel();let w;const i=new g.$qe({onWillAddFirstListener:()=>{w=this.n(v).listen(h,R)(i.fire,i),this.c.add(w)},onDidRemoveLastListener:()=>{this.c.delete(w),w.dispose(),this.c.size===0&&this.b&&this.b.trigger(()=>this.o())}});return i.event}get m(){if(!this.f){const v=this.j&&this.j.args?this.j.args:[],h=Object.create(null);h.env={...(0,d.$ko)(process.env),VSCODE_PARENT_PID:String(process.pid)},this.j&&this.j.env&&(h.env={...h.env,...this.j.env}),this.j&&this.j.freshExecArgv&&(h.execArgv=[]),this.j&&typeof this.j.debug=="number"&&(h.execArgv=["--nolazy","--inspect="+this.j.debug]),this.j&&typeof this.j.debugBrk=="number"&&(h.execArgv=["--nolazy","--inspect-brk="+this.j.debugBrk]),h.execArgv===void 0&&(h.execArgv=process.execArgv.filter(o=>!/^--inspect(-brk)?=/.test(o)).filter(o=>!o.startsWith("--vscode-"))),(0,m.$rm)(h.env),this.d=(0,P.fork)(this.i,v,h);const R=new g.$qe,i=g.Event.fromNodeEventEmitter(this.d,"message",o=>o)(o=>{if((0,C.$lr)(o)){(0,C.log)(o,`IPC Library: ${this.j.serverName}`);return}R.fire(y.$Se.wrap(Buffer.from(o,"base64")))}),c=this.j.useQueue?(0,f.$Em)(this.d):this.d,n=o=>this.d&&this.d.connected&&c.send(o.buffer.toString("base64")),r=R.event,t={send:n,onMessage:r};this.f=new a.$ni(t);const s=()=>this.o();process.once("exit",s),this.d.on("error",o=>console.warn('IPC "'+this.j.serverName+'" errored with '+o)),this.d.on("exit",(o,l)=>{process.removeListener("exit",s),i.dispose(),this.c.forEach(p=>(0,u.$Uc)(p)),this.c.clear(),o!==0&&l!=="SIGTERM"&&console.warn('IPC "'+this.j.serverName+'" crashed with exit code '+o+" and signal "+l),this.b?.cancel(),this.o(),this.h.fire({code:o,signal:l})})}return this.f}n(v){let h=this.g.get(v);return h||(h=this.m.getChannel(v),this.g.set(v,h)),h}o(){this.f&&(this.d&&(this.d.kill(),this.d=null),this.f=null,this.g.clear())}dispose(){this.h.dispose(),this.b?.cancel(),this.b=void 0,this.o(),this.c.clear()}}e.$qr=S}),define(le[91],he([0,1,8,5,2,48,3]),function(Q,e,P,I,y,k,C){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$lq=e.$kq=e.StorageState=e.StorageHint=void 0,e.$jq=g;var O;(function(m){m[m.STORAGE_DOES_NOT_EXIST=0]="STORAGE_DOES_NOT_EXIST",m[m.STORAGE_IN_MEMORY=1]="STORAGE_IN_MEMORY"})(O||(e.StorageHint=O={}));function g(m){const a=m;return a?.changed instanceof Map||a?.deleted instanceof Set}var u;(function(m){m[m.None=0]="None",m[m.Initialized=1]="Initialized",m[m.Closed=2]="Closed"})(u||(e.StorageState=u={}));class d extends y.$Zc{static{this.a=100}constructor(a,$=Object.create(null)){super(),this.r=a,this.s=$,this.b=this.B(new I.$te),this.onDidChangeStorage=this.b.event,this.c=u.None,this.f=new Map,this.g=this.B(new P.$Ih(d.a)),this.h=new Set,this.j=new Map,this.m=void 0,this.n=[],this.t()}t(){this.B(this.r.onDidChangeItemsExternal(a=>this.u(a)))}u(a){this.b.pause();try{a.changed?.forEach(($,S)=>this.w(S,$)),a.deleted?.forEach($=>this.w($,void 0))}finally{this.b.resume()}}w(a,$){if(this.c===u.Closed)return;let S=!1;(0,C.$sg)($)?S=this.f.delete(a):this.f.get(a)!==$&&(this.f.set(a,$),S=!0),S&&this.b.fire({key:a,external:!0})}get items(){return this.f}get size(){return this.f.size}async init(){this.c===u.None&&(this.c=u.Initialized,this.s.hint!==O.STORAGE_DOES_NOT_EXIST&&(this.f=await this.r.getItems()))}get(a,$){const S=this.f.get(a);return(0,C.$sg)(S)?$:S}getBoolean(a,$){const S=this.get(a);return(0,C.$sg)(S)?$:S==="true"}getNumber(a,$){const S=this.get(a);return(0,C.$sg)(S)?$:parseInt(S,10)}getObject(a,$){const S=this.get(a);return(0,C.$sg)(S)?$:(0,k.$gi)(S)}async set(a,$,S=!1){if(this.c===u.Closed)return;if((0,C.$sg)($))return this.delete(a,S);const b=(0,C.$lg)($)||Array.isArray($)?(0,k.$fi)($):String($);if(this.f.get(a)!==b)return this.f.set(a,b),this.j.set(a,b),this.h.delete(a),this.b.fire({key:a,external:S}),this.D()}async delete(a,$=!1){if(!(this.c===u.Closed||!this.f.delete(a)))return this.h.has(a)||this.h.add(a),this.j.delete(a),this.b.fire({key:a,external:$}),this.D()}async optimize(){if(this.c!==u.Closed)return await this.flush(0),this.r.optimize()}async close(){return this.m||(this.m=this.y()),this.m}async y(){this.c=u.Closed;try{await this.D(0)}catch{}await this.r.close(()=>this.f)}get z(){return this.j.size>0||this.h.size>0}async C(){if(!this.z)return;const a={insert:this.j,delete:this.h};return this.h=new Set,this.j=new Map,this.r.updateItems(a).finally(()=>{if(!this.z)for(;this.n.length;)this.n.pop()?.()})}async flush(a){if(!(this.c===u.Closed||this.m))return this.D(a)}async D(a){return this.s.hint===O.STORAGE_IN_MEMORY?this.C():this.g.trigger(()=>this.C(),a)}async whenFlushed(){if(this.z)return new Promise(a=>this.n.push(a))}isInMemory(){return this.s.hint===O.STORAGE_IN_MEMORY}}e.$kq=d;class f{constructor(){this.onDidChangeItemsExternal=I.Event.None,this.a=new Map}async getItems(){return this.a}async updateItems(a){a.insert?.forEach(($,S)=>this.a.set(S,$)),a.delete?.forEach($=>this.a.delete($))}async optimize(){}async close(){}}e.$lq=f}),define(le[92],he([0,1,93,7,4]),function(Q,e,P,I,y){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$Fj=e.TokenType=void 0;var k;(function(d){d[d.LParen=0]="LParen",d[d.RParen=1]="RParen",d[d.Neg=2]="Neg",d[d.Eq=3]="Eq",d[d.NotEq=4]="NotEq",d[d.Lt=5]="Lt",d[d.LtEq=6]="LtEq",d[d.Gt=7]="Gt",d[d.GtEq=8]="GtEq",d[d.RegexOp=9]="RegexOp",d[d.RegexStr=10]="RegexStr",d[d.True=11]="True",d[d.False=12]="False",d[d.In=13]="In",d[d.Not=14]="Not",d[d.And=15]="And",d[d.Or=16]="Or",d[d.Str=17]="Str",d[d.QuotedStr=18]="QuotedStr",d[d.Error=19]="Error",d[d.EOF=20]="EOF"})(k||(e.TokenType=k={}));function C(...d){switch(d.length){case 1:return(0,y.localize)(1693,null,d[0]);case 2:return(0,y.localize)(1694,null,d[0],d[1]);case 3:return(0,y.localize)(1695,null,d[0],d[1],d[2]);default:return}}const O=(0,y.localize)(1696,null),g=(0,y.localize)(1697,null);class u{constructor(){this.c="",this.d=0,this.e=0,this.f=[],this.g=[],this.m=/[a-zA-Z0-9_<>\-\./\\:\*\?\+\[\]\^,#@;"%\$\p{L}-]+/uy}static getLexeme(f){switch(f.type){case k.LParen:return"(";case k.RParen:return")";case k.Neg:return"!";case k.Eq:return f.isTripleEq?"===":"==";case k.NotEq:return f.isTripleEq?"!==":"!=";case k.Lt:return"<";case k.LtEq:return"<=";case k.Gt:return">=";case k.GtEq:return">=";case k.RegexOp:return"=~";case k.RegexStr:return f.lexeme;case k.True:return"true";case k.False:return"false";case k.In:return"in";case k.Not:return"not";case k.And:return"&&";case k.Or:return"||";case k.Str:return f.lexeme;case k.QuotedStr:return f.lexeme;case k.Error:return f.lexeme;case k.EOF:return"EOF";default:throw(0,I.$_)(`unhandled token type: ${JSON.stringify(f)}; have you forgotten to add a case?`)}}static{this.a=new Set(["i","g","s","m","y","u"].map(f=>f.charCodeAt(0)))}static{this.b=new Map([["not",k.Not],["in",k.In],["false",k.False],["true",k.True]])}get errors(){return this.g}reset(f){return this.c=f,this.d=0,this.e=0,this.f=[],this.g=[],this}scan(){for(;!this.r();)switch(this.d=this.e,this.i()){case P.CharCode.OpenParen:this.k(k.LParen);break;case P.CharCode.CloseParen:this.k(k.RParen);break;case P.CharCode.ExclamationMark:if(this.h(P.CharCode.Equals)){const m=this.h(P.CharCode.Equals);this.f.push({type:k.NotEq,offset:this.d,isTripleEq:m})}else this.k(k.Neg);break;case P.CharCode.SingleQuote:this.o();break;case P.CharCode.Slash:this.q();break;case P.CharCode.Equals:if(this.h(P.CharCode.Equals)){const m=this.h(P.CharCode.Equals);this.f.push({type:k.Eq,offset:this.d,isTripleEq:m})}else this.h(P.CharCode.Tilde)?this.k(k.RegexOp):this.l(C("==","=~"));break;case P.CharCode.LessThan:this.k(this.h(P.CharCode.Equals)?k.LtEq:k.Lt);break;case P.CharCode.GreaterThan:this.k(this.h(P.CharCode.Equals)?k.GtEq:k.Gt);break;case P.CharCode.Ampersand:this.h(P.CharCode.Ampersand)?this.k(k.And):this.l(C("&&"));break;case P.CharCode.Pipe:this.h(P.CharCode.Pipe)?this.k(k.Or):this.l(C("||"));break;case P.CharCode.Space:case P.CharCode.CarriageReturn:case P.CharCode.Tab:case P.CharCode.LineFeed:case P.CharCode.NoBreakSpace:break;default:this.n()}return this.d=this.e,this.k(k.EOF),Array.from(this.f)}h(f){return this.r()||this.c.charCodeAt(this.e)!==f?!1:(this.e++,!0)}i(){return this.c.charCodeAt(this.e++)}j(){return this.r()?P.CharCode.Null:this.c.charCodeAt(this.e)}k(f){this.f.push({type:f,offset:this.d})}l(f){const m=this.d,a=this.c.substring(this.d,this.e),$={type:k.Error,offset:this.d,lexeme:a};this.g.push({offset:m,lexeme:a,additionalInfo:f}),this.f.push($)}n(){this.m.lastIndex=this.d;const f=this.m.exec(this.c);if(f){this.e=this.d+f[0].length;const m=this.c.substring(this.d,this.e),a=u.b.get(m);a?this.k(a):this.f.push({type:k.Str,lexeme:m,offset:this.d})}}o(){for(;this.j()!==P.CharCode.SingleQuote&&!this.r();)this.i();if(this.r()){this.l(O);return}this.i(),this.f.push({type:k.QuotedStr,lexeme:this.c.substring(this.d+1,this.e-1),offset:this.d+1})}q(){let f=this.e,m=!1,a=!1;for(;;){if(f>=this.c.length){this.e=f,this.l(g);return}const S=this.c.charCodeAt(f);if(m)m=!1;else if(S===P.CharCode.Slash&&!a){f++;break}else S===P.CharCode.OpenSquareBracket?a=!0:S===P.CharCode.Backslash?m=!0:S===P.CharCode.CloseSquareBracket&&(a=!1);f++}for(;f<this.c.length&&u.a.has(this.c.charCodeAt(f));)f++;this.e=f;const $=this.c.substring(this.d,this.e);this.f.push({type:k.RegexStr,lexeme:$,offset:this.d})}r(){return this.e>=this.c.length}}e.$Fj=u}),define(le[94],he([0,1,84,55,14,15,36,16,12]),function(Q,e,P,I,y,k,C,O,g){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$_m=e.$$m=void 0,e.$an=d,e.$bn=f,e.$$m=/^([^.]+\..+)[:=](.+)$/;class u{get appRoot(){return(0,k.$rc)(y.$5g.asFileUri("").fsPath)}get userHome(){return g.URI.file(this.b.homeDir)}get userDataPath(){return this.b.userDataDir}get appSettingsHome(){return g.URI.file((0,k.$oc)(this.userDataPath,"User"))}get tmpDir(){return g.URI.file(this.b.tmpDir)}get cacheHome(){return g.URI.file(this.userDataPath)}get stateResource(){return(0,O.$lh)(this.appSettingsHome,"globalStorage","storage.json")}get userRoamingDataHome(){return this.appSettingsHome.with({scheme:y.Schemas.vscodeUserData})}get userDataSyncHome(){return(0,O.$lh)(this.appSettingsHome,"sync")}get logsHome(){if(!this.args.logsPath){const a=(0,P.$0m)(new Date).replace(/-|:|\.\d+Z$/g,"");this.args.logsPath=(0,k.$oc)(this.userDataPath,"logs",a)}return g.URI.file(this.args.logsPath)}get sync(){return this.args.sync}get machineSettingsResource(){return(0,O.$lh)(g.URI.file((0,k.$oc)(this.userDataPath,"Machine")),"settings.json")}get workspaceStorageHome(){return(0,O.$lh)(this.appSettingsHome,"workspaceStorage")}get localHistoryHome(){return(0,O.$lh)(this.appSettingsHome,"History")}get keyboardLayoutResource(){return(0,O.$lh)(this.userRoamingDataHome,"keyboardLayout.json")}get argvResource(){const a=C.env.VSCODE_PORTABLE;return a?g.URI.file((0,k.$oc)(a,"argv.json")):(0,O.$lh)(this.userHome,this.c.dataFolderName,"argv.json")}get isExtensionDevelopment(){return!!this.args.extensionDevelopmentPath}get untitledWorkspacesHome(){return g.URI.file((0,k.$oc)(this.userDataPath,"Workspaces"))}get builtinExtensionsPath(){const a=this.args["builtin-extensions-dir"];return a?(0,k.$pc)(a):(0,k.$mc)((0,k.$oc)(y.$5g.asFileUri("").fsPath,"..","extensions"))}get extensionsDownloadLocation(){const a=this.args["extensions-download-dir"];return a?g.URI.file((0,k.$pc)(a)):g.URI.file((0,k.$oc)(this.userDataPath,"CachedExtensionVSIXs"))}get extensionsPath(){const a=this.args["extensions-dir"];if(a)return(0,k.$pc)(a);const $=C.env.VSCODE_EXTENSIONS;if($)return $;const S=C.env.VSCODE_PORTABLE;return S?(0,k.$oc)(S,"extensions"):(0,O.$lh)(this.userHome,this.c.dataFolderName,"extensions").fsPath}get extensionDevelopmentLocationURI(){const a=this.args.extensionDevelopmentPath;if(Array.isArray(a))return a.map($=>/^[^:/?#]+?:\/\//.test($)?g.URI.parse($):g.URI.file((0,k.$mc)($)))}get extensionDevelopmentKind(){return this.args.extensionDevelopmentKind?.map(a=>a==="ui"||a==="workspace"||a==="web"?a:"workspace")}get extensionTestsLocationURI(){const a=this.args.extensionTestsPath;if(a)return/^[^:/?#]+?:\/\//.test(a)?g.URI.parse(a):g.URI.file((0,k.$mc)(a))}get disableExtensions(){if(this.args["disable-extensions"])return!0;const a=this.args["disable-extension"];if(a){if(typeof a=="string")return[a];if(Array.isArray(a)&&a.length>0)return a}return!1}get debugExtensionHost(){return d(this.args,this.isBuilt)}get debugRenderer(){return!!this.args.debugRenderer}get isBuilt(){return!C.env.VSCODE_DEV}get verbose(){return!!this.args.verbose}get logLevel(){return this.args.log?.find(a=>!e.$$m.test(a))}get extensionLogLevel(){const a=[];for(const $ of this.args.log||[]){const S=e.$$m.exec($);S&&S[1]&&S[2]&&a.push([S[1],S[2]])}return a.length?a:void 0}get serviceMachineIdResource(){return(0,O.$lh)(g.URI.file(this.userDataPath),"machineid")}get crashReporterId(){return this.args["crash-reporter-id"]}get crashReporterDirectory(){return this.args["crash-reporter-directory"]}get disableTelemetry(){return!!this.args["disable-telemetry"]}get disableWorkspaceTrust(){return!!this.args["disable-workspace-trust"]}get useInMemorySecretStorage(){return!!this.args["use-inmemory-secretstorage"]}get policyFile(){if(this.args["__enable-file-policy"]){const a=C.env.VSCODE_PORTABLE;return a?g.URI.file((0,k.$oc)(a,"policy.json")):(0,O.$lh)(this.userHome,this.c.dataFolderName,"policy.json")}}get continueOn(){return this.args.continueOn}set continueOn(a){this.args.continueOn=a}get args(){return this.a}constructor(a,$,S){this.a=a,this.b=$,this.c=S,this.editSessionId=this.args.editSessionId}}e.$_m=u,Ee([I.$ci],u.prototype,"appRoot",null),Ee([I.$ci],u.prototype,"userHome",null),Ee([I.$ci],u.prototype,"userDataPath",null),Ee([I.$ci],u.prototype,"appSettingsHome",null),Ee([I.$ci],u.prototype,"tmpDir",null),Ee([I.$ci],u.prototype,"cacheHome",null),Ee([I.$ci],u.prototype,"stateResource",null),Ee([I.$ci],u.prototype,"userRoamingDataHome",null),Ee([I.$ci],u.prototype,"userDataSyncHome",null),Ee([I.$ci],u.prototype,"sync",null),Ee([I.$ci],u.prototype,"machineSettingsResource",null),Ee([I.$ci],u.prototype,"workspaceStorageHome",null),Ee([I.$ci],u.prototype,"localHistoryHome",null),Ee([I.$ci],u.prototype,"keyboardLayoutResource",null),Ee([I.$ci],u.prototype,"argvResource",null),Ee([I.$ci],u.prototype,"isExtensionDevelopment",null),Ee([I.$ci],u.prototype,"untitledWorkspacesHome",null),Ee([I.$ci],u.prototype,"builtinExtensionsPath",null),Ee([I.$ci],u.prototype,"extensionsPath",null),Ee([I.$ci],u.prototype,"extensionDevelopmentLocationURI",null),Ee([I.$ci],u.prototype,"extensionDevelopmentKind",null),Ee([I.$ci],u.prototype,"extensionTestsLocationURI",null),Ee([I.$ci],u.prototype,"debugExtensionHost",null),Ee([I.$ci],u.prototype,"logLevel",null),Ee([I.$ci],u.prototype,"extensionLogLevel",null),Ee([I.$ci],u.prototype,"serviceMachineIdResource",null),Ee([I.$ci],u.prototype,"disableTelemetry",null),Ee([I.$ci],u.prototype,"disableWorkspaceTrust",null),Ee([I.$ci],u.prototype,"useInMemorySecretStorage",null),Ee([I.$ci],u.prototype,"policyFile",null);function d(m,a){return f(m["inspect-extensions"],m["inspect-brk-extensions"],5870,a,m.debugId,m.extensionEnvironment)}function f(m,a,$,S,b,v){const R=Number(a||m)||(S?null:$),w=R?!!a:!1;let i;if(v)try{i=JSON.parse(v)}catch{}return{port:R,break:w,debugId:b,env:i}}}),function(){function Q(e,P,I){function y(C,O){const g=k(C,O),u=[g];return e.isAbsolute(g)||u.unshift(I),e.resolve(...u)}function k(C,O){process.env.VSCODE_DEV&&(O="code-oss-dev");const g=process.env.VSCODE_PORTABLE;if(g)return e.join(g,"user-data");let u=process.env.VSCODE_APPDATA;if(u)return e.join(u,O);const d=C["user-data-dir"];if(d)return d;switch(process.platform){case"win32":if(u=process.env.APPDATA,!u){const f=process.env.USERPROFILE;if(typeof f!="string")throw new Error("Windows: Unexpected undefined %USERPROFILE% environment variable");u=e.join(f,"AppData","Roaming")}break;case"darwin":u=e.join(P.homedir(),"Library","Application Support");break;case"linux":u=process.env.XDG_CONFIG_HOME||e.join(P.homedir(),".config");break;default:throw new Error("Platform not supported")}return e.join(u,O)}return{getUserDataPath:y}}if(typeof define=="function")define(le[95],he([149,35,36]),function(e,P,I){return Q(e,P,I.cwd())});else if(typeof module=="object"&&typeof module.exports=="object"){const e=require("path"),P=require("os");module.exports=Q(e,P,process.env.VSCODE_CWD||process.cwd())}else throw new Error("Unknown context")}(),define(le[96],he([0,1,35,94,95]),function(Q,e,P,I,y){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$cn=void 0,e.$dn=C,e.$en=O;class k extends I.$_m{constructor(u,d){super(u,{homeDir:(0,P.homedir)(),tmpDir:(0,P.tmpdir)(),userDataDir:(0,y.getUserDataPath)(u,d.nameShort)},d)}}e.$cn=k;function C(g,u){return(0,I.$bn)(g["inspect-ptyhost"],g["inspect-brk-ptyhost"],5877,u,g.extensionEnvironment)}function O(g,u){return(0,I.$bn)(g["inspect-sharedprocess"],g["inspect-brk-sharedprocess"],5879,u,g.extensionEnvironment)}}),define(le[97],he([0,1,3,4]),function(Q,e,P,I){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$Uq=y;function y(C,O,g,u){try{k(C,O,g,u)}catch(d){C.error(d?.message??d)}return O}function k(C,O,g,u){const d=(f,m,a)=>{const $=f[m];if((0,P.$jg)($)){const S=$,b=S.length;if(b>1&&S[0]==="%"&&S[b-1]==="%"){const v=S.substr(1,b-2);let h=g[v];h===void 0&&u&&(h=u[v]);const R=typeof h=="string"?h:h?.message,w=u?.[v],i=typeof w=="string"?w:w?.message;if(!R){i||C.warn(`[${O.name}]: ${(0,I.localize)(1814,null,v)}`);return}if(a&&(m==="title"||m==="category")&&i&&i!==R){const c={value:R,original:i};f[m]=c}else f[m]=R}}else if((0,P.$lg)($))for(const S in $)$.hasOwnProperty(S)&&(S==="commands"?d($,S,!0):d($,S,a));else if(Array.isArray($))for(let S=0;S<$.length;S++)d($,S,a)};for(const f in O)O.hasOwnProperty(f)&&d(O,f)}}),define(le[98],he([0,1]),function(Q,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.allApiProposals=void 0;const P={activeComment:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.activeComment.d.ts"},aiRelatedInformation:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.aiRelatedInformation.d.ts"},aiTextSearchProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.aiTextSearchProvider.d.ts"},aiTextSearchProviderNew:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.aiTextSearchProviderNew.d.ts"},attributableCoverage:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.attributableCoverage.d.ts"},authLearnMore:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.authLearnMore.d.ts"},authSession:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.authSession.d.ts"},canonicalUriProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.canonicalUriProvider.d.ts"},chatParticipantAdditions:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatParticipantAdditions.d.ts"},chatParticipantPrivate:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatParticipantPrivate.d.ts",version:2},chatProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatProvider.d.ts"},chatTab:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatTab.d.ts"},chatVariableResolver:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatVariableResolver.d.ts"},codeActionAI:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.codeActionAI.d.ts"},codeActionRanges:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.codeActionRanges.d.ts"},codiconDecoration:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.codiconDecoration.d.ts"},commentReactor:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.commentReactor.d.ts"},commentReveal:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.commentReveal.d.ts"},commentThreadApplicability:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.commentThreadApplicability.d.ts"},commentingRangeHint:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.commentingRangeHint.d.ts"},commentsDraftState:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.commentsDraftState.d.ts"},contribAccessibilityHelpContent:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribAccessibilityHelpContent.d.ts"},contribChatParticipantDetection:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribChatParticipantDetection.d.ts"},contribCommentEditorActionsMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribCommentEditorActionsMenu.d.ts"},contribCommentPeekContext:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribCommentPeekContext.d.ts"},contribCommentThreadAdditionalMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribCommentThreadAdditionalMenu.d.ts"},contribCommentsViewThreadMenus:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribCommentsViewThreadMenus.d.ts"},contribDebugCreateConfiguration:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribDebugCreateConfiguration.d.ts"},contribDiffEditorGutterToolBarMenus:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribDiffEditorGutterToolBarMenus.d.ts"},contribEditSessions:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribEditSessions.d.ts"},contribEditorContentMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribEditorContentMenu.d.ts"},contribIssueReporter:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribIssueReporter.d.ts"},contribLabelFormatterWorkspaceTooltip:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribLabelFormatterWorkspaceTooltip.d.ts"},contribMenuBarHome:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribMenuBarHome.d.ts"},contribMergeEditorMenus:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribMergeEditorMenus.d.ts"},contribMultiDiffEditorMenus:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribMultiDiffEditorMenus.d.ts"},contribNotebookStaticPreloads:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribNotebookStaticPreloads.d.ts"},contribRemoteHelp:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribRemoteHelp.d.ts"},contribShareMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribShareMenu.d.ts"},contribSourceControlHistoryItemChangesMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribSourceControlHistoryItemChangesMenu.d.ts"},contribSourceControlHistoryItemGroupMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribSourceControlHistoryItemGroupMenu.d.ts"},contribSourceControlHistoryItemMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribSourceControlHistoryItemMenu.d.ts"},contribSourceControlHistoryTitleMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribSourceControlHistoryTitleMenu.d.ts"},contribSourceControlInputBoxMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribSourceControlInputBoxMenu.d.ts"},contribSourceControlTitleMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribSourceControlTitleMenu.d.ts"},contribStatusBarItems:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribStatusBarItems.d.ts"},contribViewContainerTitle:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribViewContainerTitle.d.ts"},contribViewsRemote:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribViewsRemote.d.ts"},contribViewsWelcome:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribViewsWelcome.d.ts"},createFileSystemWatcher:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.createFileSystemWatcher.d.ts"},customEditorMove:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.customEditorMove.d.ts"},debugVisualization:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.debugVisualization.d.ts"},defaultChatParticipant:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.defaultChatParticipant.d.ts"},diffCommand:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.diffCommand.d.ts"},diffContentOptions:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.diffContentOptions.d.ts"},documentFiltersExclusive:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.documentFiltersExclusive.d.ts"},documentPaste:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.documentPaste.d.ts"},editSessionIdentityProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.editSessionIdentityProvider.d.ts"},editorHoverVerbosityLevel:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.editorHoverVerbosityLevel.d.ts"},editorInsets:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.editorInsets.d.ts"},embeddings:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.embeddings.d.ts"},extensionRuntime:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.extensionRuntime.d.ts"},extensionsAny:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.extensionsAny.d.ts"},externalUriOpener:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.externalUriOpener.d.ts"},fileComments:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.fileComments.d.ts"},fileSearchProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.fileSearchProvider.d.ts"},fileSearchProviderNew:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.fileSearchProviderNew.d.ts"},findFiles2:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.findFiles2.d.ts"},findFiles2New:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.findFiles2New.d.ts"},findTextInFiles:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.findTextInFiles.d.ts"},findTextInFilesNew:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.findTextInFilesNew.d.ts"},fsChunks:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.fsChunks.d.ts"},idToken:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.idToken.d.ts"},inlineCompletionsAdditions:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.inlineCompletionsAdditions.d.ts"},inlineEdit:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.inlineEdit.d.ts"},interactive:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.interactive.d.ts"},interactiveWindow:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.interactiveWindow.d.ts"},ipc:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.ipc.d.ts"},languageModelSystem:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.languageModelSystem.d.ts"},languageStatusText:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.languageStatusText.d.ts"},lmTools:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.lmTools.d.ts",version:6},mappedEditsProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.mappedEditsProvider.d.ts"},multiDocumentHighlightProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.multiDocumentHighlightProvider.d.ts"},newSymbolNamesProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.newSymbolNamesProvider.d.ts"},notebookCellExecution:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookCellExecution.d.ts"},notebookCellExecutionState:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookCellExecutionState.d.ts"},notebookControllerAffinityHidden:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookControllerAffinityHidden.d.ts"},notebookDeprecated:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookDeprecated.d.ts"},notebookExecution:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookExecution.d.ts"},notebookKernelSource:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookKernelSource.d.ts"},notebookLiveShare:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookLiveShare.d.ts"},notebookMessaging:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookMessaging.d.ts"},notebookMime:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookMime.d.ts"},notebookReplDocument:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookReplDocument.d.ts"},notebookVariableProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookVariableProvider.d.ts"},portsAttributes:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.portsAttributes.d.ts"},profileContentHandlers:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.profileContentHandlers.d.ts"},quickDiffProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.quickDiffProvider.d.ts"},quickInputButtonLocation:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.quickInputButtonLocation.d.ts"},quickPickItemTooltip:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.quickPickItemTooltip.d.ts"},quickPickSortByLabel:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.quickPickSortByLabel.d.ts"},resolvers:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.resolvers.d.ts"},scmActionButton:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmActionButton.d.ts"},scmHistoryProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmHistoryProvider.d.ts"},scmMultiDiffEditor:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmMultiDiffEditor.d.ts"},scmSelectedProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmSelectedProvider.d.ts"},scmTextDocument:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmTextDocument.d.ts"},scmValidation:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmValidation.d.ts"},shareProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.shareProvider.d.ts"},showLocal:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.showLocal.d.ts"},speech:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.speech.d.ts"},tabInputMultiDiff:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.tabInputMultiDiff.d.ts"},tabInputTextMerge:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.tabInputTextMerge.d.ts"},taskPresentationGroup:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.taskPresentationGroup.d.ts"},telemetry:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.telemetry.d.ts"},terminalDataWriteEvent:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalDataWriteEvent.d.ts"},terminalDimensions:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalDimensions.d.ts"},terminalExecuteCommandEvent:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalExecuteCommandEvent.d.ts"},terminalQuickFixProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalQuickFixProvider.d.ts"},terminalSelection:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalSelection.d.ts"},testObserver:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.testObserver.d.ts"},testRelatedCode:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.testRelatedCode.d.ts"},textSearchCompleteNew:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.textSearchCompleteNew.d.ts"},textSearchProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.textSearchProvider.d.ts"},textSearchProviderNew:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.textSearchProviderNew.d.ts"},timeline:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.timeline.d.ts"},tokenInformation:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.tokenInformation.d.ts"},treeViewActiveItem:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.treeViewActiveItem.d.ts"},treeViewMarkdownMessage:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.treeViewMarkdownMessage.d.ts"},treeViewReveal:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.treeViewReveal.d.ts"},tunnelFactory:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.tunnelFactory.d.ts"},tunnels:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.tunnels.d.ts"},workspaceTrust:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.workspaceTrust.d.ts"}};e.allApiProposals=Object.freeze(P)}),define(le[51],he([0,1]),function(Q,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$Hi=void 0;class P{constructor(y,k=[],C=!1){this.ctor=y,this.staticArguments=k,this.supportsDelayedInstantiation=C}}e.$Hi=P}),define(le[99],he([0,1,51]),function(Q,e,P){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.InstantiationType=void 0,e.$Zs=k,e.$1s=C;const I=[];var y;(function(O){O[O.Eager=0]="Eager",O[O.Delayed=1]="Delayed"})(y||(e.InstantiationType=y={}));function k(O,g,u){g instanceof P.$Hi||(g=new P.$Hi(g,[],!!u)),I.push([O,g])}function C(){return I}}),define(le[100],he([0,1]),function(Q,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$Dr=e.$Cr=void 0;class P{constructor(k,C){this.key=k,this.data=C,this.incoming=new Map,this.outgoing=new Map}}e.$Cr=P;class I{constructor(k){this.b=k,this.a=new Map}roots(){const k=[];for(const C of this.a.values())C.outgoing.size===0&&k.push(C);return k}insertEdge(k,C){const O=this.lookupOrInsertNode(k),g=this.lookupOrInsertNode(C);O.outgoing.set(g.key,g),g.incoming.set(O.key,O)}removeNode(k){const C=this.b(k);this.a.delete(C);for(const O of this.a.values())O.outgoing.delete(C),O.incoming.delete(C)}lookupOrInsertNode(k){const C=this.b(k);let O=this.a.get(C);return O||(O=new P(C,k),this.a.set(C,O)),O}lookup(k){return this.a.get(this.b(k))}isEmpty(){return this.a.size===0}toString(){const k=[];for(const[C,O]of this.a)k.push(`${C}
	(-> incoming)[${[...O.incoming.keys()].join(", ")}]
	(outgoing ->)[${[...O.outgoing.keys()].join(",")}]
`);return k.join(`
`)}findCycleSlow(){for(const[k,C]of this.a){const O=new Set([k]),g=this.c(C,O);if(g)return g}}c(k,C){for(const[O,g]of k.outgoing){if(C.has(O))return[...C,O].join(" -> ");C.add(O);const u=this.c(g,C);if(u)return u;C.delete(O)}}}e.$Dr=I}),define(le[30],he([0,1,3,12,10]),function(Q,e,P,I,y){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ConfigurationTarget=e.$ej=void 0,e.$fj=k,e.$gj=C,e.$hj=g,e.$ij=u,e.$jj=d,e.$kj=f,e.$lj=m,e.$mj=$,e.$nj=S,e.$oj=b,P=be(P),e.$ej=(0,y.$Ki)("configurationService");function k(v){return v&&typeof v=="object"&&(!v.overrideIdentifier||typeof v.overrideIdentifier=="string")&&(!v.resource||v.resource instanceof I.URI)}function C(v){return v&&typeof v=="object"&&(!v.overrideIdentifiers||Array.isArray(v.overrideIdentifiers))&&!v.overrideIdentifier&&(!v.resource||v.resource instanceof I.URI)}var O;(function(v){v[v.APPLICATION=1]="APPLICATION",v[v.USER=2]="USER",v[v.USER_LOCAL=3]="USER_LOCAL",v[v.USER_REMOTE=4]="USER_REMOTE",v[v.WORKSPACE=5]="WORKSPACE",v[v.WORKSPACE_FOLDER=6]="WORKSPACE_FOLDER",v[v.DEFAULT=7]="DEFAULT",v[v.MEMORY=8]="MEMORY"})(O||(e.ConfigurationTarget=O={}));function g(v){switch(v){case O.APPLICATION:return"APPLICATION";case O.USER:return"USER";case O.USER_LOCAL:return"USER_LOCAL";case O.USER_REMOTE:return"USER_REMOTE";case O.WORKSPACE:return"WORKSPACE";case O.WORKSPACE_FOLDER:return"WORKSPACE_FOLDER";case O.DEFAULT:return"DEFAULT";case O.MEMORY:return"MEMORY"}}function u(v){return v.applicationValue!==void 0||v.userValue!==void 0||v.userLocalValue!==void 0||v.userRemoteValue!==void 0||v.workspaceValue!==void 0||v.workspaceFolderValue!==void 0}function d(v,h){const R=Object.create(null);for(const w in v)f(R,w,v[w],h);return R}function f(v,h,R,w){const i=h.split("."),c=i.pop();let n=v;for(let r=0;r<i.length;r++){const t=i[r];let s=n[t];switch(typeof s){case"undefined":s=n[t]=Object.create(null);break;case"object":if(s===null){w(`Ignoring ${h} as ${i.slice(0,r+1).join(".")} is null`);return}break;default:w(`Ignoring ${h} as ${i.slice(0,r+1).join(".")} is ${JSON.stringify(s)}`);return}n=s}if(typeof n=="object"&&n!==null)try{n[c]=R}catch{w(`Ignoring ${h} as ${i.join(".")} is ${JSON.stringify(n)}`)}else w(`Ignoring ${h} as ${i.join(".")} is ${JSON.stringify(n)}`)}function m(v,h){const R=h.split(".");a(v,R)}function a(v,h){const R=h.shift();if(h.length===0){delete v[R];return}if(Object.keys(v).indexOf(R)!==-1){const w=v[R];typeof w=="object"&&!Array.isArray(w)&&(a(w,h),Object.keys(w).length===0&&delete v[R])}}function $(v,h,R){function w(n,r){let t=n;for(const s of r){if(typeof t!="object"||t===null)return;t=t[s]}return t}const i=h.split("."),c=w(v,i);return typeof c>"u"?R:c}function S(v,h,R){Object.keys(h).forEach(w=>{w!=="__proto__"&&(w in v?P.$lg(v[w])&&P.$lg(h[w])?S(v[w],h[w],R):R&&(v[w]=h[w]):v[w]=h[w])})}function b(v){return v.replace(/[\[\]]/g,"")}}),define(le[101],he([0,1,93,11,31,92,10,4,7]),function(Q,e,P,I,y,k,C,O,g){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$3j=e.$2j=e.$1j=e.$Zj=e.$Yj=e.$Xj=e.$Wj=e.$Vj=e.$Uj=e.$Tj=e.$Sj=e.$Rj=e.$Qj=e.$Pj=e.$Oj=e.$Nj=e.$Mj=e.$Lj=e.$Ij=e.$Hj=e.ContextKeyExprType=void 0,e.$Gj=d,e.$Jj=r,e.$Kj=t,e.$4j=se;const u=new Map;u.set("false",!1),u.set("true",!0),u.set("isMac",I.$m),u.set("isLinux",I.$n),u.set("isWindows",I.$l),u.set("isWeb",I.$r),u.set("isMacNative",I.$m&&!I.$r),u.set("isEdge",I.$K),u.set("isFirefox",I.$I),u.set("isChrome",I.$H),u.set("isSafari",I.$J);function d(z,E){if(u.get(z)!==void 0)throw(0,g.$$)("contextkey.setConstant(k, v) invoked with already set constant `k`");u.set(z,E)}const f=Object.prototype.hasOwnProperty;var m;(function(z){z[z.False=0]="False",z[z.True=1]="True",z[z.Defined=2]="Defined",z[z.Not=3]="Not",z[z.Equals=4]="Equals",z[z.NotEquals=5]="NotEquals",z[z.And=6]="And",z[z.Regex=7]="Regex",z[z.NotRegex=8]="NotRegex",z[z.Or=9]="Or",z[z.In=10]="In",z[z.NotIn=11]="NotIn",z[z.Greater=12]="Greater",z[z.GreaterEquals=13]="GreaterEquals",z[z.Smaller=14]="Smaller",z[z.SmallerEquals=15]="SmallerEquals"})(m||(e.ContextKeyExprType=m={}));const a={regexParsingWithErrorRecovery:!0},$=(0,O.localize)(1673,null),S=(0,O.localize)(1674,null),b=(0,O.localize)(1675,null),v=(0,O.localize)(1676,null),h=(0,O.localize)(1677,null),R=(0,O.localize)(1678,null),w=(0,O.localize)(1679,null),i=(0,O.localize)(1680,null);class c{static{this.c=new Error}get lexingErrors(){return this.d.errors}get parsingErrors(){return this.h}constructor(E=a){this.k=E,this.d=new k.$Fj,this.f=[],this.g=0,this.h=[],this.v=/g|y/g}parse(E){if(E===""){this.h.push({message:$,offset:0,lexeme:"",additionalInfo:S});return}this.f=this.d.reset(E).scan(),this.g=0,this.h=[];try{const F=this.l();if(!this.E()){const J=this.D(),Z=J.type===k.TokenType.Str?R:void 0;throw this.h.push({message:h,offset:J.offset,lexeme:k.$Fj.getLexeme(J),additionalInfo:Z}),c.c}return F}catch(F){if(F!==c.c)throw F;return}}l(){return this.m()}m(){const E=[this.o()];for(;this.y(k.TokenType.Or);){const F=this.o();E.push(F)}return E.length===1?E[0]:n.or(...E)}o(){const E=[this.s()];for(;this.y(k.TokenType.And);){const F=this.s();E.push(F)}return E.length===1?E[0]:n.and(...E)}s(){if(this.y(k.TokenType.Neg)){const E=this.D();switch(E.type){case k.TokenType.True:return this.z(),o.INSTANCE;case k.TokenType.False:return this.z(),l.INSTANCE;case k.TokenType.LParen:{this.z();const F=this.l();return this.A(k.TokenType.RParen,v),F?.negate()}case k.TokenType.Str:return this.z(),j.create(E.lexeme);default:throw this.B("KEY | true | false | '(' expression ')'",E)}}return this.t()}t(){const E=this.D();switch(E.type){case k.TokenType.True:return this.z(),n.true();case k.TokenType.False:return this.z(),n.false();case k.TokenType.LParen:{this.z();const F=this.l();return this.A(k.TokenType.RParen,v),F}case k.TokenType.Str:{const F=E.lexeme;if(this.z(),this.y(k.TokenType.RegexOp)){const Z=this.D();if(!this.k.regexParsingWithErrorRecovery){if(this.z(),Z.type!==k.TokenType.RegexStr)throw this.B("REGEX",Z);const G=Z.lexeme,q=G.lastIndexOf("/"),X=q===G.length-1?void 0:this.w(G.substring(q+1));let re;try{re=new RegExp(G.substring(1,q),X)}catch{throw this.B("REGEX",Z)}return me.create(F,re)}switch(Z.type){case k.TokenType.RegexStr:case k.TokenType.Error:{const G=[Z.lexeme];this.z();let q=this.D(),X=0;for(let de=0;de<Z.lexeme.length;de++)Z.lexeme.charCodeAt(de)===P.CharCode.OpenParen?X++:Z.lexeme.charCodeAt(de)===P.CharCode.CloseParen&&X--;for(;!this.E()&&q.type!==k.TokenType.And&&q.type!==k.TokenType.Or;){switch(q.type){case k.TokenType.LParen:X++;break;case k.TokenType.RParen:X--;break;case k.TokenType.RegexStr:case k.TokenType.QuotedStr:for(let de=0;de<q.lexeme.length;de++)q.lexeme.charCodeAt(de)===P.CharCode.OpenParen?X++:Z.lexeme.charCodeAt(de)===P.CharCode.CloseParen&&X--}if(X<0)break;G.push(k.$Fj.getLexeme(q)),this.z(),q=this.D()}const re=G.join(""),ce=re.lastIndexOf("/"),fe=ce===re.length-1?void 0:this.w(re.substring(ce+1));let we;try{we=new RegExp(re.substring(1,ce),fe)}catch{throw this.B("REGEX",Z)}return n.regex(F,we)}case k.TokenType.QuotedStr:{const G=Z.lexeme;this.z();let q=null;if(!(0,y.$hf)(G)){const X=G.indexOf("/"),re=G.lastIndexOf("/");if(X!==re&&X>=0){const ce=G.slice(X+1,re),fe=G[re+1]==="i"?"i":"";try{q=new RegExp(ce,fe)}catch{throw this.B("REGEX",Z)}}}if(q===null)throw this.B("REGEX",Z);return me.create(F,q)}default:throw this.B("REGEX",this.D())}}if(this.y(k.TokenType.Not)){this.A(k.TokenType.In,b);const Z=this.u();return n.notIn(F,Z)}switch(this.D().type){case k.TokenType.Eq:{this.z();const Z=this.u();if(this.x().type===k.TokenType.QuotedStr)return n.equals(F,Z);switch(Z){case"true":return n.has(F);case"false":return n.not(F);default:return n.equals(F,Z)}}case k.TokenType.NotEq:{this.z();const Z=this.u();if(this.x().type===k.TokenType.QuotedStr)return n.notEquals(F,Z);switch(Z){case"true":return n.not(F);case"false":return n.has(F);default:return n.notEquals(F,Z)}}case k.TokenType.Lt:return this.z(),ae.create(F,this.u());case k.TokenType.LtEq:return this.z(),ue.create(F,this.u());case k.TokenType.Gt:return this.z(),Y.create(F,this.u());case k.TokenType.GtEq:return this.z(),ne.create(F,this.u());case k.TokenType.In:return this.z(),n.in(F,this.u());default:return n.has(F)}}case k.TokenType.EOF:throw this.h.push({message:w,offset:E.offset,lexeme:"",additionalInfo:i}),c.c;default:throw this.B(`true | false | KEY 
	| KEY '=~' REGEX 
	| KEY ('==' | '!=' | '<' | '<=' | '>' | '>=' | 'in' | 'not' 'in') value`,this.D())}}u(){const E=this.D();switch(E.type){case k.TokenType.Str:case k.TokenType.QuotedStr:return this.z(),E.lexeme;case k.TokenType.True:return this.z(),"true";case k.TokenType.False:return this.z(),"false";case k.TokenType.In:return this.z(),"in";default:return""}}w(E){return E.replaceAll(this.v,"")}x(){return this.f[this.g-1]}y(E){return this.C(E)?(this.z(),!0):!1}z(){return this.E()||this.g++,this.x()}A(E,F){if(this.C(E))return this.z();throw this.B(F,this.D())}B(E,F,J){const Z=(0,O.localize)(1681,null,E,k.$Fj.getLexeme(F)),G=F.offset,q=k.$Fj.getLexeme(F);return this.h.push({message:Z,offset:G,lexeme:q,additionalInfo:J}),c.c}C(E){return this.D().type===E}D(){return this.f[this.g]}E(){return this.D().type===k.TokenType.EOF}}e.$Hj=c;class n{static false(){return o.INSTANCE}static true(){return l.INSTANCE}static has(E){return p.create(E)}static equals(E,F){return A.create(E,F)}static notEquals(E,F){return D.create(E,F)}static regex(E,F){return me.create(E,F)}static in(E,F){return T.create(E,F)}static notIn(E,F){return N.create(E,F)}static not(E){return j.create(E)}static and(...E){return M.create(E,null,!0)}static or(...E){return U.create(E,null,!0)}static greater(E,F){return Y.create(E,F)}static greaterEquals(E,F){return ne.create(E,F)}static smaller(E,F){return ae.create(E,F)}static smallerEquals(E,F){return ue.create(E,F)}static{this.c=new c({regexParsingWithErrorRecovery:!1})}static deserialize(E){return E==null?void 0:this.c.parse(E)}}e.$Ij=n;function r(z){const E=new c({regexParsingWithErrorRecovery:!1});return z.map(F=>(E.parse(F),E.lexingErrors.length>0?E.lexingErrors.map(J=>({errorMessage:J.additionalInfo?(0,O.localize)(1682,null,J.additionalInfo):(0,O.localize)(1683,null),offset:J.offset,length:J.lexeme.length})):E.parsingErrors.length>0?E.parsingErrors.map(J=>({errorMessage:J.additionalInfo?`${J.message}. ${J.additionalInfo}`:J.message,offset:J.offset,length:J.lexeme.length})):[]))}function t(z,E){const F=z?z.substituteConstants():void 0,J=E?E.substituteConstants():void 0;return!F&&!J?!0:!F||!J?!1:F.equals(J)}function s(z,E){return z.cmp(E)}class o{static{this.INSTANCE=new o}constructor(){this.type=m.False}cmp(E){return this.type-E.type}equals(E){return E.type===this.type}substituteConstants(){return this}evaluate(E){return!1}serialize(){return"false"}keys(){return[]}map(E){return this}negate(){return l.INSTANCE}}e.$Lj=o;class l{static{this.INSTANCE=new l}constructor(){this.type=m.True}cmp(E){return this.type-E.type}equals(E){return E.type===this.type}substituteConstants(){return this}evaluate(E){return!0}serialize(){return"true"}keys(){return[]}map(E){return this}negate(){return o.INSTANCE}}e.$Mj=l;class p{static create(E,F=null){const J=u.get(E);return typeof J=="boolean"?J?l.INSTANCE:o.INSTANCE:new p(E,F)}constructor(E,F){this.key=E,this.c=F,this.type=m.Defined}cmp(E){return E.type!==this.type?this.type-E.type:K(this.key,E.key)}equals(E){return E.type===this.type?this.key===E.key:!1}substituteConstants(){const E=u.get(this.key);return typeof E=="boolean"?E?l.INSTANCE:o.INSTANCE:this}evaluate(E){return!!E.getValue(this.key)}serialize(){return this.key}keys(){return[this.key]}map(E){return E.mapDefined(this.key)}negate(){return this.c||(this.c=j.create(this.key,this)),this.c}}e.$Nj=p;class A{static create(E,F,J=null){if(typeof F=="boolean")return F?p.create(E,J):j.create(E,J);const Z=u.get(E);return typeof Z=="boolean"?F===(Z?"true":"false")?l.INSTANCE:o.INSTANCE:new A(E,F,J)}constructor(E,F,J){this.c=E,this.d=F,this.f=J,this.type=m.Equals}cmp(E){return E.type!==this.type?this.type-E.type:ie(this.c,this.d,E.c,E.d)}equals(E){return E.type===this.type?this.c===E.c&&this.d===E.d:!1}substituteConstants(){const E=u.get(this.c);if(typeof E=="boolean"){const F=E?"true":"false";return this.d===F?l.INSTANCE:o.INSTANCE}return this}evaluate(E){return E.getValue(this.c)==this.d}serialize(){return`${this.c} == '${this.d}'`}keys(){return[this.c]}map(E){return E.mapEquals(this.c,this.d)}negate(){return this.f||(this.f=D.create(this.c,this.d,this)),this.f}}e.$Oj=A;class T{static create(E,F){return new T(E,F)}constructor(E,F){this.d=E,this.f=F,this.type=m.In,this.c=null}cmp(E){return E.type!==this.type?this.type-E.type:ie(this.d,this.f,E.d,E.f)}equals(E){return E.type===this.type?this.d===E.d&&this.f===E.f:!1}substituteConstants(){return this}evaluate(E){const F=E.getValue(this.f),J=E.getValue(this.d);return Array.isArray(F)?F.includes(J):typeof J=="string"&&typeof F=="object"&&F!==null?f.call(F,J):!1}serialize(){return`${this.d} in '${this.f}'`}keys(){return[this.d,this.f]}map(E){return E.mapIn(this.d,this.f)}negate(){return this.c||(this.c=N.create(this.d,this.f)),this.c}}e.$Pj=T;class N{static create(E,F){return new N(E,F)}constructor(E,F){this.d=E,this.f=F,this.type=m.NotIn,this.c=T.create(E,F)}cmp(E){return E.type!==this.type?this.type-E.type:this.c.cmp(E.c)}equals(E){return E.type===this.type?this.c.equals(E.c):!1}substituteConstants(){return this}evaluate(E){return!this.c.evaluate(E)}serialize(){return`${this.d} not in '${this.f}'`}keys(){return this.c.keys()}map(E){return E.mapNotIn(this.d,this.f)}negate(){return this.c}}e.$Qj=N;class D{static create(E,F,J=null){if(typeof F=="boolean")return F?j.create(E,J):p.create(E,J);const Z=u.get(E);return typeof Z=="boolean"?F===(Z?"true":"false")?o.INSTANCE:l.INSTANCE:new D(E,F,J)}constructor(E,F,J){this.c=E,this.d=F,this.f=J,this.type=m.NotEquals}cmp(E){return E.type!==this.type?this.type-E.type:ie(this.c,this.d,E.c,E.d)}equals(E){return E.type===this.type?this.c===E.c&&this.d===E.d:!1}substituteConstants(){const E=u.get(this.c);if(typeof E=="boolean"){const F=E?"true":"false";return this.d===F?o.INSTANCE:l.INSTANCE}return this}evaluate(E){return E.getValue(this.c)!=this.d}serialize(){return`${this.c} != '${this.d}'`}keys(){return[this.c]}map(E){return E.mapNotEquals(this.c,this.d)}negate(){return this.f||(this.f=A.create(this.c,this.d,this)),this.f}}e.$Rj=D;class j{static create(E,F=null){const J=u.get(E);return typeof J=="boolean"?J?o.INSTANCE:l.INSTANCE:new j(E,F)}constructor(E,F){this.c=E,this.d=F,this.type=m.Not}cmp(E){return E.type!==this.type?this.type-E.type:K(this.c,E.c)}equals(E){return E.type===this.type?this.c===E.c:!1}substituteConstants(){const E=u.get(this.c);return typeof E=="boolean"?E?o.INSTANCE:l.INSTANCE:this}evaluate(E){return!E.getValue(this.c)}serialize(){return`!${this.c}`}keys(){return[this.c]}map(E){return E.mapNot(this.c)}negate(){return this.d||(this.d=p.create(this.c,this)),this.d}}e.$Sj=j;function x(z,E){if(typeof z=="string"){const F=parseFloat(z);isNaN(F)||(z=F)}return typeof z=="string"||typeof z=="number"?E(z):o.INSTANCE}class Y{static create(E,F,J=null){return x(F,Z=>new Y(E,Z,J))}constructor(E,F,J){this.c=E,this.d=F,this.f=J,this.type=m.Greater}cmp(E){return E.type!==this.type?this.type-E.type:ie(this.c,this.d,E.c,E.d)}equals(E){return E.type===this.type?this.c===E.c&&this.d===E.d:!1}substituteConstants(){return this}evaluate(E){return typeof this.d=="string"?!1:parseFloat(E.getValue(this.c))>this.d}serialize(){return`${this.c} > ${this.d}`}keys(){return[this.c]}map(E){return E.mapGreater(this.c,this.d)}negate(){return this.f||(this.f=ue.create(this.c,this.d,this)),this.f}}e.$Tj=Y;class ne{static create(E,F,J=null){return x(F,Z=>new ne(E,Z,J))}constructor(E,F,J){this.c=E,this.d=F,this.f=J,this.type=m.GreaterEquals}cmp(E){return E.type!==this.type?this.type-E.type:ie(this.c,this.d,E.c,E.d)}equals(E){return E.type===this.type?this.c===E.c&&this.d===E.d:!1}substituteConstants(){return this}evaluate(E){return typeof this.d=="string"?!1:parseFloat(E.getValue(this.c))>=this.d}serialize(){return`${this.c} >= ${this.d}`}keys(){return[this.c]}map(E){return E.mapGreaterEquals(this.c,this.d)}negate(){return this.f||(this.f=ae.create(this.c,this.d,this)),this.f}}e.$Uj=ne;class ae{static create(E,F,J=null){return x(F,Z=>new ae(E,Z,J))}constructor(E,F,J){this.c=E,this.d=F,this.f=J,this.type=m.Smaller}cmp(E){return E.type!==this.type?this.type-E.type:ie(this.c,this.d,E.c,E.d)}equals(E){return E.type===this.type?this.c===E.c&&this.d===E.d:!1}substituteConstants(){return this}evaluate(E){return typeof this.d=="string"?!1:parseFloat(E.getValue(this.c))<this.d}serialize(){return`${this.c} < ${this.d}`}keys(){return[this.c]}map(E){return E.mapSmaller(this.c,this.d)}negate(){return this.f||(this.f=ne.create(this.c,this.d,this)),this.f}}e.$Vj=ae;class ue{static create(E,F,J=null){return x(F,Z=>new ue(E,Z,J))}constructor(E,F,J){this.c=E,this.d=F,this.f=J,this.type=m.SmallerEquals}cmp(E){return E.type!==this.type?this.type-E.type:ie(this.c,this.d,E.c,E.d)}equals(E){return E.type===this.type?this.c===E.c&&this.d===E.d:!1}substituteConstants(){return this}evaluate(E){return typeof this.d=="string"?!1:parseFloat(E.getValue(this.c))<=this.d}serialize(){return`${this.c} <= ${this.d}`}keys(){return[this.c]}map(E){return E.mapSmallerEquals(this.c,this.d)}negate(){return this.f||(this.f=Y.create(this.c,this.d,this)),this.f}}e.$Wj=ue;class me{static create(E,F){return new me(E,F)}constructor(E,F){this.d=E,this.f=F,this.type=m.Regex,this.c=null}cmp(E){if(E.type!==this.type)return this.type-E.type;if(this.d<E.d)return-1;if(this.d>E.d)return 1;const F=this.f?this.f.source:"",J=E.f?E.f.source:"";return F<J?-1:F>J?1:0}equals(E){if(E.type===this.type){const F=this.f?this.f.source:"",J=E.f?E.f.source:"";return this.d===E.d&&F===J}return!1}substituteConstants(){return this}evaluate(E){const F=E.getValue(this.d);return this.f?this.f.test(F):!1}serialize(){const E=this.f?`/${this.f.source}/${this.f.flags}`:"/invalid/";return`${this.d} =~ ${E}`}keys(){return[this.d]}map(E){return E.mapRegex(this.d,this.f)}negate(){return this.c||(this.c=W.create(this)),this.c}}e.$Xj=me;class W{static create(E){return new W(E)}constructor(E){this.c=E,this.type=m.NotRegex}cmp(E){return E.type!==this.type?this.type-E.type:this.c.cmp(E.c)}equals(E){return E.type===this.type?this.c.equals(E.c):!1}substituteConstants(){return this}evaluate(E){return!this.c.evaluate(E)}serialize(){return`!(${this.c.serialize()})`}keys(){return this.c.keys()}map(E){return new W(this.c.map(E))}negate(){return this.c}}e.$Yj=W;function _(z){let E=null;for(let F=0,J=z.length;F<J;F++){const Z=z[F].substituteConstants();if(z[F]!==Z&&E===null){E=[];for(let G=0;G<F;G++)E[G]=z[G]}E!==null&&(E[F]=Z)}return E===null?z:E}class M{static create(E,F,J){return M.d(E,F,J)}constructor(E,F){this.expr=E,this.c=F,this.type=m.And}cmp(E){if(E.type!==this.type)return this.type-E.type;if(this.expr.length<E.expr.length)return-1;if(this.expr.length>E.expr.length)return 1;for(let F=0,J=this.expr.length;F<J;F++){const Z=s(this.expr[F],E.expr[F]);if(Z!==0)return Z}return 0}equals(E){if(E.type===this.type){if(this.expr.length!==E.expr.length)return!1;for(let F=0,J=this.expr.length;F<J;F++)if(!this.expr[F].equals(E.expr[F]))return!1;return!0}return!1}substituteConstants(){const E=_(this.expr);return E===this.expr?this:M.create(E,this.c,!1)}evaluate(E){for(let F=0,J=this.expr.length;F<J;F++)if(!this.expr[F].evaluate(E))return!1;return!0}static d(E,F,J){const Z=[];let G=!1;for(const q of E)if(q){if(q.type===m.True){G=!0;continue}if(q.type===m.False)return o.INSTANCE;if(q.type===m.And){Z.push(...q.expr);continue}Z.push(q)}if(Z.length===0&&G)return l.INSTANCE;if(Z.length!==0){if(Z.length===1)return Z[0];Z.sort(s);for(let q=1;q<Z.length;q++)Z[q-1].equals(Z[q])&&(Z.splice(q,1),q--);if(Z.length===1)return Z[0];for(;Z.length>1;){const q=Z[Z.length-1];if(q.type!==m.Or)break;Z.pop();const X=Z.pop(),re=Z.length===0,ce=U.create(q.expr.map(fe=>M.create([fe,X],null,J)),null,re);ce&&(Z.push(ce),Z.sort(s))}if(Z.length===1)return Z[0];if(J){for(let q=0;q<Z.length;q++)for(let X=q+1;X<Z.length;X++)if(Z[q].negate().equals(Z[X]))return o.INSTANCE;if(Z.length===1)return Z[0]}return new M(Z,F)}}serialize(){return this.expr.map(E=>E.serialize()).join(" && ")}keys(){const E=[];for(const F of this.expr)E.push(...F.keys());return E}map(E){return new M(this.expr.map(F=>F.map(E)),null)}negate(){if(!this.c){const E=[];for(const F of this.expr)E.push(F.negate());this.c=U.create(E,this,!0)}return this.c}}e.$Zj=M;class U{static create(E,F,J){return U.d(E,F,J)}constructor(E,F){this.expr=E,this.c=F,this.type=m.Or}cmp(E){if(E.type!==this.type)return this.type-E.type;if(this.expr.length<E.expr.length)return-1;if(this.expr.length>E.expr.length)return 1;for(let F=0,J=this.expr.length;F<J;F++){const Z=s(this.expr[F],E.expr[F]);if(Z!==0)return Z}return 0}equals(E){if(E.type===this.type){if(this.expr.length!==E.expr.length)return!1;for(let F=0,J=this.expr.length;F<J;F++)if(!this.expr[F].equals(E.expr[F]))return!1;return!0}return!1}substituteConstants(){const E=_(this.expr);return E===this.expr?this:U.create(E,this.c,!1)}evaluate(E){for(let F=0,J=this.expr.length;F<J;F++)if(this.expr[F].evaluate(E))return!0;return!1}static d(E,F,J){let Z=[],G=!1;if(E){for(let q=0,X=E.length;q<X;q++){const re=E[q];if(re){if(re.type===m.False){G=!0;continue}if(re.type===m.True)return l.INSTANCE;if(re.type===m.Or){Z=Z.concat(re.expr);continue}Z.push(re)}}if(Z.length===0&&G)return o.INSTANCE;Z.sort(s)}if(Z.length!==0){if(Z.length===1)return Z[0];for(let q=1;q<Z.length;q++)Z[q-1].equals(Z[q])&&(Z.splice(q,1),q--);if(Z.length===1)return Z[0];if(J){for(let q=0;q<Z.length;q++)for(let X=q+1;X<Z.length;X++)if(Z[q].negate().equals(Z[X]))return l.INSTANCE;if(Z.length===1)return Z[0]}return new U(Z,F)}}serialize(){return this.expr.map(E=>E.serialize()).join(" || ")}keys(){const E=[];for(const F of this.expr)E.push(...F.keys());return E}map(E){return new U(this.expr.map(F=>F.map(E)),null)}negate(){if(!this.c){const E=[];for(const F of this.expr)E.push(F.negate());for(;E.length>1;){const F=E.shift(),J=E.shift(),Z=[];for(const G of V(F))for(const q of V(J))Z.push(M.create([G,q],null,!1));E.unshift(U.create(Z,null,!1))}this.c=U.create(E,this,!0)}return this.c}}e.$1j=U;class H extends p{static{this.d=[]}static all(){return H.d.values()}constructor(E,F,J){super(E,null),this.f=F,typeof J=="object"?H.d.push({...J,key:E}):J!==!0&&H.d.push({key:E,description:J,type:F!=null?typeof F:void 0})}bindTo(E){return E.createKey(this.key,this.f)}getValue(E){return E.getContextKeyValue(this.key)}toNegated(){return this.negate()}isEqualTo(E){return A.create(this.key,E)}notEqualsTo(E){return D.create(this.key,E)}}e.$2j=H,e.$3j=(0,C.$Ki)("contextKeyService");function K(z,E){return z<E?-1:z>E?1:0}function ie(z,E,F,J){return z<F?-1:z>F?1:E<J?-1:E>J?1:0}function se(z,E){if(z.type===m.False||E.type===m.True)return!0;if(z.type===m.Or)return E.type===m.Or?L(z.expr,E.expr):!1;if(E.type===m.Or){for(const F of E.expr)if(se(z,F))return!0;return!1}if(z.type===m.And){if(E.type===m.And)return L(E.expr,z.expr);for(const F of z.expr)if(se(F,E))return!0;return!1}return z.equals(E)}function L(z,E){let F=0,J=0;for(;F<z.length&&J<E.length;){const Z=z[F].cmp(E[J]);if(Z<0)return!1;Z===0&&F++,J++}return F===z.length}function V(z){return z.type===m.Or?z.expr:[z]}}),define(le[62],he([0,1,10]),function(Q,e,P){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$8o=void 0,e.$8o=(0,P.$Ki)("downloadService")}),define(le[17],he([0,1,10]),function(Q,e,P){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$Si=e.$Ri=void 0,e.$Ri=(0,P.$Ki)("environmentService"),e.$Si=(0,P.$Li)(e.$Ri)}),define(le[63],he([0,1,13,7,4,9]),function(Q,e,P,I,y,k){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$0q=C;async function C(d,f,m,a,$,S){let b;try{await O(d,f,m,a,$,S)}catch(v){b=v}finally{b&&$.errorTransformer&&(b=$.errorTransformer(b)),typeof b<"u"&&m.error(b),m.end()}}async function O(d,f,m,a,$,S){g(S);const b=await d.open(f,{create:!1});try{g(S);let v=0,h=0,R=$&&typeof $.length=="number"?$.length:void 0,w=P.$Se.alloc(Math.min($.bufferSize,typeof R=="number"?R:$.bufferSize)),i=$&&typeof $.position=="number"?$.position:0,c=0;do h=await d.read(b,i,w.buffer,c,w.byteLength-c),i+=h,c+=h,v+=h,typeof R=="number"&&(R-=h),c===w.byteLength&&(await m.write(a(w)),w=P.$Se.alloc(Math.min($.bufferSize,typeof R=="number"?R:$.bufferSize)),c=0);while(h>0&&(typeof R!="number"||R>0)&&g(S)&&u(v,$));if(c>0){let n=c;typeof R=="number"&&(n=Math.min(c,R)),m.write(a(w.slice(0,n)))}}catch(v){throw(0,k.$tl)(v)}finally{await d.close(b)}}function g(d){if(d.isCancellationRequested)throw(0,I.$0)();return!0}function u(d,f){if(typeof f?.limits?.size=="number"&&d>f.limits.size)throw(0,k.$sl)((0,y.localize)(1898,null),k.FileSystemProviderErrorCode.FileTooLarge);return!0}}),define(le[102],he([0,1,32,2,52,5,9,12,8]),function(Q,e,P,I,y,k,C,O,g){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$sr=void 0;class u extends I.$Zc{constructor(){super(),this.a=this.B(new k.$qe),this.onDidChangeFile=this.a.event,this.b=this.B(new k.$qe),this.onDidLogMessage=this.b.event,this.c=this.B(new k.$qe),this.f=this.c.event,this.g=new Set,this.h=new Map,this.j=this.B(new I.$9c),this.m=new Set,this.n=this.B(new g.$Ih(this.y())),this.r=5007,this.s=new g.$8h,this.R=!1,this.B(this.f(f=>this.t(f)))}t(f){this.u(f)&&this.z(f)}u(f){return(0,y.$_q)(f)}async watch(f){this.s.isSettled||this.s.complete(),this.s=new g.$8h;try{this.h.clear(),this.g.clear();for(const m of f)this.u(m)?this.h.set(m.correlationId,m):this.g.add(m);for(const[m]of this.j)this.h.has(m)||(this.j.deleteAndDispose(m),this.m.delete(m));return await this.w(!1)}finally{this.s.complete()}}w(f){return this.n.trigger(()=>this.N([...this.g,...Array.from(this.h.values()).filter(m=>!this.j.has(m.correlationId))]),f?this.y():0)}y(){return 800}isSuspended(f){return typeof f.correlationId!="number"?!1:this.m.has(f.correlationId)?"polling":this.j.has(f.correlationId)}async z(f){if(this.j.has(f.correlationId))return;const m=new I.$Yc;this.j.set(f.correlationId,m),await this.s.p,!m.isDisposed&&(this.D(f,m),this.w(!0))}C(f){this.j.deleteAndDispose(f.correlationId),this.m.delete(f.correlationId),this.w(!1)}D(f,m){this.F(f,m)?(this.P(`reusing an existing recursive watcher to monitor ${f.path}`),this.m.delete(f.correlationId)):(this.G(f,m),this.m.add(f.correlationId))}F(f,m){const a=this.O?.subscribe(f.path,($,S)=>{m.isDisposed||($?this.D(f,m):S?.type===C.FileChangeType.ADDED&&this.H(f))});return a?(m.add(a),!0):!1}G(f,m){let a=!1;const $=(S,b)=>{if(m.isDisposed)return;const v=this.I(S),h=this.I(b),R=a;a=v,!v&&(h||R)&&this.H(f)};this.P(`starting fs.watchFile() on ${f.path} (correlationId: ${f.correlationId})`);try{(0,P.watchFile)(f.path,{persistent:!1,interval:this.r},$)}catch(S){this.Q(`fs.watchFile() failed with error ${S} on path ${f.path} (correlationId: ${f.correlationId})`)}m.add((0,I.$Xc)(()=>{this.P(`stopping fs.watchFile() on ${f.path} (correlationId: ${f.correlationId})`);try{(0,P.unwatchFile)(f.path,$)}catch(S){this.Q(`fs.unwatchFile() failed with error ${S} on path ${f.path} (correlationId: ${f.correlationId})`)}}))}H(f){this.P(`detected ${f.path} exists again, resuming watcher (correlationId: ${f.correlationId})`);const m={resource:O.URI.file(f.path),type:C.FileChangeType.ADDED,cId:f.correlationId};this.a.fire([m]),this.J(m,f),this.C(f)}I(f){return f.ctimeMs===0&&f.ino===0}async stop(){this.j.clearAndDisposeAll(),this.m.clear()}J(f,m){if(this.R){const a=` >> normalized ${f.type===C.FileChangeType.ADDED?"[ADDED]":f.type===C.FileChangeType.DELETED?"[DELETED]":"[CHANGED]"} ${f.resource.fsPath}`;this.L(a,m)}}L(f,m){this.R&&this.P(`${f}${typeof m.correlationId=="number"?` <${m.correlationId}> `:""}`)}M(f){return`${f.path} (excludes: ${f.excludes.length>0?f.excludes:"<none>"}, includes: ${f.includes&&f.includes.length>0?JSON.stringify(f.includes):"<all>"}, filter: ${(0,y.$jr)(f.filter)}, correlationId: ${typeof f.correlationId=="number"?f.correlationId:"<none>"})`}async setVerboseLogging(f){this.R=f}}e.$sr=u}),define(le[103],he([0,1,5,150,102,11,151,64]),function(Q,e,P,I,y,k,C,O){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$zr=void 0;class g extends y.$sr{constructor(d){super(),this.O=d,this.onDidError=P.Event.None,this.watchers=new Set}async N(d){d=this.Z(d);const f=[],m=new Set(Array.from(this.watchers));for(const a of d){const $=this.W(a);$&&(0,I.$Jk)($.request.excludes,a.excludes)&&(0,I.$Jk)($.request.includes,a.includes)?m.delete($):f.push(a)}f.length&&this.P(`Request to start watching: ${f.map(a=>this.M(a)).join(",")}`),m.size&&this.P(`Request to stop watching: ${Array.from(m).map(a=>this.M(a.request)).join(",")}`);for(const a of m)this.Y(a);for(const a of f)this.X(a)}W(d){for(const f of this.watchers)if(typeof d.correlationId=="number"||typeof f.request.correlationId=="number"){if(f.request.correlationId===d.correlationId)return f}else if((0,O.$Ig)(f.request.path,d.path,!k.$n))return f}X(d){const f=new C.$xr(d,this.O,a=>this.a.fire(a),()=>this.c.fire(d),a=>this.b.fire(a),this.R),m={request:d,instance:f};this.watchers.add(m)}async stop(){await super.stop();for(const d of this.watchers)this.Y(d)}Y(d){this.P("stopping file watcher",d),this.watchers.delete(d),d.instance.dispose()}Z(d){const f=new Map;for(const m of d){const a=k.$n?m.path:m.path.toLowerCase();let $=f.get(m.correlationId);$||($=new Map,f.set(m.correlationId,$)),$.has(a)&&this.P(`ignoring a request for watching who's path is already watched: ${this.M(m)}`),$.set(a,m)}return Array.from(f.values()).map(m=>Array.from(m.values())).flat()}async setVerboseLogging(d){super.setVerboseLogging(d);for(const f of this.watchers)f.instance.setVerboseLogging(d)}P(d,f){this.R&&this.b.fire({type:"trace",message:this.bb(d,f)})}Q(d){this.b.fire({type:"warn",message:this.bb(d)})}bb(d,f){return f?`[File Watcher (node.js)] ${d} (${this.M(f.request)})`:`[File Watcher (node.js)] ${d}`}}e.$zr=g}),define(le[104],he([0,1,52,103]),function(Q,e,P,I){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$Ar=void 0;class y extends P.$cr{constructor(C,O,g){super(C,O,g),this.s()}r(C){return C.add(new I.$zr(void 0))}}e.$Ar=y}),define(le[105],he([0,1,14,60,90,52]),function(Q,e,P,I,y,k){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$rr=void 0;class C extends k.$dr{constructor(g,u,d){super(g,u,d),this.s()}r(g){const u=g.add(new y.$qr(P.$5g.asFileUri("bootstrap-fork").fsPath,{serverName:"File Watcher",args:["--type=fileWatcher"],env:{VSCODE_AMD_ENTRYPOINT:"vs/platform/files/node/watcher/watcherMain",VSCODE_PIPE_LOGGING:"true",VSCODE_VERBOSE_LOGGING:"true"}}));return g.add(u.onDidProcessExit(({code:d,signal:f})=>this.t(`terminated by itself with code ${d}, signal: ${f} (ETERM)`))),I.ProxyChannel.toService((0,I.$ri)(u.getChannel("watcher")))}}e.$rr=C}),define(le[65],he([0,1]),function(Q,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$Ii=void 0;class P{constructor(...y){this.a=new Map;for(const[k,C]of y)this.set(k,C)}set(y,k){const C=this.a.get(y);return this.a.set(y,k),C}has(y){return this.a.has(y)}get(y){return this.a.get(y)}}e.$Ii=P}),define(le[106],he([0,1,8,7,2,51,100,10,65,152]),function(Q,e,P,I,y,k,C,O,g,u){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$Fr=e.$Er=void 0;const d=!1;class f extends Error{constructor(b){super("cyclic dependency between services"),this.message=b.findCycleSlow()??`UNABLE to detect cycle, dumping graph: 
${b.toString()}`}}class m{constructor(b=new g.$Ii,v=!1,h,R=d){this.i=b,this.j=v,this.k=h,this.l=R,this.f=!1,this.g=new Set,this.h=new Set,this.t=new Set,this.i.set(O.$Ji,this),this._globalGraph=R?h?._globalGraph??new C.$Dr(w=>w):void 0}dispose(){if(!this.f){this.f=!0,(0,y.$Uc)(this.h),this.h.clear();for(const b of this.g)(0,y.$Tc)(b)&&b.dispose();this.g.clear()}}m(){if(this.f)throw new Error("InstantiationService has been disposed")}createChild(b,v){this.m();const h=this,R=new class extends m{dispose(){h.h.delete(R),super.dispose()}}(b,this.j,this,this.l);return this.h.add(R),v?.add(R),R}invokeFunction(b,...v){this.m();const h=$.traceInvocation(this.l,b);let R=!1;try{return b({get:i=>{if(R)throw(0,I.$_)("service accessor is only valid during the invocation of its target method");const c=this.s(i,h);if(!c)throw new Error(`[invokeFunction] unknown service '${i}'`);return c}},...v)}finally{R=!0,h.stop()}}createInstance(b,...v){this.m();let h,R;return b instanceof k.$Hi?(h=$.traceCreation(this.l,b.ctor),R=this.o(b.ctor,b.staticArguments.concat(v),h)):(h=$.traceCreation(this.l,b),R=this.o(b,v,h)),h.stop(),R}o(b,v=[],h){const R=O._util.getServiceDependencies(b).sort((c,n)=>c.index-n.index),w=[];for(const c of R){const n=this.s(c.id,h);n||this.y(`[createInstance] ${b.name} depends on UNKNOWN service ${c.id}.`,!1),w.push(n)}const i=R.length>0?R[0].index:v.length;if(v.length!==i){console.trace(`[createInstance] First service dependency of ${b.name} at position ${i+1} conflicts with ${v.length} static arguments`);const c=i-v.length;c>0?v=v.concat(new Array(c)):v=v.slice(0,i)}return Reflect.construct(b,v.concat(w))}q(b,v){if(this.i.get(b)instanceof k.$Hi)this.i.set(b,v);else if(this.k)this.k.q(b,v);else throw new Error("illegalState - setting UNKNOWN service instance")}r(b){const v=this.i.get(b);return!v&&this.k?this.k.r(b):v}s(b,v){this._globalGraph&&this.c&&this._globalGraph.insertEdge(this.c,String(b));const h=this.r(b);return h instanceof k.$Hi?this.u(b,h,v.branch(b,!0)):(v.branch(b,!1),h)}u(b,v,h){if(this.t.has(b))throw new Error(`illegal state - RECURSIVELY instantiating service '${b}'`);this.t.add(b);try{return this.v(b,v,h)}finally{this.t.delete(b)}}v(b,v,h){const R=new C.$Dr(n=>n.id.toString());let w=0;const i=[{id:b,desc:v,_trace:h}],c=new Set;for(;i.length;){const n=i.pop();if(!c.has(String(n.id))){if(c.add(String(n.id)),R.lookupOrInsertNode(n),w++>1e3)throw new f(R);for(const r of O._util.getServiceDependencies(n.desc.ctor)){const t=this.r(r.id);if(t||this.y(`[createInstance] ${b} depends on ${r.id} which is NOT registered.`,!0),this._globalGraph?.insertEdge(String(n.id),String(r.id)),t instanceof k.$Hi){const s={id:r.id,desc:t,_trace:n._trace.branch(r.id,!0)};R.insertEdge(n,s),i.push(s)}}}}for(;;){const n=R.roots();if(n.length===0){if(!R.isEmpty())throw new f(R);break}for(const{data:r}of n){if(this.r(r.id)instanceof k.$Hi){const s=this.w(r.id,r.desc.ctor,r.desc.staticArguments,r.desc.supportsDelayedInstantiation,r._trace);this.q(r.id,s)}R.removeNode(r)}}return this.r(b)}w(b,v,h=[],R,w){if(this.i.get(b)instanceof k.$Hi)return this.x(b,v,h,R,w,this.g);if(this.k)return this.k.w(b,v,h,R,w);throw new Error(`illegalState - creating UNKNOWN service instance ${v.name}`)}x(b,v,h=[],R,w,i){if(R){const c=new m(void 0,this.j,this,this.l);c.c=String(b);const n=new Map,r=new P.$4h(()=>{const t=c.o(v,h,w);for(const[s,o]of n){const l=t[s];if(typeof l=="function")for(const p of o)p.disposable=l.apply(t,p.listener)}return n.clear(),i.add(t),t});return new Proxy(Object.create(null),{get(t,s){if(!r.isInitialized&&typeof s=="string"&&(s.startsWith("onDid")||s.startsWith("onWill"))){let p=n.get(s);return p||(p=new u.$0c,n.set(s,p)),(T,N,D)=>{if(r.isInitialized)return r.value[s](T,N,D);{const j={listener:[T,N,D],disposable:void 0},x=p.push(j);return(0,y.$Xc)(()=>{x(),j.disposable?.dispose()})}}}if(s in t)return t[s];const o=r.value;let l=o[s];return typeof l!="function"||(l=l.bind(o),t[s]=l),l},set(t,s,o){return r.value[s]=o,!0},getPrototypeOf(t){return v.prototype}})}else{const c=this.o(v,h,w);return i.add(c),c}}y(b,v){if(v&&console.warn(b),this.j)throw new Error(b)}}e.$Er=m;var a;(function(S){S[S.None=0]="None",S[S.Creation=1]="Creation",S[S.Invocation=2]="Invocation",S[S.Branch=3]="Branch"})(a||(a={}));class ${static{this.all=new Set}static{this.c=new class extends ${constructor(){super(a.None,null)}stop(){}branch(){return this}}}static traceInvocation(b,v){return b?new $(a.Invocation,v.name||new Error().stack.split(`
`).slice(3,4).join(`
`)):$.c}static traceCreation(b,v){return b?new $(a.Creation,v.name):$.c}static{this.f=0}constructor(b,v){this.type=b,this.name=v,this.g=Date.now(),this.h=[]}branch(b,v){const h=new $(a.Branch,b.toString());return this.h.push([b,v,h]),h}stop(){const b=Date.now()-this.g;$.f+=b;let v=!1;function h(w,i){const c=[],n=new Array(w+1).join("	");for(const[r,t,s]of i.h)if(t&&s){v=!0,c.push(`${n}CREATES -> ${r}`);const o=h(w+1,s);o&&c.push(o)}else c.push(`${n}uses -> ${r}`);return c.join(`
`)}const R=[`${this.type===a.Creation?"CREATE":"CALL"} ${this.name}`,`${h(1,this)}`,`DONE, took ${b.toFixed(2)}ms (grand total ${$.f.toFixed(2)}ms)`];(b>2||v)&&$.all.add(R.join(`
`))}}e.$Fr=$}),define(le[6],he([0,1,4,38,5,43,2,25,11,16,3,12,101,10]),function(Q,e,P,I,y,k,C,O,g,u,d,f,m,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$xk=e.$sk=e.$rk=e.$qk=e.$pk=e.$ok=e.$nk=e.$mk=e.$lk=e.$kk=e.$ik=e.LogLevel=e.$gk=e.$fk=void 0,e.$hk=S,e.log=v,e.$tk=l,e.$uk=p,e.$vk=A,e.$wk=T,P=be(P),e.$fk=(0,a.$Ki)("logService"),e.$gk=(0,a.$Ki)("loggerService");function $(){return new Date().toISOString()}function S(N){return(0,d.$ng)(N)}var b;(function(N){N[N.Off=0]="Off",N[N.Trace=1]="Trace",N[N.Debug=2]="Debug",N[N.Info=3]="Info",N[N.Warning=4]="Warning",N[N.Error=5]="Error"})(b||(e.LogLevel=b={})),e.$ik=b.Info;function v(N,D,j){switch(D){case b.Trace:N.trace(j);break;case b.Debug:N.debug(j);break;case b.Info:N.info(j);break;case b.Warning:N.warn(j);break;case b.Error:N.error(j);break;case b.Off:break;default:throw new Error(`Invalid log level ${D}`)}}function h(N,D=!1){let j="";for(let x=0;x<N.length;x++){let Y=N[x];if(Y instanceof Error&&(Y=(0,I.$vj)(Y,D)),typeof Y=="object")try{Y=JSON.stringify(Y)}catch{}j+=(x>0?" ":"")+Y}return j}class R extends C.$Zc{constructor(){super(...arguments),this.b=e.$ik,this.c=this.B(new y.$qe),this.onDidChangeLogLevel=this.c.event}setLevel(D){this.b!==D&&(this.b=D,this.c.fire(this.b))}getLevel(){return this.b}f(D){return this.b!==b.Off&&this.b<=D}}e.$kk=R;class w extends R{constructor(D){super(),this.h=D}f(D){return this.h||super.f(D)}trace(D,...j){this.f(b.Trace)&&this.g(b.Trace,h([D,...j],!0))}debug(D,...j){this.f(b.Debug)&&this.g(b.Debug,h([D,...j]))}info(D,...j){this.f(b.Info)&&this.g(b.Info,h([D,...j]))}warn(D,...j){this.f(b.Warning)&&this.g(b.Warning,h([D,...j]))}error(D,...j){if(this.f(b.Error))if(D instanceof Error){const x=Array.prototype.slice.call(arguments);x[0]=D.stack,this.g(b.Error,h(x))}else this.g(b.Error,h([D,...j]))}flush(){}}e.$lk=w;class i extends R{constructor(D=e.$ik){super(),this.setLevel(D),this.g=!g.$l}trace(D,...j){this.f(b.Trace)&&(this.g?console.log(`\x1B[90m[main ${$()}]\x1B[0m`,D,...j):console.log(`[main ${$()}]`,D,...j))}debug(D,...j){this.f(b.Debug)&&(this.g?console.log(`\x1B[90m[main ${$()}]\x1B[0m`,D,...j):console.log(`[main ${$()}]`,D,...j))}info(D,...j){this.f(b.Info)&&(this.g?console.log(`\x1B[90m[main ${$()}]\x1B[0m`,D,...j):console.log(`[main ${$()}]`,D,...j))}warn(D,...j){this.f(b.Warning)&&(this.g?console.warn(`\x1B[93m[main ${$()}]\x1B[0m`,D,...j):console.warn(`[main ${$()}]`,D,...j))}error(D,...j){this.f(b.Error)&&(this.g?console.error(`\x1B[91m[main ${$()}]\x1B[0m`,D,...j):console.error(`[main ${$()}]`,D,...j))}flush(){}}e.$mk=i;class c extends R{constructor(D=e.$ik,j=!0){super(),this.g=j,this.setLevel(D)}trace(D,...j){this.f(b.Trace)&&(this.g?console.log("%cTRACE","color: #888",D,...j):console.log(D,...j))}debug(D,...j){this.f(b.Debug)&&(this.g?console.log("%cDEBUG","background: #eee; color: #888",D,...j):console.log(D,...j))}info(D,...j){this.f(b.Info)&&(this.g?console.log("%c INFO","color: #33f",D,...j):console.log(D,...j))}warn(D,...j){this.f(b.Warning)&&(this.g?console.log("%c WARN","color: #993",D,...j):console.log(D,...j))}error(D,...j){this.f(b.Error)&&(this.g?console.log("%c  ERR","color: #f33",D,...j):console.error(D,...j))}flush(){}}e.$nk=c;class n extends R{constructor(D,j=e.$ik){super(),this.g=D,this.setLevel(j)}trace(D,...j){this.f(b.Trace)&&this.g.log(b.Trace,[this.h(D),...j])}debug(D,...j){this.f(b.Debug)&&this.g.log(b.Debug,[this.h(D),...j])}info(D,...j){this.f(b.Info)&&this.g.log(b.Info,[this.h(D),...j])}warn(D,...j){this.f(b.Warning)&&this.g.log(b.Warning,[this.h(D),...j])}error(D,...j){this.f(b.Error)&&this.g.log(b.Error,[this.h(D),...j])}h(D){return typeof D=="string"?D:(0,I.$vj)(D,this.f(b.Trace))}flush(){}}e.$ok=n;class r extends R{constructor(D){super(),this.g=D,D.length&&this.setLevel(D[0].getLevel())}setLevel(D){for(const j of this.g)j.setLevel(D);super.setLevel(D)}trace(D,...j){for(const x of this.g)x.trace(D,...j)}debug(D,...j){for(const x of this.g)x.debug(D,...j)}info(D,...j){for(const x of this.g)x.info(D,...j)}warn(D,...j){for(const x of this.g)x.warn(D,...j)}error(D,...j){for(const x of this.g)x.error(D,...j)}flush(){for(const D of this.g)D.flush()}dispose(){for(const D of this.g)D.dispose();super.dispose()}}e.$pk=r;class t extends C.$Zc{constructor(D,j,x){if(super(),this.h=D,this.j=j,this.b=new O.$Fc,this.c=this.B(new y.$qe),this.onDidChangeLoggers=this.c.event,this.f=this.B(new y.$qe),this.onDidChangeLogLevel=this.f.event,this.g=this.B(new y.$qe),this.onDidChangeVisibility=this.g.event,x)for(const Y of x)this.b.set(Y.resource,{logger:void 0,info:Y})}m(D){return(0,d.$jg)(D)?[...this.b.values()].find(j=>j.info.id===D):this.b.get(D)}getLogger(D){return this.m(D)?.logger}createLogger(D,j){const x=this.n(D),Y=(0,d.$jg)(D)?D:j?.id??(0,k.$yj)(x.toString()).toString(16);let ne=this.b.get(x)?.logger;const ae=j?.logLevel==="always"?b.Trace:j?.logLevel;ne||(ne=this.s(x,ae??this.getLogLevel(x)??this.h,{...j,id:Y}));const ue={logger:ne,info:{resource:x,id:Y,logLevel:ae,name:j?.name,hidden:j?.hidden,extensionId:j?.extensionId,when:j?.when}};return this.registerLogger(ue.info),this.b.set(x,ue),ne}n(D){return(0,d.$jg)(D)?(0,u.$lh)(this.j,`${D}.log`):D}setLogLevel(D,j){if(f.URI.isUri(D)){const x=D,Y=j,ne=this.b.get(x);ne&&Y!==ne.info.logLevel&&(ne.info.logLevel=Y===this.h?void 0:Y,ne.logger?.setLevel(Y),this.b.set(ne.info.resource,ne),this.f.fire([x,Y]))}else{this.h=D;for(const[x,Y]of this.b.entries())this.b.get(x)?.info.logLevel===void 0&&Y.logger?.setLevel(this.h);this.f.fire(this.h)}}setVisibility(D,j){const x=this.m(D);x&&j!==!x.info.hidden&&(x.info.hidden=!j,this.b.set(x.info.resource,x),this.g.fire([x.info.resource,j]))}getLogLevel(D){let j;return D&&(j=this.b.get(D)?.info.logLevel),j??this.h}registerLogger(D){const j=this.b.get(D.resource);j?j.info.hidden!==D.hidden&&this.setVisibility(D.resource,!D.hidden):(this.b.set(D.resource,{info:D,logger:void 0}),this.c.fire({added:[D],removed:[]}))}deregisterLogger(D){const j=this.b.get(D);j&&(j.logger&&j.logger.dispose(),this.b.delete(D),this.c.fire({added:[],removed:[j.info]}))}*getRegisteredLoggers(){for(const D of this.b.values())yield D.info}getRegisteredLogger(D){return this.b.get(D)?.info}dispose(){this.b.forEach(D=>D.logger?.dispose()),this.b.clear(),super.dispose()}}e.$qk=t;class s{constructor(){this.onDidChangeLogLevel=new y.$qe().event}setLevel(D){}getLevel(){return b.Info}trace(D,...j){}debug(D,...j){}info(D,...j){}warn(D,...j){}error(D,...j){}critical(D,...j){}dispose(){}flush(){}}e.$rk=s;class o extends s{}e.$sk=o;function l(N){if(N.verbose)return b.Trace;if(typeof N.logLevel=="string"){const D=T(N.logLevel.toLowerCase());if(D!==void 0)return D}return e.$ik}function p(N){switch(N){case b.Trace:return"trace";case b.Debug:return"debug";case b.Info:return"info";case b.Warning:return"warn";case b.Error:return"error";case b.Off:return"off"}}function A(N){switch(N){case b.Trace:return{original:"Trace",value:P.localize(1959,null)};case b.Debug:return{original:"Debug",value:P.localize(1960,null)};case b.Info:return{original:"Info",value:P.localize(1961,null)};case b.Warning:return{original:"Warning",value:P.localize(1962,null)};case b.Error:return{original:"Error",value:P.localize(1963,null)};case b.Off:return{original:"Off",value:P.localize(1964,null)}}}function T(N){switch(N){case"trace":return b.Trace;case"debug":return b.Debug;case"info":return b.Info;case"warn":return b.Warning;case"error":return b.Error;case"critical":return b.Error;case"off":return b.Off}}e.$xk=new m.$2j("logLevel",p(b.Info))}),define(le[107],he([0,1,19,8,7,5,64,2,15,52,6]),function(Q,e,P,I,y,k,C,O,g,u,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$kr=void 0;class f extends O.$Zc{constructor(a,$){super(),this.a=a,this.b=$,this.c=this.B(new k.$qe),this.onDidChangeFile=this.c.event,this.g=this.B(new k.$qe),this.onDidWatchError=this.g.event,this.j=[],this.m=this.B(new I.$Ih(0)),this.w=[],this.y=this.B(new I.$Ih(0))}watch(a,$){return $.recursive||this.b?.watcher?.forceUniversal?this.n(a,$):this.z(a,$)}n(a,$){const S={path:this.J(a),excludes:$.excludes,includes:$.includes,recursive:$.recursive,filter:$.filter,correlationId:$.correlationId},b=(0,P.$Xb)(this.j,S);return this.r(),(0,O.$Xc)(()=>{b(),this.r()})}r(){this.m.trigger(()=>this.s()).catch(a=>(0,y.$4)(a))}s(){this.h||(this.h=this.B(this.t($=>this.c.fire((0,u.$er)($)),$=>this.G($),this.a.getLevel()===d.LogLevel.Trace)),this.B(this.a.onDidChangeLogLevel(()=>{this.h?.setVerboseLogging(this.a.getLevel()===d.LogLevel.Trace)})));const a=this.b?.watcher?.recursive?.usePolling;if(a===!0)for(const $ of this.j)(0,u.$ar)($)&&($.pollingInterval=this.b?.watcher?.recursive?.pollingInterval??5e3);else if(Array.isArray(a))for(const $ of this.j)(0,u.$ar)($)&&a.includes($.path)&&($.pollingInterval=this.b?.watcher?.recursive?.pollingInterval??5e3);return this.h.watch(this.j)}z(a,$){const S={path:this.J(a),excludes:$.excludes,includes:$.includes,recursive:!1,filter:$.filter,correlationId:$.correlationId},b=(0,P.$Xb)(this.w,S);return this.C(),(0,O.$Xc)(()=>{b(),this.C()})}C(){this.y.trigger(()=>this.D()).catch(a=>(0,y.$4)(a))}D(){return this.u||(this.u=this.B(this.F(a=>this.c.fire((0,u.$er)(a)),a=>this.G(a),this.a.getLevel()===d.LogLevel.Trace)),this.B(this.a.onDidChangeLogLevel(()=>{this.u?.setVerboseLogging(this.a.getLevel()===d.LogLevel.Trace)}))),this.u.watch(this.w)}G(a){a.type==="error"&&this.g.fire(a.message),this.H(a)}H(a){this.a[a.type](a.message)}I(a){return(0,g.$mc)(a.fsPath)}J(a){const $=this.I(a);return(0,C.$Mg)($)}}e.$kr=f});var oe=this&&this.__param||function(Q,e){return function(P,I){e(P,I,Q)}};define(le[108],he([0,1,19,8,13,21,5,43,66,2,49,14,109,16,47,4,9,63,6,7]),function(Q,e,P,I,y,k,C,O,g,u,d,f,m,a,$,S,b,v,h,R){"use strict";var w;Object.defineProperty(e,"__esModule",{value:!0}),e.$$q=void 0;let i=class extends u.$Zc{static{w=this}constructor(n){super(),this.b=n,this.a=256*1024,this.c=this.B(new C.$qe),this.onDidChangeFileSystemProviderRegistrations=this.c.event,this.f=this.B(new C.$qe),this.onWillActivateFileSystemProvider=this.f.event,this.g=this.B(new C.$qe),this.onDidChangeFileSystemProviderCapabilities=this.g.event,this.h=new Map,this.r=this.B(new C.$qe),this.onDidRunOperation=this.r.event,this.X=this.B(new C.$qe),this.Y=this.B(new C.$qe),this.onDidFilesChange=this.Y.event,this.Z=this.B(new C.$qe),this.onDidWatchError=this.Z.event,this.$=new Map,this.cb=this.B(new I.$Th)}registerProvider(n,r){if(this.h.has(n))throw new Error(`A filesystem provider for the scheme '${n}' is already registered.`);(0,m.mark)(`code/registerFilesystem/${n}`);const t=new u.$Yc;return this.h.set(n,r),this.c.fire({added:!0,scheme:n,provider:r}),t.add(r.onDidChangeFile(s=>{const o=new b.$yl(s,!this.S(r));this.X.fire(o),o.hasCorrelation()||this.Y.fire(o)})),typeof r.onDidWatchError=="function"&&t.add(r.onDidWatchError(s=>this.Z.fire(new Error(s)))),t.add(r.onDidChangeCapabilities(()=>this.g.fire({provider:r,scheme:n}))),(0,u.$Xc)(()=>{this.c.fire({added:!1,scheme:n,provider:r}),this.h.delete(n),(0,u.$Uc)(t)})}getProvider(n){return this.h.get(n)}async activateProvider(n){const r=[];this.f.fire({scheme:n,join(t){r.push(t)}}),!this.h.has(n)&&await I.Promises.settled(r)}async canHandleResource(n){return await this.activateProvider(n.scheme),this.hasProvider(n)}hasProvider(n){return this.h.has(n.scheme)}hasCapability(n,r){const t=this.h.get(n.scheme);return!!(t&&t.capabilities&r)}listCapabilities(){return g.Iterable.map(this.h,([n,r])=>({scheme:n,capabilities:r.capabilities}))}async j(n){if(!(0,a.$ph)(n))throw new b.$Al((0,S.localize)(1871,null,this.sb(n)),b.FileOperationResult.FILE_INVALID_PATH);await this.activateProvider(n.scheme);const r=this.h.get(n.scheme);if(!r){const t=new R.$fb;throw t.message=(0,S.localize)(1872,null,n.toString()),t}return r}async m(n){const r=await this.j(n);if((0,b.$ll)(r)||(0,b.$il)(r)||(0,b.$ml)(r))return r;throw new Error(`Filesystem provider for scheme '${n.scheme}' neither has FileReadWrite, FileReadStream nor FileOpenReadWriteClose capability which is needed for the read operation.`)}async n(n){const r=await this.j(n);if((0,b.$ll)(r)||(0,b.$il)(r))return r;throw new Error(`Filesystem provider for scheme '${n.scheme}' neither has FileReadWrite nor FileOpenReadWriteClose capability which is needed for the write operation.`)}async resolve(n,r){try{return await this.s(n,r)}catch(t){throw(0,b.$vl)(t)===b.FileSystemProviderErrorCode.FileNotFound?new b.$Al((0,S.localize)(1873,null,this.sb(n)),b.FileOperationResult.FILE_NOT_FOUND):(0,b.$tl)(t)}}async s(n,r){const t=await this.j(n),s=this.S(t),o=r?.resolveTo,l=r?.resolveSingleChildDescendants,p=r?.resolveMetadata,A=await t.stat(n);let T;return this.t(t,n,A,void 0,!!p,(N,D)=>(T||(T=d.$Qi.forUris(()=>!s),T.set(n,!0),o&&T.fill(!0,o)),T.get(N.resource)||T.findSuperstr(N.resource.with({query:null,fragment:null}))?!0:N.isDirectory&&l?D===1:!1))}async t(n,r,t,s,o,l){const{providerExtUri:p}=this.R(n),A={resource:r,name:p.basename(r),isFile:(t.type&b.FileType.File)!==0,isDirectory:(t.type&b.FileType.Directory)!==0,isSymbolicLink:(t.type&b.FileType.SymbolicLink)!==0,mtime:t.mtime,ctime:t.ctime,size:t.size,readonly:!!((t.permissions??0)&b.FilePermission.Readonly)||!!(n.capabilities&b.FileSystemProviderCapabilities.Readonly),locked:!!((t.permissions??0)&b.FilePermission.Locked),etag:(0,b.$Ll)({mtime:t.mtime,size:t.size}),children:void 0};if(A.isDirectory&&l(A,s)){try{const T=await n.readdir(r),N=await I.Promises.settled(T.map(async([D,j])=>{try{const x=p.joinPath(r,D),Y=o?await n.stat(x):{type:j};return await this.t(n,x,Y,T.length,o,l)}catch(x){return this.b.trace(x),null}}));A.children=(0,P.$Lb)(N)}catch(T){this.b.trace(T),A.children=[]}return A}return A}async resolveAll(n){return I.Promises.settled(n.map(async r=>{try{return{stat:await this.s(r.resource,r.options),success:!0}}catch(t){return this.b.trace(t),{stat:void 0,success:!1}}}))}async stat(n){const r=await this.j(n),t=await r.stat(n);return this.t(r,n,t,void 0,!0,()=>!1)}async exists(n){const r=await this.j(n);try{return!!await r.stat(n)}catch{return!1}}async canCreateFile(n,r){try{await this.u(n,r)}catch(t){return t}return!0}async u(n,r){if(!r?.overwrite&&await this.exists(n))throw new b.$Al((0,S.localize)(1874,null,this.sb(n)),b.FileOperationResult.FILE_MODIFIED_SINCE,r)}async createFile(n,r=y.$Se.fromString(""),t){await this.u(n,t);const s=await this.writeFile(n,r);return this.r.fire(new b.$xl(n,b.FileOperation.CREATE,s)),s}async writeFile(n,r,t){const s=this.qb(await this.n(n),n),{providerExtUri:o}=this.R(s);let l=t;if((0,b.$ol)(s)&&!l?.atomic){const p=s.enforceAtomicWriteFile?.(n);p&&(l={...t,atomic:p})}try{await this.w(s,n,l)||await this.U(s,o.dirname(n));let A;if((0,b.$il)(s)&&!(r instanceof y.$Se))if((0,$.$Ee)(r)){const T=await(0,$.$Le)(r,3);T.ended?A=y.$Se.concat(T.buffer):A=T}else A=(0,$.$Ie)(r,T=>y.$Se.concat(T),3);else A=r;!(0,b.$ll)(s)||(0,b.$il)(s)&&A instanceof y.$Se||(0,b.$il)(s)&&(0,b.$ol)(s)&&l?.atomic?await this.hb(s,n,l,A):await this.db(s,n,l,A instanceof y.$Se?(0,y.$4e)(A):A),this.r.fire(new b.$xl(n,b.FileOperation.WRITE))}catch(p){throw new b.$Al((0,S.localize)(1875,null,this.sb(n),(0,b.$tl)(p).toString()),(0,b.$wl)(p),l)}return this.resolve(n,{resolveMetadata:!0})}async w(n,r,t){const s=!!t?.unlock;if(s&&!(n.capabilities&b.FileSystemProviderCapabilities.FileWriteUnlock))throw new Error((0,S.localize)(1876,null,this.sb(r)));if(!!t?.atomic){if(!(n.capabilities&b.FileSystemProviderCapabilities.FileAtomicWrite))throw new Error((0,S.localize)(1877,null,this.sb(r)));if(!(n.capabilities&b.FileSystemProviderCapabilities.FileReadWrite))throw new Error((0,S.localize)(1878,null,this.sb(r)));if(s)throw new Error((0,S.localize)(1879,null,this.sb(r)))}let l;try{l=await n.stat(r)}catch{return}if(l.type&b.FileType.Directory)throw new b.$Al((0,S.localize)(1880,null,this.sb(r)),b.FileOperationResult.FILE_IS_DIRECTORY,t);if(this.rb(r,l),typeof t?.mtime=="number"&&typeof t.etag=="string"&&t.etag!==b.$Kl&&typeof l.mtime=="number"&&typeof l.size=="number"&&t.mtime<l.mtime&&t.etag!==(0,b.$Ll)({mtime:t.mtime,size:l.size}))throw new b.$Al((0,S.localize)(1881,null),b.FileOperationResult.FILE_MODIFIED_SINCE,t);return l}async readFile(n,r,t){const s=await this.m(n);return r?.atomic?this.z(s,n,r,t):this.C(s,n,r,t)}async z(n,r,t,s){return new Promise((o,l)=>{this.cb.queueFor(r,async()=>{try{const p=await this.C(n,r,t,s);o(p)}catch(p){l(p)}},this.R(n).providerExtUri)})}async C(n,r,t,s){const o=await this.D(n,r,{...t,preferUnbuffered:!0},s);return{...o,value:await(0,y.$5e)(o.value)}}async readFileStream(n,r,t){const s=await this.m(n);return this.D(s,n,r,t)}async D(n,r,t,s){const o=new k.$Be(s);let l=t;(0,b.$nl)(n)&&n.enforceAtomicReadFile?.(r)&&(l={...t,atomic:!0});const p=this.J(r,l).then(T=>T,T=>{throw o.dispose(!0),T});let A;try{return typeof l?.etag=="string"&&l.etag!==b.$Kl&&await p,l?.atomic&&(0,b.$nl)(n)||!((0,b.$ll)(n)||(0,b.$ml)(n))||(0,b.$il)(n)&&l?.preferUnbuffered?A=this.I(n,r,l):(0,b.$ml)(n)?A=this.G(n,r,o.token,l):A=this.H(n,r,o.token,l),A.on("end",()=>o.dispose()),A.on("error",()=>o.dispose()),{...await p,value:A}}catch(T){throw A&&await(0,$.$Je)(A),this.F(T,r,l)}}F(n,r,t){const s=(0,S.localize)(1882,null,this.sb(r),(0,b.$tl)(n).toString());return n instanceof b.$Cl?new b.$Cl(s,n.stat,t):n instanceof b.$Bl?new b.$Bl(s,n.fileOperationResult,n.size,n.options):new b.$Al(s,(0,b.$wl)(n),t)}G(n,r,t,s=Object.create(null)){const o=n.readFileStream(r,s,t);return(0,$.$Pe)(o,{data:l=>l instanceof y.$Se?l:y.$Se.wrap(l),error:l=>this.F(l,r,s)},l=>y.$Se.concat(l))}H(n,r,t,s=Object.create(null)){const o=(0,y.$9e)();return(0,v.$0q)(n,r,o,l=>l,{...s,bufferSize:this.a,errorTransformer:l=>this.F(l,r,s)},t),o}I(n,r,t){const s=(0,$.$Ge)(o=>y.$Se.concat(o));return(async()=>{try{let o;t?.atomic&&(0,b.$nl)(n)?o=await n.readFile(r,{atomic:!0}):o=await n.readFile(r),typeof t?.position=="number"&&(o=o.slice(t.position)),typeof t?.length=="number"&&(o=o.slice(0,t.length)),this.L(r,o.byteLength,t),s.end(y.$Se.wrap(o))}catch(o){s.error(o),s.end()}})(),s}async J(n,r){const t=await this.resolve(n,{resolveMetadata:!0});if(t.isDirectory)throw new b.$Al((0,S.localize)(1883,null,this.sb(n)),b.FileOperationResult.FILE_IS_DIRECTORY,r);if(typeof r?.etag=="string"&&r.etag!==b.$Kl&&r.etag===t.etag)throw new b.$Cl((0,S.localize)(1884,null),t,r);return this.L(n,t.size,r),t}L(n,r,t){if(typeof t?.limits?.size=="number"&&r>t.limits.size)throw new b.$Bl((0,S.localize)(1885,null,this.sb(n)),b.FileOperationResult.FILE_TOO_LARGE,r,t)}async canMove(n,r,t){return this.M(n,r,"move",t)}async canCopy(n,r,t){return this.M(n,r,"copy",t)}async M(n,r,t,s){if(n.toString()!==r.toString())try{const o=t==="move"?this.qb(await this.n(n),n):await this.m(n),l=this.qb(await this.n(r),r);await this.Q(o,n,l,r,t,s)}catch(o){return o}return!0}async move(n,r,t){const s=this.qb(await this.n(n),n),o=this.qb(await this.n(r),r),l=await this.N(s,n,o,r,"move",!!t),p=await this.resolve(r,{resolveMetadata:!0});return this.r.fire(new b.$xl(n,l==="move"?b.FileOperation.MOVE:b.FileOperation.COPY,p)),p}async copy(n,r,t){const s=await this.m(n),o=this.qb(await this.n(r),r),l=await this.N(s,n,o,r,"copy",!!t),p=await this.resolve(r,{resolveMetadata:!0});return this.r.fire(new b.$xl(n,l==="copy"?b.FileOperation.COPY:b.FileOperation.MOVE,p)),p}async N(n,r,t,s,o,l){if(r.toString()===s.toString())return o;const{exists:p,isSameResourceWithDifferentPathCase:A}=await this.Q(n,r,t,s,o,l);if(p&&!A&&l&&await this.del(s,{recursive:!0}),await this.U(t,this.R(t).providerExtUri.dirname(s)),o==="copy"){if(n===t&&(0,b.$jl)(n))await n.copy(r,s,{overwrite:l});else{const T=await this.resolve(r);T.isDirectory?await this.P(n,T,t,s):await this.O(n,r,t,s)}return o}else return n===t?(await n.rename(r,s,{overwrite:l}),o):(await this.N(n,r,t,s,"copy",l),await this.del(r,{recursive:!0}),"copy")}async O(n,r,t,s){if((0,b.$ll)(n)&&(0,b.$ll)(t))return this.jb(n,r,t,s);if((0,b.$ll)(n)&&(0,b.$il)(t))return this.pb(n,r,t,s);if((0,b.$il)(n)&&(0,b.$ll)(t))return this.nb(n,r,t,s);if((0,b.$il)(n)&&(0,b.$il)(t))return this.lb(n,r,t,s)}async P(n,r,t,s){await t.mkdir(s),Array.isArray(r.children)&&await I.Promises.settled(r.children.map(async o=>{const l=this.R(t).providerExtUri.joinPath(s,o.name);return o.isDirectory?this.P(n,await this.resolve(o.resource),t,l):this.O(n,o.resource,t,l)}))}async Q(n,r,t,s,o,l){let p=!1;if(n===t){const{providerExtUri:T,isPathCaseSensitive:N}=this.R(n);if(N||(p=T.isEqual(r,s)),p&&o==="copy")throw new Error((0,S.localize)(1886,null,this.sb(r),this.sb(s)));if(!p&&T.isEqualOrParent(s,r))throw new Error((0,S.localize)(1887,null,this.sb(r),this.sb(s)))}const A=await this.exists(s);if(A&&!p){if(!l)throw new b.$Al((0,S.localize)(1888,null,this.sb(r),this.sb(s)),b.FileOperationResult.FILE_MOVE_CONFLICT);if(n===t){const{providerExtUri:T}=this.R(n);if(T.isEqualOrParent(r,s))throw new Error((0,S.localize)(1889,null,this.sb(r),this.sb(s)))}}return{exists:A,isSameResourceWithDifferentPathCase:p}}R(n){const r=this.S(n);return{providerExtUri:r?a.$bh:a.$dh,isPathCaseSensitive:r}}S(n){return!!(n.capabilities&b.FileSystemProviderCapabilities.PathCaseSensitive)}async createFolder(n){const r=this.qb(await this.j(n),n);await this.U(r,n);const t=await this.resolve(n,{resolveMetadata:!0});return this.r.fire(new b.$xl(n,b.FileOperation.CREATE,t)),t}async U(n,r){const t=[],{providerExtUri:s}=this.R(n);for(;!s.isEqual(r,s.dirname(r));)try{if(!((await n.stat(r)).type&b.FileType.Directory))throw new Error((0,S.localize)(1890,null,this.sb(r)));break}catch(o){if((0,b.$vl)(o)!==b.FileSystemProviderErrorCode.FileNotFound)throw o;t.push(s.basename(r)),r=s.dirname(r)}for(let o=t.length-1;o>=0;o--){r=s.joinPath(r,t[o]);try{await n.mkdir(r)}catch(l){if((0,b.$vl)(l)!==b.FileSystemProviderErrorCode.FileExists)throw l}}}async canDelete(n,r){try{await this.W(n,r)}catch(t){return t}return!0}async W(n,r){const t=this.qb(await this.j(n),n),s=!!r?.useTrash;if(s&&!(t.capabilities&b.FileSystemProviderCapabilities.Trash))throw new Error((0,S.localize)(1891,null,this.sb(n)));const o=r?.atomic;if(o&&!(t.capabilities&b.FileSystemProviderCapabilities.FileAtomicDelete))throw new Error((0,S.localize)(1892,null,this.sb(n)));if(s&&o)throw new Error((0,S.localize)(1893,null,this.sb(n)));let l;try{l=await t.stat(n)}catch{}if(l)this.rb(n,l);else throw new b.$Al((0,S.localize)(1894,null,this.sb(n)),b.FileOperationResult.FILE_NOT_FOUND);if(!!!r?.recursive){const A=await this.resolve(n);if(A.isDirectory&&Array.isArray(A.children)&&A.children.length>0)throw new Error((0,S.localize)(1895,null,this.sb(n)))}return t}async del(n,r){const t=await this.W(n,r);let s=r;if((0,b.$pl)(t)&&!s?.atomic){const A=t.enforceAtomicDelete?.(n);A&&(s={...r,atomic:A})}const o=!!s?.useTrash,l=!!s?.recursive,p=s?.atomic??!1;await t.delete(n,{recursive:l,useTrash:o,atomic:p}),this.r.fire(new b.$xl(n,b.FileOperation.DELETE))}async cloneFile(n,r){const t=await this.j(n),s=this.qb(await this.n(r),r);if(!(t===s&&this.R(t).providerExtUri.isEqual(n,r)))return t===s&&(0,b.$kl)(t)?t.cloneFile(n,r):(await this.U(s,this.R(s).providerExtUri.dirname(r)),t===s&&(0,b.$jl)(t)?this.cb.queueFor(n,()=>t.copy(n,r,{overwrite:!0}),this.R(t).providerExtUri):this.cb.queueFor(n,()=>this.O(t,n,s,r),this.R(t).providerExtUri))}static{this.ab=0}createWatcher(n,r){return this.watch(n,{...r,correlationId:w.ab++})}watch(n,r={recursive:!1,excludes:[]}){const t=new u.$Yc;let s=!1,o=()=>{s=!0};t.add((0,u.$Xc)(()=>o())),(async()=>{try{const p=await this.bb(n,r);s?(0,u.$Uc)(p):o=()=>(0,u.$Uc)(p)}catch(p){this.b.error(p)}})();const l=r.correlationId;if(typeof l=="number"){const p=t.add(new C.$qe);return t.add(this.X.event(T=>{T.correlates(l)&&p.fire(T)})),{onDidChange:p.event,dispose:()=>t.dispose()}}return t}async bb(n,r){const t=await this.j(n),s=(0,O.$yj)([this.R(t).providerExtUri.getComparisonKey(n),r]);let o=this.$.get(s);return o||(o={count:0,disposable:t.watch(n,r)},this.$.set(s,o)),o.count+=1,(0,u.$Xc)(()=>{o&&(o.count--,o.count===0&&((0,u.$Uc)(o.disposable),this.$.delete(s)))})}dispose(){super.dispose();for(const[,n]of this.$)(0,u.$Uc)(n.disposable);this.$.clear()}async db(n,r,t,s){return this.cb.queueFor(r,async()=>{const o=await n.open(r,{create:!0,unlock:t?.unlock??!1});try{(0,$.$Ee)(s)||(0,$.$Fe)(s)?await this.eb(n,o,s):await this.fb(n,o,s)}catch(l){throw(0,b.$tl)(l)}finally{await n.close(o)}},this.R(n).providerExtUri)}async eb(n,r,t){let s=0,o;if((0,$.$Fe)(t)){if(t.buffer.length>0){const l=y.$Se.concat(t.buffer);await this.gb(n,r,l,l.byteLength,s,0),s+=l.byteLength}if(t.ended)return;o=t.stream}else o=t;return new Promise((l,p)=>{(0,$.$Ke)(o,{onData:async A=>{o.pause();try{await this.gb(n,r,A,A.byteLength,s,0)}catch(T){return p(T)}s+=A.byteLength,setTimeout(()=>o.resume())},onError:A=>p(A),onEnd:()=>l()})})}async fb(n,r,t){let s=0,o;for(;(o=t.read())!==null;)await this.gb(n,r,o,o.byteLength,s,0),s+=o.byteLength}async gb(n,r,t,s,o,l){let p=0;for(;p<s;){const A=await n.write(r,o+p,t.buffer,l+p,s-p);p+=A}}async hb(n,r,t,s){return this.cb.queueFor(r,()=>this.ib(n,r,t,s),this.R(n).providerExtUri)}async ib(n,r,t,s){let o;s instanceof y.$Se?o=s:(0,$.$Ee)(s)?o=await(0,y.$5e)(s):(0,$.$Fe)(s)?o=await(0,y.$6e)(s):o=(0,y.$3e)(s),await n.writeFile(r,o.buffer,{create:!0,overwrite:!0,unlock:t?.unlock??!1,atomic:t?.atomic??!1})}async jb(n,r,t,s){return this.cb.queueFor(s,()=>this.kb(n,r,t,s),this.R(t).providerExtUri)}async kb(n,r,t,s){let o,l;try{o=await n.open(r,{create:!1}),l=await t.open(s,{create:!0,unlock:!1});const p=y.$Se.alloc(this.a);let A=0,T=0,N=0;do N=await n.read(o,A,p.buffer,T,p.byteLength-T),await this.gb(t,l,p,N,A,T),A+=N,T+=N,T===p.byteLength&&(T=0);while(N>0)}catch(p){throw(0,b.$tl)(p)}finally{await I.Promises.settled([typeof o=="number"?n.close(o):Promise.resolve(),typeof l=="number"?t.close(l):Promise.resolve()])}}async lb(n,r,t,s){return this.cb.queueFor(s,()=>this.mb(n,r,t,s),this.R(t).providerExtUri)}async mb(n,r,t,s){return t.writeFile(s,await n.readFile(r),{create:!0,overwrite:!0,unlock:!1,atomic:!1})}async nb(n,r,t,s){return this.cb.queueFor(s,()=>this.ob(n,r,t,s),this.R(t).providerExtUri)}async ob(n,r,t,s){const o=await t.open(s,{create:!0,unlock:!1});try{const l=await n.readFile(r);await this.gb(t,o,y.$Se.wrap(l),l.byteLength,0,0)}catch(l){throw(0,b.$tl)(l)}finally{await t.close(o)}}async pb(n,r,t,s){const o=await(0,y.$5e)(this.H(n,r,k.CancellationToken.None));await this.hb(t,s,void 0,o)}qb(n,r){if(n.capabilities&b.FileSystemProviderCapabilities.Readonly)throw new b.$Al((0,S.localize)(1896,null,this.sb(r)),b.FileOperationResult.FILE_PERMISSION_DENIED);return n}rb(n,r){if((r.permissions??0)&b.FilePermission.Readonly)throw new b.$Al((0,S.localize)(1897,null,this.sb(n)),b.FileOperationResult.FILE_PERMISSION_DENIED)}sb(n){return n.scheme===f.Schemas.file?n.fsPath:n.toString(!0)}};e.$$q=i,e.$$q=i=w=Ee([oe(0,h.$fk)],i)}),define(le[110],he([0,1,32,8,25,13,5,64,2,15,11,16,47,29,4,9,63,107,105,104]),function(Q,e,P,I,y,k,C,O,g,u,d,f,m,a,$,S,b,v,h,R){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$Br=void 0;class w extends v.$kr{static{this.L=!1}constructor(c,n){super(c,n),this.onDidChangeCapabilities=C.Event.None,this.P=new y.$Fc(r=>f.$ch.getComparisonKey(r)),this.X=new Map,this.Y=new Map,this.Z=new Map}get capabilities(){return this.M||(this.M=S.FileSystemProviderCapabilities.FileReadWrite|S.FileSystemProviderCapabilities.FileOpenReadWriteClose|S.FileSystemProviderCapabilities.FileReadStream|S.FileSystemProviderCapabilities.FileFolderCopy|S.FileSystemProviderCapabilities.FileWriteUnlock|S.FileSystemProviderCapabilities.FileAtomicRead|S.FileSystemProviderCapabilities.FileAtomicWrite|S.FileSystemProviderCapabilities.FileAtomicDelete|S.FileSystemProviderCapabilities.FileClone,d.$n&&(this.M|=S.FileSystemProviderCapabilities.PathCaseSensitive)),this.M}async stat(c){try{const{stat:n,symbolicLink:r}=await a.SymlinkSupport.stat(this.I(c));return{type:this.O(n,r),ctime:n.birthtime.getTime(),mtime:n.mtime.getTime(),size:n.size,permissions:n.mode&128?void 0:S.FilePermission.Locked}}catch(n){throw this.hb(n)}}async N(c){try{return await this.stat(c)}catch{return}}async readdir(c){try{const n=await a.Promises.readdir(this.I(c),{withFileTypes:!0}),r=[];return await Promise.all(n.map(async t=>{try{let s;t.isSymbolicLink()?s=(await this.stat((0,f.$lh)(c,t.name))).type:s=this.O(t),r.push([t.name,s])}catch(s){this.a.trace(s)}})),r}catch(n){throw this.hb(n)}}O(c,n){let r;return n?.dangling?r=S.FileType.Unknown:c.isFile()?r=S.FileType.File:c.isDirectory()?r=S.FileType.Directory:r=S.FileType.Unknown,n&&(r|=S.FileType.SymbolicLink),r}async Q(c){const n=this.I(c);this.R(`[Disk FileSystemProvider]: createResourceLock() - request to acquire resource lock (${n})`);let r;for(;r=this.P.get(c);)this.R(`[Disk FileSystemProvider]: createResourceLock() - waiting for resource lock to be released (${n})`),await r.wait();const t=new I.$Jh;return this.P.set(c,t),this.R(`[Disk FileSystemProvider]: createResourceLock() - new resource lock created (${n})`),(0,g.$Xc)(()=>{this.R(`[Disk FileSystemProvider]: createResourceLock() - resource lock dispose() (${n})`),this.P.get(c)===t&&(this.R(`[Disk FileSystemProvider]: createResourceLock() - resource lock removed from resource-lock map (${n})`),this.P.delete(c)),this.R(`[Disk FileSystemProvider]: createResourceLock() - resource lock barrier open() (${n})`),t.open()})}async readFile(c,n){let r;try{n?.atomic&&(this.R(`[Disk FileSystemProvider]: atomic read operation started (${this.I(c)})`),r=await this.Q(c));const t=this.I(c);return await P.promises.readFile(t)}catch(t){throw this.hb(t)}finally{r?.dispose()}}R(c){w.L&&this.a.trace(c)}readFileStream(c,n,r){const t=(0,m.$Ge)(s=>k.$Se.concat(s.map(o=>k.$Se.wrap(o))).buffer);return(0,b.$0q)(this,c,t,s=>s.buffer,{...n,bufferSize:256*1024},r),t}async writeFile(c,n,r){return r?.atomic!==!1&&r?.atomic?.postfix&&await this.S(c)?this.U(c,(0,f.$lh)((0,f.$kh)(c),`${(0,f.$ih)(c)}${r.atomic.postfix}`),n,r):this.W(c,n,r)}async S(c){try{const n=this.I(c),{symbolicLink:r}=await a.SymlinkSupport.stat(n);if(r)return!1}catch{}return!0}async U(c,n,r,t){const s=new g.$Yc;try{s.add(await this.Q(c)),s.add(await this.Q(n)),await this.W(n,r,t,!0);try{await this.rename(n,c,{overwrite:!0})}catch(o){try{await this.delete(n,{recursive:!1,useTrash:!1,atomic:!1})}catch{}throw o}}finally{s.dispose()}}async W(c,n,r,t){let s;try{const o=this.I(c);if(!r.create||!r.overwrite){if(await a.Promises.exists(o)){if(!r.overwrite)throw(0,S.$sl)((0,$.localize)(1901,null),S.FileSystemProviderErrorCode.FileExists)}else if(!r.create)throw(0,S.$sl)((0,$.localize)(1902,null),S.FileSystemProviderErrorCode.FileNotFound)}s=await this.open(c,{create:!0,unlock:r.unlock},t),await this.write(s,0,n,0,n.byteLength)}catch(o){throw await this.ib(c,o)}finally{typeof s=="number"&&await this.close(s)}}static{this.$=!0}static configureFlushOnWrite(c){w.$=c}async open(c,n,r){const t=this.I(c);let s;(0,S.$gl)(n)&&!r&&(s=await this.Q(c));let o;try{if((0,S.$gl)(n)&&n.unlock)try{const{stat:p}=await a.SymlinkSupport.stat(t);p.mode&128||await P.promises.chmod(t,p.mode|128)}catch(p){p.code!=="ENOENT"&&this.a.trace(p)}let l;if((0,S.$gl)(n)){if(d.$l)try{await P.promises.truncate(t,0),l="r+"}catch(p){p.code!=="ENOENT"&&this.a.trace(p)}l||(l="w")}else l="r";o=await a.Promises.open(t,l)}catch(l){throw s?.dispose(),(0,S.$gl)(n)?await this.ib(c,l):this.hb(l)}if(this.X.set(o,0),(0,S.$gl)(n)&&this.Z.set(o,c),s){const l=this.Y.get(o);this.R(`[Disk FileSystemProvider]: open() - storing lock for handle ${o} (${t})`),this.Y.set(o,s),l&&(this.R(`[Disk FileSystemProvider]: open() - disposing a previous lock that was still stored on same handle ${o} (${t})`),l.dispose())}return o}async close(c){const n=this.Y.get(c);try{if(this.X.delete(c),this.Z.delete(c)&&w.$)try{await a.Promises.fdatasync(c)}catch(r){w.configureFlushOnWrite(!1),this.a.error(r)}return await a.Promises.close(c)}catch(r){throw this.hb(r)}finally{n&&(this.Y.get(c)===n&&(this.R(`[Disk FileSystemProvider]: close() - resource lock removed from handle-lock map ${c}`),this.Y.delete(c)),this.R(`[Disk FileSystemProvider]: close() - disposing lock for handle ${c}`),n.dispose())}}async read(c,n,r,t,s){const o=this.ab(c,n);let l=null;try{l=(await a.Promises.read(c,r,t,s,o)).bytesRead}catch(p){throw this.hb(p)}finally{this.bb(c,o,l)}return l}ab(c,n){return n===this.X.get(c)?null:n}bb(c,n,r){const t=this.X.get(c);typeof t=="number"&&(typeof n=="number"||(typeof r=="number"?this.X.set(c,t+r):this.X.delete(c)))}async write(c,n,r,t,s){return(0,I.$5h)(()=>this.cb(c,n,r,t,s),100,3)}async cb(c,n,r,t,s){const o=this.ab(c,n);let l=null;try{l=(await a.Promises.write(c,r,t,s,o)).bytesWritten}catch(p){throw await this.ib(this.Z.get(c),p)}finally{this.bb(c,o,l)}return l}async mkdir(c){try{await P.promises.mkdir(this.I(c))}catch(n){throw this.hb(n)}}async delete(c,n){try{const r=this.I(c);if(n.recursive){let t;n?.atomic!==!1&&n.atomic.postfix&&(t=(0,u.$oc)((0,u.$rc)(r),`${(0,u.$sc)(r)}${n.atomic.postfix}`)),await a.Promises.rm(r,a.RimRafMode.MOVE,t)}else try{await P.promises.unlink(r)}catch(t){if(t.code==="EPERM"||t.code==="EISDIR"){let s=!1;try{const{stat:o,symbolicLink:l}=await a.SymlinkSupport.stat(r);s=o.isDirectory()&&!l}catch{}if(s)await P.promises.rmdir(r);else throw t}else throw t}}catch(r){throw this.hb(r)}}async rename(c,n,r){const t=this.I(c),s=this.I(n);if(t!==s)try{await this.db(c,n,"move",r.overwrite),await a.Promises.rename(t,s)}catch(o){throw(o.code==="EINVAL"||o.code==="EBUSY"||o.code==="ENAMETOOLONG")&&(o=new Error((0,$.localize)(1903,null,(0,u.$sc)(t),(0,u.$sc)((0,u.$rc)(s)),o.toString()))),this.hb(o)}}async copy(c,n,r){const t=this.I(c),s=this.I(n);if(t!==s)try{await this.db(c,n,"copy",r.overwrite),await a.Promises.copy(t,s,{preserveSymlinks:!0})}catch(o){throw(o.code==="EINVAL"||o.code==="EBUSY"||o.code==="ENAMETOOLONG")&&(o=new Error((0,$.localize)(1904,null,(0,u.$sc)(t),(0,u.$sc)((0,u.$rc)(s)),o.toString()))),this.hb(o)}}async db(c,n,r,t){const s=this.I(c),o=this.I(n);let l=!1;if(!!(this.capabilities&S.FileSystemProviderCapabilities.PathCaseSensitive)||(l=(0,O.$Ig)(s,o,!0)),l){if(r==="copy")throw(0,S.$sl)((0,$.localize)(1905,null),S.FileSystemProviderErrorCode.FileExists);if(r==="move")return}const A=await this.N(c);if(!A)throw(0,S.$sl)((0,$.localize)(1906,null),S.FileSystemProviderErrorCode.FileNotFound);const T=await this.N(n);if(T){if(!t)throw(0,S.$sl)((0,$.localize)(1907,null),S.FileSystemProviderErrorCode.FileExists);A.type&S.FileType.File&&T.type&S.FileType.File||await this.delete(n,{recursive:!0,useTrash:!1,atomic:!1})}}async cloneFile(c,n){return this.eb(c,n,!1)}async eb(c,n,r){const t=this.I(c),s=this.I(n),o=!!(this.capabilities&S.FileSystemProviderCapabilities.PathCaseSensitive);if((0,O.$Ig)(t,s,!o))return;const l=new g.$Yc;try{l.add(await this.Q(c)),l.add(await this.Q(n)),r&&await P.promises.mkdir((0,u.$rc)(s),{recursive:!0}),await P.promises.copyFile(t,s)}catch(p){if(p.code==="ENOENT"&&!r)return this.eb(c,n,!0);throw this.hb(p)}finally{l.dispose()}}t(c,n,r){return new h.$rr(t=>c(t),t=>n(t),r)}F(c,n,r){return new R.$Ar(t=>c(t),t=>n(t),r)}hb(c){if(c instanceof S.$rl)return c;let n=c,r;switch(c.code){case"ENOENT":r=S.FileSystemProviderErrorCode.FileNotFound;break;case"EISDIR":r=S.FileSystemProviderErrorCode.FileIsADirectory;break;case"ENOTDIR":r=S.FileSystemProviderErrorCode.FileNotADirectory;break;case"EEXIST":r=S.FileSystemProviderErrorCode.FileExists;break;case"EPERM":case"EACCES":r=S.FileSystemProviderErrorCode.NoPermissions;break;case"ERR_UNC_HOST_NOT_ALLOWED":n=`${c.message}. Please update the 'security.allowedUNCHosts' setting if you want to allow this host.`,r=S.FileSystemProviderErrorCode.Unknown;break;default:r=S.FileSystemProviderErrorCode.Unknown}return(0,S.$sl)(n,r)}async ib(c,n){let r=this.hb(n);if(c&&r.code===S.FileSystemProviderErrorCode.NoPermissions)try{const{stat:t}=await a.SymlinkSupport.stat(this.I(c));t.mode&128||(r=(0,S.$sl)(n,S.FileSystemProviderErrorCode.FileWriteLocked))}catch(t){this.a.trace(t)}return r}}e.$Br=w}),define(le[111],he([0,1,2,6]),function(Q,e,P,I){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$aS=void 0;class y extends P.$Zc{constructor(C,O=[]){super(),this.a=new I.$pk([C,...O]),this.B(C.onDidChangeLogLevel(g=>this.setLevel(g)))}get onDidChangeLogLevel(){return this.a.onDidChangeLogLevel}setLevel(C){this.a.setLevel(C)}getLevel(){return this.a.getLevel()}trace(C,...O){this.a.trace(C,...O)}debug(C,...O){this.a.debug(C,...O)}info(C,...O){this.a.info(C,...O)}warn(C,...O){this.a.warn(C,...O)}error(C,...O){this.a.error(C,...O)}flush(){this.a.flush()}}e.$aS=y}),define(le[112],he([0,1,9,6]),function(Q,e,P,I){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$2R=void 0;var y;(function(u){u[u.Trace=0]="Trace",u[u.Debug=1]="Debug",u[u.Info=2]="Info",u[u.Warning=3]="Warning",u[u.Error=4]="Error",u[u.Critical=5]="Critical",u[u.Off=6]="Off"})(y||(y={}));async function k(u,d,f,m,a){try{const $=await new Promise((b,v)=>{Q(["@vscode/spdlog"],b,v)}).then(be);$.setFlushOn(y.Trace);const S=await $.createAsyncRotatingLogger(u,d,f,m);return a?S.clearFormatters():S.setPattern("%Y-%m-%d %H:%M:%S.%e [%l] %v"),S}catch($){console.error($)}return null}function C(u,d,f){switch(d){case I.LogLevel.Trace:u.trace(f);break;case I.LogLevel.Debug:u.debug(f);break;case I.LogLevel.Info:u.info(f);break;case I.LogLevel.Warning:u.warn(f);break;case I.LogLevel.Error:u.error(f);break;case I.LogLevel.Off:break;default:throw new Error(`Invalid log level ${d}`)}}function O(u,d){switch(d){case I.LogLevel.Trace:u.setLevel(y.Trace);break;case I.LogLevel.Debug:u.setLevel(y.Debug);break;case I.LogLevel.Info:u.setLevel(y.Info);break;case I.LogLevel.Warning:u.setLevel(y.Warning);break;case I.LogLevel.Error:u.setLevel(y.Error);break;case I.LogLevel.Off:u.setLevel(y.Off);break;default:throw new Error(`Invalid log level ${d}`)}}class g extends I.$lk{constructor(d,f,m,a,$){super(),this.m=[],this.setLevel($),this.n=this.s(d,f,m,a),this.B(this.onDidChangeLogLevel(S=>{this.r&&O(this.r,S)}))}async s(d,f,m,a){const $=m?6:1,S=30/$*P.$Nl.MB,b=await k(d,f,S,$,a);if(b){this.r=b,O(this.r,this.getLevel());for(const{level:v,message:h}of this.m)C(this.r,v,h);this.m=[]}}g(d,f){this.r?C(this.r,d,f):this.getLevel()<=d&&this.m.push({level:d,message:f})}flush(){this.r?this.r.flush():this.n.then(()=>this.flush())}dispose(){this.r?this.u():this.n.then(()=>this.u()),super.dispose()}u(){this.r&&(this.r.drop(),this.r=void 0)}}e.$2R=g}),define(le[113],he([0,1,28,6,112]),function(Q,e,P,I,y){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$3R=void 0;class k extends I.$qk{s(O,g,u){return new y.$2R((0,P.$7g)(),O.fsPath,!u?.donotRotate,!!u?.donotUseFormatters,g)}}e.$3R=k}),define(le[39],he([0,1,5,66,2,10]),function(Q,e,P,I,y,k){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$Bo=e.$Ao=e.$zo=void 0,e.$zo=(0,k.$Ki)("policy");class C extends y.$Zc{constructor(){super(...arguments),this.f={},this.g=new Map,this.h=this.B(new P.$qe),this.onDidChange=this.h.event}async updatePolicyDefinitions(u){const d=Object.keys(this.f).length;return this.f={...u,...this.f},d!==Object.keys(this.f).length&&await this.j(u),I.Iterable.reduce(this.g.entries(),(f,[m,a])=>({...f,[m]:a}),{})}getPolicyValue(u){return this.g.get(u)}serialize(){return I.Iterable.reduce(Object.entries(this.f),(u,[d,f])=>({...u,[d]:{definition:f,value:this.g.get(d)}}),{})}}e.$Ao=C;class O{constructor(){this.onDidChange=P.Event.None}async updatePolicyDefinitions(){return{}}getPolicyValue(){}serialize(){}}e.$Bo=O}),define(le[114],he([0,1,8,5,66,3,9,6,39]),function(Q,e,P,I,y,k,C,O,g){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$kjc=void 0;function u(f,m){const a=[];for(const $ of new Set(y.Iterable.concat(f.keys(),m.keys())))f.get($)!==m.get($)&&a.push($);return a}let d=class extends g.$Ao{constructor(m,a,$){super(),this.m=m,this.n=a,this.s=$,this.c=this.B(new P.$Ih(500));const S=I.Event.filter(a.onDidFilesChange,b=>b.affects(m));this.B(a.watch(m)),this.B(S(()=>this.c.trigger(()=>this.w())))}async j(){await this.w()}async u(){const m=new Map;try{const a=await this.n.readFile(this.m),$=JSON.parse(a.value.toString());if(!(0,k.$lg)($))throw new Error("Policy file isn't a JSON object");for(const S of Object.keys($))this.f[S]&&m.set(S,$[S])}catch(a){a.fileOperationResult!==C.FileOperationResult.FILE_NOT_FOUND&&this.s.error("[FilePolicyService] Failed to read policies",a)}return m}async w(){const m=await this.u(),a=u(this.g,m);this.g=m,a.length>0&&this.h.fire(a)}};e.$kjc=d,e.$kjc=d=Ee([oe(1,C.$fl),oe(2,O.$fk)],d)}),define(le[115],he([0,1,39,8,2,6]),function(Q,e,P,I,y,k){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$jjc=void 0;let C=class extends P.$Ao{constructor(g,u){super(),this.m=g,this.n=u,this.a=new I.$Eh,this.b=this.B(new y.$1c)}async j(g){this.m.trace(`NativePolicyService#_updatePolicyDefinitions - Found ${Object.keys(g).length} policy definitions`);const{createWatcher:u}=await new Promise((d,f)=>{Q(["@vscode/policy-watcher"],d,f)}).then(be);await this.a.queue(()=>new Promise((d,f)=>{try{this.b.value=u(this.n,g,m=>{this.t(m),d()})}catch(m){this.m.error("NativePolicyService#_updatePolicyDefinitions - Error creating watcher:",m),f(m)}}))}t(g){this.m.trace(`NativePolicyService#_onDidPolicyChange - Updated policy values: ${JSON.stringify(g)}`);for(const u in g){const d=g[u];d===void 0?this.g.delete(u):this.g.set(u,d)}this.h.fire(Object.keys(g))}};e.$jjc=C,e.$jjc=C=Ee([oe(0,k.$fk)],C)}),define(le[33],he([0,1,10]),function(Q,e,P){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$zk=e.$yk=void 0,e.$yk=(0,P.$Ki)("productService"),e.$zk="vscode://schemas/vscode-product"}),define(le[37],he([0,1,76,3]),function(Q,e,P,I){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$xo=void 0,P=be(P),I=be(I);class y{constructor(){this.a=new Map}add(C,O){P.ok(I.$jg(C)),P.ok(I.$lg(O)),P.ok(!this.a.has(C),"There is already an extension with this id"),this.a.set(C,O)}knows(C){return this.a.has(C)}as(C){return this.a.get(C)||null}}e.$xo=new y}),define(le[116],he([0,1,5,79,37]),function(Q,e,P,I,y){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$yo=void 0,y=be(y),e.$yo={JSONContribution:"base.contributions.json"};function k(g){return g.length>0&&g.charAt(g.length-1)==="#"?g.substring(0,g.length-1):g}class C{constructor(){this.b=new P.$qe,this.onDidChangeSchema=this.b.event,this.a={}}registerSchema(u,d){this.a[k(u)]=d,this.b.fire(u)}notifySchemaChanged(u){this.b.fire(u)}getSchemaContributions(){return{schemas:this.a}}getSchemaContent(u){const d=this.a[u];return d?(0,I.$ak)(d):void 0}hasSchemaContent(u){return!!this.a[u]}}const O=new C;y.$xo.add(e.$yo.JSONContribution,O)}),define(le[40],he([0,1,19,5,3,4,30,116,37]),function(Q,e,P,I,y,k,C,O,g){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$Mo=e.$Lo=e.$Ko=e.$Jo=e.$Io=e.$Ho=e.$Go=e.$Fo=e.$Eo=e.$Do=e.ConfigurationScope=e.$Co=e.EditPresentationTypes=void 0,e.$No=S,e.$Oo=b,e.$Po=v,e.$Qo=R,e.$Ro=w,e.$So=i,e.$To=c,y=be(y),k=be(k);var u;(function(n){n.Multiline="multilineText",n.Singleline="singlelineText"})(u||(e.EditPresentationTypes=u={})),e.$Co={Configuration:"base.contributions.configuration"};var d;(function(n){n[n.APPLICATION=1]="APPLICATION",n[n.MACHINE=2]="MACHINE",n[n.WINDOW=3]="WINDOW",n[n.RESOURCE=4]="RESOURCE",n[n.LANGUAGE_OVERRIDABLE=5]="LANGUAGE_OVERRIDABLE",n[n.MACHINE_OVERRIDABLE=6]="MACHINE_OVERRIDABLE"})(d||(e.ConfigurationScope=d={})),e.$Do={properties:{},patternProperties:{}},e.$Eo={properties:{},patternProperties:{}},e.$Fo={properties:{},patternProperties:{}},e.$Go={properties:{},patternProperties:{}},e.$Ho={properties:{},patternProperties:{}},e.$Io={properties:{},patternProperties:{}},e.$Jo="vscode://schemas/settings/resourceLanguage",e.$Ko="vscode://schemas/settings/configurationDefaults";const f=g.$xo.as(O.$yo.JSONContribution);class m{constructor(){this.a=[],this.i=new Set,this.j=new I.$qe,this.onDidSchemaChange=this.j.event,this.k=new I.$qe,this.onDidUpdateConfiguration=this.k.event,this.b=new Map,this.c={id:"defaultOverrides",title:k.localize(1662,null),properties:{}},this.d=[this.c],this.h={properties:{},patternProperties:{},additionalProperties:!0,allowTrailingCommas:!0,allowComments:!0},this.e={},this.f=new Map,this.g={},f.registerSchema(e.$Jo,this.h),this.z()}registerConfiguration(r,t=!0){this.registerConfigurations([r],t)}registerConfigurations(r,t=!0){const s=new Set;this.r(r,t,s),f.registerSchema(e.$Jo,this.h),this.j.fire(),this.k.fire({properties:s})}deregisterConfigurations(r){const t=new Set;this.s(r,t),f.registerSchema(e.$Jo,this.h),this.j.fire(),this.k.fire({properties:t})}updateConfigurations({add:r,remove:t}){const s=new Set;this.s(t,s),this.r(r,!1,s),f.registerSchema(e.$Jo,this.h),this.j.fire(),this.k.fire({properties:s})}registerDefaultConfigurations(r){const t=new Set;this.l(r,t),this.j.fire(),this.k.fire({properties:t,defaultsOverrides:!0})}l(r,t){this.a.push(...r);const s=[];for(const{overrides:o,source:l}of r)for(const p in o){t.add(p);const A=this.b.get(p)??this.b.set(p,{configurationDefaultOverrides:[]}).get(p),T=o[p];if(A.configurationDefaultOverrides.push({value:T,source:l}),e.$Mo.test(p)){const N=this.o(p,T,l,A.configurationDefaultOverrideValue);if(!N)continue;A.configurationDefaultOverrideValue=N,this.n(p,N,l),s.push(...S(p))}else{const N=this.p(p,T,l,A.configurationDefaultOverrideValue);if(!N)continue;A.configurationDefaultOverrideValue=N;const D=this.e[p];D&&(this.A(p,D),this.w(p,D))}}this.q(s)}deregisterDefaultConfigurations(r){const t=new Set;this.m(r,t),this.j.fire(),this.k.fire({properties:t,defaultsOverrides:!0})}m(r,t){for(const s of r){const o=this.a.indexOf(s);o!==-1&&this.a.splice(o,1)}for(const{overrides:s,source:o}of r)for(const l in s){const p=this.b.get(l);if(!p)continue;const A=p.configurationDefaultOverrides.findIndex(T=>o?T.source?.id===o.id:T.value===s[l]);if(A!==-1){if(p.configurationDefaultOverrides.splice(A,1),p.configurationDefaultOverrides.length===0&&this.b.delete(l),e.$Mo.test(l)){let T;for(const N of p.configurationDefaultOverrides)T=this.o(l,N.value,N.source,T);T&&!y.$wg(T.value)?(p.configurationDefaultOverrideValue=T,this.n(l,T,o)):(this.b.delete(l),delete this.e[l],delete this.c.properties[l])}else{let T;for(const D of p.configurationDefaultOverrides)T=this.p(l,D.value,D.source,T);p.configurationDefaultOverrideValue=T;const N=this.e[l];N&&(this.A(l,N),this.w(l,N))}t.add(l)}}this.y()}n(r,t,s){const o={type:"object",default:t.value,description:k.localize(1663,null,(0,C.$oj)(r)),$ref:e.$Jo,defaultDefaultValue:t.value,source:s,defaultValueSource:s};this.e[r]=o,this.c.properties[r]=o}o(r,t,s,o){const l=o?.value||{},p=o?.source??new Map;if(!(p instanceof Map)){console.error("objectConfigurationSources is not a Map");return}for(const A of Object.keys(t)){const T=t[A];if(y.$lg(T)&&(y.$qg(l[A])||y.$lg(l[A]))){if(l[A]={...l[A]??{},...T},s)for(const D in T)p.set(`${A}.${D}`,s)}else l[A]=T,s?p.set(A,s):p.delete(A)}return{value:l,source:p}}p(r,t,s,o){const l=this.e[r],p=o?.value??l?.defaultDefaultValue;let A=s;if(y.$lg(t)&&(l!==void 0&&l.type==="object"||l===void 0&&(y.$qg(p)||y.$lg(p)))){if(A=o?.source??new Map,!(A instanceof Map)){console.error("defaultValueSource is not a Map");return}for(const N in t)s&&A.set(`${r}.${N}`,s);t={...y.$lg(p)?p:{},...t}}return{value:t,source:A}}deltaConfiguration(r){let t=!1;const s=new Set;r.removedDefaults&&(this.m(r.removedDefaults,s),t=!0),r.addedDefaults&&(this.l(r.addedDefaults,s),t=!0),r.removedConfigurations&&this.s(r.removedConfigurations,s),r.addedConfigurations&&this.r(r.addedConfigurations,!1,s),this.j.fire(),this.k.fire({properties:s,defaultsOverrides:t})}notifyConfigurationSchemaUpdated(...r){this.j.fire()}registerOverrideIdentifiers(r){this.q(r),this.j.fire()}q(r){for(const t of r)this.i.add(t);this.y()}r(r,t,s){r.forEach(o=>{this.u(o,t,o.extensionInfo,o.restrictedProperties,void 0,s),this.d.push(o),this.v(o)})}s(r,t){const s=o=>{if(o.properties)for(const l in o.properties){t.add(l);const p=this.e[l];p?.policy?.name&&this.f.delete(p.policy.name),delete this.e[l],this.x(l,o.properties[l])}o.allOf?.forEach(l=>s(l))};for(const o of r){s(o);const l=this.d.indexOf(o);l!==-1&&this.d.splice(l,1)}}u(r,t=!0,s,o,l=d.WINDOW,p){l=y.$sg(r.scope)?l:r.scope;const A=r.properties;if(A)for(const N in A){const D=A[N];if(t&&R(N,D)){delete A[N];continue}if(D.source=s,D.defaultDefaultValue=A[N].default,this.A(N,D),e.$Mo.test(N)?D.scope=void 0:(D.scope=y.$sg(D.scope)?l:D.scope,D.restricted=y.$sg(D.restricted)?!!o?.includes(N):D.restricted),A[N].hasOwnProperty("included")&&!A[N].included){this.g[N]=A[N],delete A[N];continue}else this.e[N]=A[N],A[N].policy?.name&&this.f.set(A[N].policy.name,N);!A[N].deprecationMessage&&A[N].markdownDeprecationMessage&&(A[N].deprecationMessage=A[N].markdownDeprecationMessage),p.add(N)}const T=r.allOf;if(T)for(const N of T)this.u(N,t,s,o,l,p)}getConfigurations(){return this.d}getConfigurationProperties(){return this.e}getPolicyConfigurations(){return this.f}getExcludedConfigurationProperties(){return this.g}getRegisteredDefaultConfigurations(){return[...this.a]}getConfigurationDefaultsOverrides(){const r=new Map;for(const[t,s]of this.b)s.configurationDefaultOverrideValue&&r.set(t,s.configurationDefaultOverrideValue);return r}v(r){const t=s=>{const o=s.properties;if(o)for(const p in o)this.w(p,o[p]);s.allOf?.forEach(t)};t(r)}w(r,t){switch(e.$Do.properties[r]=t,t.scope){case d.APPLICATION:e.$Eo.properties[r]=t;break;case d.MACHINE:e.$Fo.properties[r]=t;break;case d.MACHINE_OVERRIDABLE:e.$Go.properties[r]=t;break;case d.WINDOW:e.$Ho.properties[r]=t;break;case d.RESOURCE:e.$Io.properties[r]=t;break;case d.LANGUAGE_OVERRIDABLE:e.$Io.properties[r]=t,this.h.properties[r]=t;break}}x(r,t){switch(delete e.$Do.properties[r],t.scope){case d.APPLICATION:delete e.$Eo.properties[r];break;case d.MACHINE:delete e.$Fo.properties[r];break;case d.MACHINE_OVERRIDABLE:delete e.$Go.properties[r];break;case d.WINDOW:delete e.$Ho.properties[r];break;case d.RESOURCE:case d.LANGUAGE_OVERRIDABLE:delete e.$Io.properties[r],delete this.h.properties[r];break}}y(){for(const r of this.i.values()){const t=`[${r}]`,s={type:"object",description:k.localize(1664,null),errorMessage:k.localize(1665,null),$ref:e.$Jo};this.A(t,s),e.$Do.properties[t]=s,e.$Eo.properties[t]=s,e.$Fo.properties[t]=s,e.$Go.properties[t]=s,e.$Ho.properties[t]=s,e.$Io.properties[t]=s}}z(){const r={type:"object",description:k.localize(1666,null),errorMessage:k.localize(1667,null),$ref:e.$Jo};e.$Do.patternProperties[e.$Lo]=r,e.$Eo.patternProperties[e.$Lo]=r,e.$Fo.patternProperties[e.$Lo]=r,e.$Go.patternProperties[e.$Lo]=r,e.$Ho.patternProperties[e.$Lo]=r,e.$Io.patternProperties[e.$Lo]=r,this.j.fire()}A(r,t){const s=this.b.get(r)?.configurationDefaultOverrideValue;let o,l;s&&(!t.disallowConfigurationDefault||!s.source)&&(o=s.value,l=s.source),y.$qg(o)&&(o=t.defaultDefaultValue,l=void 0),y.$qg(o)&&(o=v(t.type)),t.default=o,t.defaultValueSource=l}}const a="\\[([^\\]]+)\\]",$=new RegExp(a,"g");e.$Lo=`^(${a})+$`,e.$Mo=new RegExp(e.$Lo);function S(n){const r=[];if(e.$Mo.test(n)){let t=$.exec(n);for(;t?.length;){const s=t[1].trim();s&&r.push(s),t=$.exec(n)}}return(0,P.$Qb)(r)}function b(n){return n.reduce((r,t)=>`${r}[${t}]`,"")}function v(n){switch(Array.isArray(n)?n[0]:n){case"boolean":return!1;case"integer":case"number":return 0;case"string":return"";case"array":return[];case"object":return{};default:return null}}const h=new m;g.$xo.add(e.$Co.Configuration,h);function R(n,r){return n.trim()?e.$Mo.test(n)?k.localize(1669,null,n):h.getConfigurationProperties()[n]!==void 0?k.localize(1670,null,n):r.policy?.name&&h.getPolicyConfigurations().get(r.policy?.name)!==void 0?k.localize(1671,null,n,r.policy?.name,h.getPolicyConfigurations().get(r.policy?.name)):null:k.localize(1668,null)}function w(){const n=[],r=h.getConfigurationProperties();for(const t of Object.keys(r))n.push([t,r[t].scope]);return n.push(["launch",d.RESOURCE]),n.push(["task",d.RESOURCE]),n}function i(n){const r={};for(const t of n){const s=t.properties;if(y.$lg(s))for(const o in s)r[o]=s[o];t.allOf&&Object.assign(r,i(t.allOf))}return r}function c(n){switch(n){case"application":return d.APPLICATION;case"machine":return d.MACHINE;case"resource":return d.RESOURCE;case"machine-overridable":return d.MACHINE_OVERRIDABLE;case"language-overridable":return d.LANGUAGE_OVERRIDABLE;default:return d.WINDOW}}}),define(le[67],he([0,1,19,5,34,2,25,27,3,12,30,40,9,37]),function(Q,e,P,I,y,k,C,O,g,u,d,f,m,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$Zo=e.$Xo=e.$Wo=e.$Vo=e.$Uo=void 0,e.$Yo=w,P=be(P),y=be(y),O=be(O),g=be(g);function $(r){return Object.isFrozen(r)?r:O.$lo(r)}class S{static createEmptyModel(t){return new S({},[],[],void 0,t)}constructor(t,s,o,l,p){this.b=t,this.c=s,this.d=o,this.raw=l,this.f=p,this.a=new Map}get rawConfiguration(){if(!this.g)if(this.raw?.length){const t=this.raw.map(s=>{if(s instanceof S)return s;const o=new b("",this.f);return o.parseRaw(s),o.configurationModel});this.g=t.reduce((s,o)=>o===s?o:s.merge(o),t[0])}else this.g=this;return this.g}get contents(){return this.b}get overrides(){return this.d}get keys(){return this.c}isEmpty(){return this.c.length===0&&Object.keys(this.b).length===0&&this.d.length===0}getValue(t){return t?(0,d.$mj)(this.contents,t):this.contents}inspect(t,s){const o=this;return{get value(){return $(o.rawConfiguration.getValue(t))},get override(){return s?$(o.rawConfiguration.getOverrideValue(t,s)):void 0},get merged(){return $(s?o.rawConfiguration.override(s).getValue(t):o.rawConfiguration.getValue(t))},get overrides(){const l=[];for(const{contents:p,identifiers:A,keys:T}of o.rawConfiguration.overrides){const N=new S(p,T,[],void 0,o.f).getValue(t);N!==void 0&&l.push({identifiers:A,value:N})}return l.length?$(l):void 0}}}getOverrideValue(t,s){const o=this.j(s);return o?t?(0,d.$mj)(o,t):o:void 0}getKeysForOverrideIdentifier(t){const s=[];for(const o of this.overrides)o.identifiers.includes(t)&&s.push(...o.keys);return P.$Qb(s)}getAllOverrideIdentifiers(){const t=[];for(const s of this.overrides)t.push(...s.identifiers);return P.$Qb(t)}override(t){let s=this.a.get(t);return s||(s=this.h(t),this.a.set(t,s)),s}merge(...t){const s=O.$ko(this.contents),o=O.$ko(this.overrides),l=[...this.keys],p=this.raw?.length?[...this.raw]:[this];for(const A of t)if(p.push(...A.raw?.length?A.raw:[A]),!A.isEmpty()){this.i(s,A.contents);for(const T of A.overrides){const[N]=o.filter(D=>P.$yb(D.identifiers,T.identifiers));N?(this.i(N.contents,T.contents),N.keys.push(...T.keys),N.keys=P.$Qb(N.keys)):o.push(O.$ko(T))}for(const T of A.keys)l.indexOf(T)===-1&&l.push(T)}return new S(s,l,o,p.every(A=>A instanceof S)?void 0:p,this.f)}h(t){const s=this.j(t);if(!s||typeof s!="object"||!Object.keys(s).length)return this;const o={};for(const l of P.$Qb([...Object.keys(this.contents),...Object.keys(s)])){let p=this.contents[l];const A=s[l];A&&(typeof p=="object"&&typeof A=="object"?(p=O.$ko(p),this.i(p,A)):p=A),o[l]=p}return new S(o,this.keys,this.overrides,void 0,this.f)}i(t,s){for(const o of Object.keys(s)){if(o in t&&g.$lg(t[o])&&g.$lg(s[o])){this.i(t[o],s[o]);continue}t[o]=O.$ko(s[o])}}j(t){let s=null,o=null;const l=p=>{p&&(o?this.i(o,p):o=O.$ko(p))};for(const p of this.overrides)p.identifiers.length===1&&p.identifiers[0]===t?s=p.contents:p.identifiers.includes(t)&&l(p.contents);return l(s),o}toJSON(){return{contents:this.contents,overrides:this.overrides,keys:this.keys}}addValue(t,s){this.k(t,s,!0)}setValue(t,s){this.k(t,s,!1)}removeValue(t){const s=this.keys.indexOf(t);s!==-1&&(this.keys.splice(s,1),(0,d.$lj)(this.contents,t),f.$Mo.test(t)&&this.overrides.splice(this.overrides.findIndex(o=>P.$yb(o.identifiers,(0,f.$No)(t))),1))}k(t,s,o){if((0,d.$kj)(this.contents,t,s,l=>this.f.error(l)),o=o||this.keys.indexOf(t)===-1,o&&this.keys.push(t),f.$Mo.test(t)){const l=(0,f.$No)(t),p={identifiers:l,keys:Object.keys(this.contents[t]),contents:(0,d.$jj)(this.contents[t],T=>this.f.error(T))},A=this.overrides.findIndex(T=>P.$yb(T.identifiers,l));A!==-1?this.overrides[A]=p:this.overrides.push(p)}}}e.$Uo=S;class b{constructor(t,s){this.f=t,this.g=s,this.a=null,this.b=null,this.c=[],this.d=[]}get configurationModel(){return this.b||S.createEmptyModel(this.g)}get restrictedConfigurations(){return this.c}get errors(){return this.d}parse(t,s){if(!g.$sg(t)){const o=this.h(t);this.parseRaw(o,s)}}reparse(t){this.a&&this.parseRaw(this.a,t)}parseRaw(t,s){this.a=t;const{contents:o,keys:l,overrides:p,restricted:A,hasExcludedProperties:T}=this.i(t,s);this.b=new S(o,l,p,T?[t]:void 0,this.g),this.c=A||[]}h(t){let s={},o=null,l=[];const p=[],A=[];function T(D){Array.isArray(l)?l.push(D):o!==null&&(l[o]=D)}const N={onObjectBegin:()=>{const D={};T(D),p.push(l),l=D,o=null},onObjectProperty:D=>{o=D},onObjectEnd:()=>{l=p.pop()},onArrayBegin:()=>{const D=[];T(D),p.push(l),l=D,o=null},onArrayEnd:()=>{l=p.pop()},onLiteralValue:T,onError:(D,j,x)=>{A.push({error:D,offset:j,length:x})}};if(t)try{y.$_n(t,N),s=l[0]||{}}catch(D){this.g.error(`Error while parsing settings file ${this.f}: ${D}`),this.d=[D]}return s}i(t,s){const o=a.$xo.as(f.$Co.Configuration).getConfigurationProperties(),l=this.j(t,o,!0,s);t=l.raw;const p=(0,d.$jj)(t,N=>this.g.error(`Conflict in settings file ${this.f}: ${N}`)),A=Object.keys(t),T=this.l(t,N=>this.g.error(`Conflict in settings file ${this.f}: ${N}`));return{contents:p,keys:A,overrides:T,restricted:l.restricted,hasExcludedProperties:l.hasExcludedProperties}}j(t,s,o,l){let p=!1;if(!l?.scopes&&!l?.skipRestricted&&!l?.exclude?.length)return{raw:t,restricted:[],hasExcludedProperties:p};const A={},T=[];for(const N in t)if(f.$Mo.test(N)&&o){const D=this.j(t[N],s,!1,l);A[N]=D.raw,p=p||D.hasExcludedProperties,T.push(...D.restricted)}else{const D=s[N],j=D?typeof D.scope<"u"?D.scope:f.ConfigurationScope.WINDOW:void 0;D?.restricted&&T.push(N),!l.exclude?.includes(N)&&(l.include?.includes(N)||(j===void 0||l.scopes===void 0||l.scopes.includes(j))&&!(l.skipRestricted&&D?.restricted))?A[N]=t[N]:p=!0}return{raw:A,restricted:T,hasExcludedProperties:p}}l(t,s){const o=[];for(const l of Object.keys(t))if(f.$Mo.test(l)){const p={};for(const A in t[l])p[A]=t[l][A];o.push({identifiers:(0,f.$No)(l),keys:Object.keys(p),contents:(0,d.$jj)(p,s)})}return o}}e.$Vo=b;class v extends k.$Zc{constructor(t,s,o,l,p){super(),this.c=t,this.f=s,this.g=l,this.h=p,this.b=this.B(new I.$qe),this.onDidChange=this.b.event,this.a=new b(this.c.toString(),p),this.B(this.g.watch(o.dirname(this.c))),this.B(this.g.watch(this.c)),this.B(I.Event.any(I.Event.filter(this.g.onDidFilesChange,A=>A.contains(this.c)),I.Event.filter(this.g.onDidRunOperation,A=>(A.isOperation(m.FileOperation.CREATE)||A.isOperation(m.FileOperation.COPY)||A.isOperation(m.FileOperation.DELETE)||A.isOperation(m.FileOperation.WRITE))&&o.isEqual(A.resource,t)))(()=>this.b.fire()))}async loadConfiguration(){try{const t=await this.g.readFile(this.c);return this.a.parse(t.value.toString()||"{}",this.f),this.a.configurationModel}catch{return S.createEmptyModel(this.h)}}reparse(t){return t&&(this.f=t),this.a.reparse(this.f),this.a.configurationModel}getRestrictedSettings(){return this.a.restrictedConfigurations}}e.$Wo=v;class h{constructor(t,s,o,l,p,A,T,N,D,j,x,Y,ne){this.a=t,this.b=s,this.c=o,this.overrideIdentifiers=l,this.d=p,this.f=A,this.g=T,this.h=N,this.i=D,this.j=j,this.k=x,this.l=Y,this.m=ne}get value(){return $(this.c)}n(t){return t?.value!==void 0||t?.override!==void 0||t?.overrides!==void 0?t:void 0}get q(){return this.p||(this.p=this.d.inspect(this.a,this.b.overrideIdentifier)),this.p}get defaultValue(){return this.q.merged}get default(){return this.n(this.q)}get s(){return this.r===void 0&&(this.r=this.f?this.f.inspect(this.a):null),this.r}get policyValue(){return this.s?.merged}get policy(){return this.s?.value!==void 0?{value:this.s.value}:void 0}get u(){return this.t===void 0&&(this.t=this.g?this.g.inspect(this.a):null),this.t}get applicationValue(){return this.u?.merged}get application(){return this.n(this.u)}get w(){return this.v||(this.v=this.h.inspect(this.a,this.b.overrideIdentifier)),this.v}get userValue(){return this.w.merged}get user(){return this.n(this.w)}get y(){return this.x||(this.x=this.i.inspect(this.a,this.b.overrideIdentifier)),this.x}get userLocalValue(){return this.y.merged}get userLocal(){return this.n(this.y)}get A(){return this.z||(this.z=this.j.inspect(this.a,this.b.overrideIdentifier)),this.z}get userRemoteValue(){return this.A.merged}get userRemote(){return this.n(this.A)}get D(){return this.B===void 0&&(this.B=this.k?this.k.inspect(this.a,this.b.overrideIdentifier):null),this.B}get workspaceValue(){return this.D?.merged}get workspace(){return this.n(this.D)}get F(){return this.E===void 0&&(this.E=this.l?this.l.inspect(this.a,this.b.overrideIdentifier):null),this.E}get workspaceFolderValue(){return this.F?.merged}get workspaceFolder(){return this.n(this.F)}get H(){return this.G===void 0&&(this.G=this.m.inspect(this.a,this.b.overrideIdentifier)),this.G}get memoryValue(){return this.H.merged}get memory(){return this.n(this.H)}}class R{constructor(t,s,o,l,p,A,T,N,D,j){this.j=t,this.l=s,this.m=o,this.n=l,this.p=p,this.q=A,this.r=T,this.s=N,this.t=D,this.u=j,this.h=null,this.i=new C.$Fc,this.v=null}getValue(t,s,o){return this.w(t,s,o).getValue(t)}updateValue(t,s,o={}){let l;o.resource?(l=this.t.get(o.resource),l||(l=S.createEmptyModel(this.u),this.t.set(o.resource,l))):l=this.s,s===void 0?l.removeValue(t):l.setValue(t,s),o.resource||(this.h=null)}inspect(t,s,o){const l=this.w(t,s,o),p=this.A(s.resource,o),A=s.resource?this.t.get(s.resource)||this.s:this.s,T=new Set;for(const N of l.overrides)for(const D of N.identifiers)l.getOverrideValue(t,D)!==void 0&&T.add(D);return new h(t,s,l.getValue(t),T.size?[...T]:void 0,this.j,this.l.isEmpty()?void 0:this.l,this.applicationConfiguration.isEmpty()?void 0:this.applicationConfiguration,this.userConfiguration,this.localUserConfiguration,this.remoteUserConfiguration,o?this.q:void 0,p||void 0,A)}keys(t){const s=this.A(void 0,t);return{default:this.j.keys.slice(0),user:this.userConfiguration.keys.slice(0),workspace:this.q.keys.slice(0),workspaceFolder:s?s.keys.slice(0):[]}}updateDefaultConfiguration(t){this.j=t,this.h=null,this.i.clear()}updatePolicyConfiguration(t){this.l=t}updateApplicationConfiguration(t){this.m=t,this.h=null,this.i.clear()}updateLocalUserConfiguration(t){this.n=t,this.v=null,this.h=null,this.i.clear()}updateRemoteUserConfiguration(t){this.p=t,this.v=null,this.h=null,this.i.clear()}updateWorkspaceConfiguration(t){this.q=t,this.h=null,this.i.clear()}updateFolderConfiguration(t,s){this.r.set(t,s),this.i.delete(t)}deleteFolderConfiguration(t){this.folderConfigurations.delete(t),this.i.delete(t)}compareAndUpdateDefaultConfiguration(t,s){const o=[];if(!s){const{added:l,updated:p,removed:A}=c(this.j,t);s=[...l,...p,...A]}for(const l of s)for(const p of(0,f.$No)(l)){const A=this.j.getKeysForOverrideIdentifier(p),T=t.getKeysForOverrideIdentifier(p),N=[...T.filter(D=>A.indexOf(D)===-1),...A.filter(D=>T.indexOf(D)===-1),...A.filter(D=>!O.$oo(this.j.override(p).getValue(D),t.override(p).getValue(D)))];o.push([p,N])}return this.updateDefaultConfiguration(t),{keys:s,overrides:o}}compareAndUpdatePolicyConfiguration(t){const{added:s,updated:o,removed:l}=c(this.l,t),p=[...s,...o,...l];return p.length&&this.updatePolicyConfiguration(t),{keys:p,overrides:[]}}compareAndUpdateApplicationConfiguration(t){const{added:s,updated:o,removed:l,overrides:p}=c(this.applicationConfiguration,t),A=[...s,...o,...l];return A.length&&this.updateApplicationConfiguration(t),{keys:A,overrides:p}}compareAndUpdateLocalUserConfiguration(t){const{added:s,updated:o,removed:l,overrides:p}=c(this.localUserConfiguration,t),A=[...s,...o,...l];return A.length&&this.updateLocalUserConfiguration(t),{keys:A,overrides:p}}compareAndUpdateRemoteUserConfiguration(t){const{added:s,updated:o,removed:l,overrides:p}=c(this.remoteUserConfiguration,t),A=[...s,...o,...l];return A.length&&this.updateRemoteUserConfiguration(t),{keys:A,overrides:p}}compareAndUpdateWorkspaceConfiguration(t){const{added:s,updated:o,removed:l,overrides:p}=c(this.workspaceConfiguration,t),A=[...s,...o,...l];return A.length&&this.updateWorkspaceConfiguration(t),{keys:A,overrides:p}}compareAndUpdateFolderConfiguration(t,s){const o=this.folderConfigurations.get(t),{added:l,updated:p,removed:A,overrides:T}=c(o,s),N=[...l,...p,...A];return(N.length||!o)&&this.updateFolderConfiguration(t,s),{keys:N,overrides:T}}compareAndDeleteFolderConfiguration(t){const s=this.folderConfigurations.get(t);if(!s)throw new Error("Unknown folder");this.deleteFolderConfiguration(t);const{added:o,updated:l,removed:p,overrides:A}=c(s,void 0);return{keys:[...o,...l,...p],overrides:A}}get defaults(){return this.j}get applicationConfiguration(){return this.m}get userConfiguration(){return this.v||(this.v=this.p.isEmpty()?this.n:this.n.merge(this.p)),this.v}get localUserConfiguration(){return this.n}get remoteUserConfiguration(){return this.p}get workspaceConfiguration(){return this.q}get folderConfigurations(){return this.r}w(t,s,o){let l=this.x(s,o);return s.overrideIdentifier&&(l=l.override(s.overrideIdentifier)),!this.l.isEmpty()&&this.l.getValue(t)!==void 0&&(l=l.merge(this.l)),l}x({resource:t},s){let o=this.y();if(s&&t){const l=s.getFolder(t);l&&(o=this.z(l.uri)||o);const p=this.t.get(t);p&&(o=o.merge(p))}return o}y(){return this.h||(this.h=this.j.merge(this.applicationConfiguration,this.userConfiguration,this.q,this.s)),this.h}z(t){let s=this.i.get(t);if(!s){const o=this.y(),l=this.r.get(t);l?(s=o.merge(l),this.i.set(t,s)):s=o}return s}A(t,s){if(s&&t){const o=s.getFolder(t);if(o)return this.r.get(o.uri)}}toData(){return{defaults:{contents:this.j.contents,overrides:this.j.overrides,keys:this.j.keys},policy:{contents:this.l.contents,overrides:this.l.overrides,keys:this.l.keys},application:{contents:this.applicationConfiguration.contents,overrides:this.applicationConfiguration.overrides,keys:this.applicationConfiguration.keys},user:{contents:this.userConfiguration.contents,overrides:this.userConfiguration.overrides,keys:this.userConfiguration.keys},workspace:{contents:this.q.contents,overrides:this.q.overrides,keys:this.q.keys},folders:[...this.r.keys()].reduce((t,s)=>{const{contents:o,overrides:l,keys:p}=this.r.get(s);return t.push([s,{contents:o,overrides:l,keys:p}]),t},[])}}allKeys(){const t=new Set;return this.j.keys.forEach(s=>t.add(s)),this.userConfiguration.keys.forEach(s=>t.add(s)),this.q.keys.forEach(s=>t.add(s)),this.r.forEach(s=>s.keys.forEach(o=>t.add(o))),[...t.values()]}B(){const t=new Set;return this.j.getAllOverrideIdentifiers().forEach(s=>t.add(s)),this.userConfiguration.getAllOverrideIdentifiers().forEach(s=>t.add(s)),this.q.getAllOverrideIdentifiers().forEach(s=>t.add(s)),this.r.forEach(s=>s.getAllOverrideIdentifiers().forEach(o=>t.add(o))),[...t.values()]}D(t){const s=new Set;return this.j.getKeysForOverrideIdentifier(t).forEach(o=>s.add(o)),this.userConfiguration.getKeysForOverrideIdentifier(t).forEach(o=>s.add(o)),this.q.getKeysForOverrideIdentifier(t).forEach(o=>s.add(o)),this.r.forEach(o=>o.getKeysForOverrideIdentifier(t).forEach(l=>s.add(l))),[...s.values()]}static parse(t,s){const o=this.E(t.defaults,s),l=this.E(t.policy,s),p=this.E(t.application,s),A=this.E(t.user,s),T=this.E(t.workspace,s),N=t.folders.reduce((D,j)=>(D.set(u.URI.revive(j[0]),this.E(j[1],s)),D),new C.$Fc);return new R(o,l,p,A,S.createEmptyModel(s),T,N,S.createEmptyModel(s),new C.$Fc,s)}static E(t,s){return new S(t.contents,t.keys,t.overrides,void 0,s)}}e.$Xo=R;function w(...r){if(r.length===0)return{keys:[],overrides:[]};if(r.length===1)return r[0];const t=new Set,s=new Map;for(const l of r)l.keys.forEach(p=>t.add(p)),l.overrides.forEach(([p,A])=>{const T=(0,C.$Cc)(s,p,new Set);A.forEach(N=>T.add(N))});const o=[];return s.forEach((l,p)=>o.push([p,[...l.values()]])),{keys:[...t.values()],overrides:o}}class i{constructor(t,s,o,l,p){this.change=t,this.f=s,this.g=o,this.h=l,this.i=p,this.a=`
`,this.b=this.a.charCodeAt(0),this.c=46,this.affectedKeys=new Set,this.j=void 0;for(const A of t.keys)this.affectedKeys.add(A);for(const[,A]of t.overrides)for(const T of A)this.affectedKeys.add(T);this.d=this.a;for(const A of this.affectedKeys)this.d+=A+this.a}get previousConfiguration(){return!this.j&&this.f&&(this.j=R.parse(this.f.data,this.i)),this.j}affectsConfiguration(t,s){const o=this.a+t,l=this.d.indexOf(o);if(l<0)return!1;const p=l+o.length;if(p>=this.d.length)return!1;const A=this.d.charCodeAt(p);if(A!==this.b&&A!==this.c)return!1;if(s){const T=this.previousConfiguration?this.previousConfiguration.getValue(t,s,this.f?.workspace):void 0,N=this.g.getValue(t,s,this.h);return!O.$oo(T,N)}return!0}}e.$Zo=i;function c(r,t){const{added:s,removed:o,updated:l}=n(t?.rawConfiguration,r?.rawConfiguration),p=[],A=r?.getAllOverrideIdentifiers()||[],T=t?.getAllOverrideIdentifiers()||[];if(t){const N=T.filter(D=>!A.includes(D));for(const D of N)p.push([D,t.getKeysForOverrideIdentifier(D)])}if(r){const N=A.filter(D=>!T.includes(D));for(const D of N)p.push([D,r.getKeysForOverrideIdentifier(D)])}if(t&&r){for(const N of A)if(T.includes(N)){const D=n({contents:r.getOverrideValue(void 0,N)||{},keys:r.getKeysForOverrideIdentifier(N)},{contents:t.getOverrideValue(void 0,N)||{},keys:t.getKeysForOverrideIdentifier(N)});p.push([N,[...D.added,...D.removed,...D.updated]])}}return{added:s,removed:o,updated:l,overrides:p}}function n(r,t){const s=r?t?r.keys.filter(p=>t.keys.indexOf(p)===-1):[...r.keys]:[],o=t?r?t.keys.filter(p=>r.keys.indexOf(p)===-1):[...t.keys]:[],l=[];if(r&&t){for(const p of t.keys)if(r.keys.indexOf(p)!==-1){const A=(0,d.$mj)(t.contents,p),T=(0,d.$mj)(r.contents,p);O.$oo(A,T)||l.push(p)}}return{added:s,removed:o,updated:l}}}),define(le[117],he([0,1,19,5,2,27,3,67,40,6,39,37]),function(Q,e,P,I,y,k,C,O,g,u,d,f){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$3o=e.$2o=e.$1o=void 0;class m extends y.$Zc{get configurationModel(){return this.b}constructor(b){super(),this.c=b,this.a=this.B(new I.$qe),this.onDidChangeConfiguration=this.a.event,this.b=O.$Uo.createEmptyModel(this.c)}async initialize(){return this.h(),this.B(f.$xo.as(g.$Co.Configuration).onDidUpdateConfiguration(({properties:b,defaultsOverrides:v})=>this.f(Array.from(b),v))),this.configurationModel}reload(){return this.h(),this.configurationModel}f(b,v){this.j(b,f.$xo.as(g.$Co.Configuration).getConfigurationProperties()),this.a.fire({defaults:this.configurationModel,properties:b})}g(){return{}}h(){this.b=O.$Uo.createEmptyModel(this.c);const b=f.$xo.as(g.$Co.Configuration).getConfigurationProperties();this.j(Object.keys(b),b)}j(b,v){const h=this.g();for(const R of b){const w=h[R],i=v[R];w!==void 0?this.b.setValue(R,w):i?this.b.setValue(R,i.default):this.b.removeValue(R)}}}e.$1o=m;class a{constructor(){this.onDidChangeConfiguration=I.Event.None,this.configurationModel=O.$Uo.createEmptyModel(new u.$sk)}async initialize(){return this.configurationModel}}e.$2o=a;let $=class extends y.$Zc{get configurationModel(){return this.b}constructor(b,v,h){super(),this.c=b,this.f=v,this.g=h,this.a=this.B(new I.$qe),this.onDidChangeConfiguration=this.a.event,this.b=O.$Uo.createEmptyModel(this.g)}async initialize(){return this.g.trace("PolicyConfiguration#initialize"),this.m(await this.h(this.c.configurationModel.keys),!1),this.B(this.f.onDidChange(b=>this.j(b))),this.B(this.c.onDidChangeConfiguration(async({properties:b})=>this.m(await this.h(b),!0))),this.b}async h(b){this.g.trace("PolicyConfiguration#updatePolicyDefinitions",b);const v={},h=[],R=f.$xo.as(g.$Co.Configuration).getConfigurationProperties();for(const w of b){const i=R[w];if(!i){h.push(w);continue}if(i.policy){if(i.type!=="string"&&i.type!=="number"){this.g.warn(`Policy ${i.policy.name} has unsupported type ${i.type}`);continue}h.push(w),v[i.policy.name]={type:i.type}}}return(0,C.$wg)(v)||await this.f.updatePolicyDefinitions(v),h}j(b){this.g.trace("PolicyConfiguration#onDidChangePolicies",b);const v=f.$xo.as(g.$Co.Configuration).getPolicyConfigurations(),h=(0,P.$Lb)(b.map(R=>v.get(R)));this.m(h,!0)}m(b,v){this.g.trace("PolicyConfiguration#update",b);const h=f.$xo.as(g.$Co.Configuration).getConfigurationProperties(),R=[],w=this.b.isEmpty();for(const i of b){const c=h[i]?.policy?.name;if(c){const n=this.f.getPolicyValue(c);(w?n!==void 0:!(0,k.$oo)(this.b.getValue(i),n))&&R.push([i,n])}else this.b.getValue(i)!==void 0&&R.push([i,void 0])}if(R.length){this.g.trace("PolicyConfiguration#changed",R);const i=this.b;this.b=O.$Uo.createEmptyModel(this.g);for(const c of i.keys)this.b.setValue(c,i.getValue(c));for(const[c,n]of R)n===void 0?this.b.removeValue(c):this.b.setValue(c,n);v&&this.a.fire(this.b)}}};e.$3o=$,e.$3o=$=Ee([oe(1,d.$zo),oe(2,u.$fk)],$)}),define(le[118],he([0,1,19,8,13,5,34,78,2,25,27,11,16,30,67,40,117,9,39]),function(Q,e,P,I,y,k,C,O,g,u,d,f,m,a,$,S,b,v,h){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$4o=void 0;class R extends g.$Zc{constructor(c,n,r,t){super(),this.m=c,this.n=t,this.h=this.B(new k.$qe),this.onDidChangeConfiguration=this.h.event,this.b=this.B(new b.$1o(t)),this.c=r instanceof h.$Bo?new b.$2o:this.B(new b.$3o(this.b,r,t)),this.f=this.B(new $.$Wo(this.m,{},m.$ch,n,t)),this.a=new $.$Xo(this.b.configurationModel,this.c.configurationModel,$.$Uo.createEmptyModel(t),$.$Uo.createEmptyModel(t),$.$Uo.createEmptyModel(t),$.$Uo.createEmptyModel(t),new u.$Fc,$.$Uo.createEmptyModel(t),new u.$Fc,t),this.j=new w(c,n,this),this.g=this.B(new I.$Wh(()=>this.reloadConfiguration(),50)),this.B(this.b.onDidChangeConfiguration(({defaults:s,properties:o})=>this.s(s,o))),this.B(this.c.onDidChangeConfiguration(s=>this.t(s))),this.B(this.f.onDidChange(()=>this.g.schedule()))}async initialize(){const[c,n,r]=await Promise.all([this.b.initialize(),this.c.initialize(),this.f.loadConfiguration()]);this.a=new $.$Xo(c,n,$.$Uo.createEmptyModel(this.n),r,$.$Uo.createEmptyModel(this.n),$.$Uo.createEmptyModel(this.n),new u.$Fc,$.$Uo.createEmptyModel(this.n),new u.$Fc,this.n)}getConfigurationData(){return this.a.toData()}getValue(c,n){const r=typeof c=="string"?c:void 0,t=(0,a.$fj)(c)?c:(0,a.$fj)(n)?n:{};return this.a.getValue(r,t,void 0)}async updateValue(c,n,r,t,s){const o=(0,a.$gj)(r)?r:(0,a.$fj)(r)?{resource:r.resource,overrideIdentifiers:r.overrideIdentifier?[r.overrideIdentifier]:void 0}:void 0,l=o?t:r;if(l!==void 0&&l!==a.ConfigurationTarget.USER_LOCAL&&l!==a.ConfigurationTarget.USER)throw new Error(`Unable to write ${c} to target ${l}.`);o?.overrideIdentifiers&&(o.overrideIdentifiers=(0,P.$Qb)(o.overrideIdentifiers),o.overrideIdentifiers=o.overrideIdentifiers.length?o.overrideIdentifiers:void 0);const p=this.inspect(c,{resource:o?.resource,overrideIdentifier:o?.overrideIdentifiers?o.overrideIdentifiers[0]:void 0});if(p.policyValue!==void 0)throw new Error(`Unable to write ${c} because it is configured in system policy.`);if((0,d.$oo)(n,p.defaultValue)&&(n=void 0),o?.overrideIdentifiers?.length&&o.overrideIdentifiers.length>1){const T=o.overrideIdentifiers.sort(),N=this.a.localUserConfiguration.overrides.find(D=>(0,P.$yb)([...D.identifiers].sort(),T));N&&(o.overrideIdentifiers=N.identifiers)}const A=o?.overrideIdentifiers?.length?[(0,S.$Oo)(o.overrideIdentifiers),c]:[c];await this.j.write(A,n),await this.reloadConfiguration()}inspect(c,n={}){return this.a.inspect(c,n,void 0)}keys(){return this.a.keys(void 0)}async reloadConfiguration(){const c=await this.f.loadConfiguration();this.r(c)}r(c){const n=this.a.toData(),r=this.a.compareAndUpdateLocalUserConfiguration(c);this.u(r,n,a.ConfigurationTarget.USER)}s(c,n){const r=this.a.toData(),t=this.a.compareAndUpdateDefaultConfiguration(c,n);this.u(t,r,a.ConfigurationTarget.DEFAULT)}t(c){const n=this.a.toData(),r=this.a.compareAndUpdatePolicyConfiguration(c);this.u(r,n,a.ConfigurationTarget.DEFAULT)}u(c,n,r){const t=new $.$Zo(c,{data:n},this.a,void 0,this.n);t.source=r,this.h.fire(t)}}e.$4o=R;class w{constructor(c,n,r){this.b=c,this.c=n,this.d=r,this.a=new I.$Rh}write(c,n){return this.a.queue(()=>this.e(c,n))}async e(c,n){let r;try{r=(await this.c.readFile(this.b)).value.toString()}catch(o){if(o.fileOperationResult===v.FileOperationResult.FILE_NOT_FOUND)r="{}";else throw o}const t=[];if((0,C.$5n)(r,t,{allowTrailingComma:!0,allowEmptyContent:!0}),t.length>0)throw new Error("Unable to write into the settings file. Please open the file to correct errors/warnings in the file and try again.");const s=this.f(r,c,n);r=(0,O.$jo)(r,s),await this.c.writeFile(this.b,y.$Se.fromString(r))}f(c,n,r){const{tabSize:t,insertSpaces:s,eol:o}=this.h;if(!n.length){const l=JSON.stringify(r,null,s?" ".repeat(t):"	");return[{content:l,length:l.length,offset:0}]}return(0,O.$go)(c,n,r,{tabSize:t,insertSpaces:s,eol:o})}get h(){if(!this.g){let c=f.OS===f.OperatingSystem.Linux||f.OS===f.OperatingSystem.Macintosh?`
`:`\r
`;const n=this.d.getValue("files.eol",{overrideIdentifier:"jsonc"});n&&typeof n=="string"&&n!=="auto"&&(c=n),this.g={eol:c,insertSpaces:!!this.d.getValue("editor.insertSpaces",{overrideIdentifier:"jsonc"}),tabSize:this.d.getValue("editor.tabSize",{overrideIdentifier:"jsonc"})}}return this.g}}}),define(le[68],he([0,1,14]),function(Q,e,P){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$nn=I,e.$on=y,e.$pn=k,e.$qn=C;function I(g){return g.scheme===P.Schemas.vscodeRemote?g.authority:void 0}function y(g){if(!g)return;const u=g.indexOf("+");return u<0?g:g.substr(0,u)}function k(g){const{host:u,port:d}=O(g);if(typeof d>"u")throw new Error(`Invalid remote authority: ${g}. It must either be a remote of form <remoteName>+<arg> or a remote host of form <host>:<port>.`);return{host:u,port:d}}function C(g,u){let{host:d,port:f}=O(g);return typeof f>"u"&&(f=u),{host:d,port:f}}function O(g){const u=g.match(/^(\[[0-9a-z:]+\]):(\d+)$/);if(u)return{host:u[1],port:parseInt(u[2],10)};const d=g.match(/^(\[[0-9a-z:]+\])$/);if(d)return{host:d[1],port:void 0};const f=g.match(/(.*):(\d+)$/);return f?{host:f[1],port:parseInt(f[2],10)}:{host:g,port:void 0}}}),define(le[22],he([0,1,31,10,68]),function(Q,e,P,I,y){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$Gn=e.$zn=e.$yn=e.$xn=e.TargetPlatform=e.ExtensionType=e.$wn=e.$un=e.$tn=e.$sn=e.$rn=void 0,e.$vn=k,e.$An=f,e.$Bn=m,e.$Cn=a,e.$Dn=$,e.$En=S,e.$Fn=b,P=be(P),e.$rn="extensions.user.cache",e.$sn="extensions.builtin.cache",e.$tn="undefined_publisher",e.$un=["ui","workspace","web"];function k(v){if(typeof v=="object"&&v!==null&&v.supported!==!0)return v.description}e.$wn=["AI","Azure","Chat","Data Science","Debuggers","Extension Packs","Education","Formatters","Keymaps","Language Packs","Linters","Machine Learning","Notebooks","Programming Languages","SCM Providers","Snippets","Testing","Themes","Visualization","Other"];var C;(function(v){v[v.System=0]="System",v[v.User=1]="User"})(C||(e.ExtensionType=C={}));var O;(function(v){v.WIN32_X64="win32-x64",v.WIN32_ARM64="win32-arm64",v.LINUX_X64="linux-x64",v.LINUX_ARM64="linux-arm64",v.LINUX_ARMHF="linux-armhf",v.ALPINE_X64="alpine-x64",v.ALPINE_ARM64="alpine-arm64",v.DARWIN_X64="darwin-x64",v.DARWIN_ARM64="darwin-arm64",v.WEB="web",v.UNIVERSAL="universal",v.UNKNOWN="unknown",v.UNDEFINED="undefined"})(O||(e.TargetPlatform=O={}));class g{constructor(h){this.value=h,this._lower=h.toLowerCase()}static equals(h,R){if(typeof h>"u"||h===null)return typeof R>"u"||R===null;if(typeof R>"u"||R===null)return!1;if(typeof h=="string"||typeof R=="string"){const w=typeof h=="string"?h:h.value,i=typeof R=="string"?R:R.value;return P.$Kf(w,i)}return h._lower===R._lower}static toKey(h){return typeof h=="string"?h.toLowerCase():h._lower}}e.$xn=g;class u{get size(){return this.c.size}constructor(h){if(this.c=new Set,h)for(const R of h)this.add(R)}add(h){this.c.add(g.toKey(h))}delete(h){return this.c.delete(g.toKey(h))}has(h){return this.c.has(g.toKey(h))}}e.$yn=u;class d{constructor(){this.c=new Map}clear(){this.c.clear()}delete(h){this.c.delete(g.toKey(h))}get(h){return this.c.get(g.toKey(h))}has(h){return this.c.has(g.toKey(h))}set(h,R){this.c.set(g.toKey(h),R)}values(){return this.c.values()}forEach(h){this.c.forEach(h)}[Symbol.iterator](){return this.c[Symbol.iterator]()}}e.$zn=d;function f(v){return m(v)}function m(v){return v.contributes&&v.contributes.localizations?v.contributes.localizations.length>0:!1}function a(v){return v.contributes&&v.contributes.authentication?v.contributes.authentication.length>0:!1}function $(v,h){if(h){const R=`onResolveRemoteAuthority:${(0,y.$on)(h)}`;return!!v.activationEvents?.includes(R)}return!1}function S(v){return v.map(h=>{const[R,w]=h.split("@");return{proposalName:R,version:w?parseInt(w):void 0}})}function b(v){return v.map(h=>h.split("@")[0])}e.$Gn=(0,I.$Ki)("IBuiltinExtensionsScannerService")}),define(le[20],he([0,1,11,4,22,10]),function(Q,e,P,I,y,k){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$Ap=e.$zp=e.$yp=e.$xp=e.$wp=e.$vp=e.$up=e.$tp=e.ExtensionManagementErrorCode=e.$sp=e.ExtensionGalleryErrorCode=e.$rp=e.InstallOperation=e.StatisticType=e.SortOrder=e.SortBy=e.ExtensionInstallSource=e.$kp=e.$jp=e.$ip=e.$hp=e.$gp=e.$fp=e.$ep=void 0,e.$lp=O,e.$mp=g,e.$np=u,e.$op=d,e.$pp=f,e.$qp=m,e.$ep="^([a-z0-9A-Z][a-z0-9-A-Z]*)\\.([a-z0-9A-Z][a-z0-9-A-Z]*)$",e.$fp=new RegExp(e.$ep),e.$gp="__web_extension",e.$hp="skipWalkthrough",e.$ip="extensionInstallSource",e.$jp="dependecyOrPackExtensionInstall",e.$kp="clientTargetPlatform";var C;(function(i){i.COMMAND="command",i.SETTINGS_SYNC="settingsSync"})(C||(e.ExtensionInstallSource=C={}));function O(i){switch(i){case y.TargetPlatform.WIN32_X64:return"Windows 64 bit";case y.TargetPlatform.WIN32_ARM64:return"Windows ARM";case y.TargetPlatform.LINUX_X64:return"Linux 64 bit";case y.TargetPlatform.LINUX_ARM64:return"Linux ARM 64";case y.TargetPlatform.LINUX_ARMHF:return"Linux ARM";case y.TargetPlatform.ALPINE_X64:return"Alpine Linux 64 bit";case y.TargetPlatform.ALPINE_ARM64:return"Alpine ARM 64";case y.TargetPlatform.DARWIN_X64:return"Mac";case y.TargetPlatform.DARWIN_ARM64:return"Mac Silicon";case y.TargetPlatform.WEB:return"Web";case y.TargetPlatform.UNIVERSAL:return y.TargetPlatform.UNIVERSAL;case y.TargetPlatform.UNKNOWN:return y.TargetPlatform.UNKNOWN;case y.TargetPlatform.UNDEFINED:return y.TargetPlatform.UNDEFINED}}function g(i){switch(i){case y.TargetPlatform.WIN32_X64:return y.TargetPlatform.WIN32_X64;case y.TargetPlatform.WIN32_ARM64:return y.TargetPlatform.WIN32_ARM64;case y.TargetPlatform.LINUX_X64:return y.TargetPlatform.LINUX_X64;case y.TargetPlatform.LINUX_ARM64:return y.TargetPlatform.LINUX_ARM64;case y.TargetPlatform.LINUX_ARMHF:return y.TargetPlatform.LINUX_ARMHF;case y.TargetPlatform.ALPINE_X64:return y.TargetPlatform.ALPINE_X64;case y.TargetPlatform.ALPINE_ARM64:return y.TargetPlatform.ALPINE_ARM64;case y.TargetPlatform.DARWIN_X64:return y.TargetPlatform.DARWIN_X64;case y.TargetPlatform.DARWIN_ARM64:return y.TargetPlatform.DARWIN_ARM64;case y.TargetPlatform.WEB:return y.TargetPlatform.WEB;case y.TargetPlatform.UNIVERSAL:return y.TargetPlatform.UNIVERSAL;default:return y.TargetPlatform.UNKNOWN}}function u(i,c){switch(i){case P.Platform.Windows:return c==="x64"?y.TargetPlatform.WIN32_X64:c==="arm64"?y.TargetPlatform.WIN32_ARM64:y.TargetPlatform.UNKNOWN;case P.Platform.Linux:return c==="x64"?y.TargetPlatform.LINUX_X64:c==="arm64"?y.TargetPlatform.LINUX_ARM64:c==="arm"?y.TargetPlatform.LINUX_ARMHF:y.TargetPlatform.UNKNOWN;case"alpine":return c==="x64"?y.TargetPlatform.ALPINE_X64:c==="arm64"?y.TargetPlatform.ALPINE_ARM64:y.TargetPlatform.UNKNOWN;case P.Platform.Mac:return c==="x64"?y.TargetPlatform.DARWIN_X64:c==="arm64"?y.TargetPlatform.DARWIN_ARM64:y.TargetPlatform.UNKNOWN;case P.Platform.Web:return y.TargetPlatform.WEB}}function d(i,c){return c===y.TargetPlatform.WEB&&!i.includes(y.TargetPlatform.WEB)}function f(i,c,n){return d(c,n)?!1:i===y.TargetPlatform.UNDEFINED||i===y.TargetPlatform.UNIVERSAL?!0:i===y.TargetPlatform.UNKNOWN?!1:i===n}function m(i){return i&&typeof i=="object"&&typeof i.id=="string"&&(!i.uuid||typeof i.uuid=="string")}var a;(function(i){i[i.NoneOrRelevance=0]="NoneOrRelevance",i[i.LastUpdatedDate=1]="LastUpdatedDate",i[i.Title=2]="Title",i[i.PublisherName=3]="PublisherName",i[i.InstallCount=4]="InstallCount",i[i.PublishedDate=10]="PublishedDate",i[i.AverageRating=6]="AverageRating",i[i.WeightedRating=12]="WeightedRating"})(a||(e.SortBy=a={}));var $;(function(i){i[i.Default=0]="Default",i[i.Ascending=1]="Ascending",i[i.Descending=2]="Descending"})($||(e.SortOrder=$={}));var S;(function(i){i.Install="install",i.Uninstall="uninstall"})(S||(e.StatisticType=S={}));var b;(function(i){i[i.None=1]="None",i[i.Install=2]="Install",i[i.Update=3]="Update",i[i.Migrate=4]="Migrate"})(b||(e.InstallOperation=b={})),e.$rp=(0,k.$Ki)("extensionGalleryService");var v;(function(i){i.Timeout="Timeout",i.Cancelled="Cancelled",i.Failed="Failed",i.DownloadFailedWriting="DownloadFailedWriting",i.Offline="Offline"})(v||(e.ExtensionGalleryErrorCode=v={}));class h extends Error{constructor(c,n){super(c),this.code=n,this.name=n}}e.$sp=h;var R;(function(i){i.Unsupported="Unsupported",i.Deprecated="Deprecated",i.Malicious="Malicious",i.Incompatible="Incompatible",i.IncompatibleApi="IncompatibleApi",i.IncompatibleTargetPlatform="IncompatibleTargetPlatform",i.ReleaseVersionNotFound="ReleaseVersionNotFound",i.Invalid="Invalid",i.Download="Download",i.DownloadSignature="DownloadSignature",i.DownloadFailedWriting="DownloadFailedWriting",i.UpdateMetadata="UpdateMetadata",i.Extract="Extract",i.Scanning="Scanning",i.ScanningExtension="ScanningExtension",i.ReadUninstalled="ReadUninstalled",i.UnsetUninstalled="UnsetUninstalled",i.Delete="Delete",i.Rename="Rename",i.IntializeDefaultProfile="IntializeDefaultProfile",i.AddToProfile="AddToProfile",i.InstalledExtensionNotFound="InstalledExtensionNotFound",i.PostInstall="PostInstall",i.CorruptZip="CorruptZip",i.IncompleteZip="IncompleteZip",i.Signature="Signature",i.NotAllowed="NotAllowed",i.Gallery="Gallery",i.Cancelled="Cancelled",i.Unknown="Unknown",i.Internal="Internal"})(R||(e.ExtensionManagementErrorCode=R={}));class w extends Error{constructor(c,n){super(c),this.code=n,this.name=n}}e.$tp=w,e.$up=(0,k.$Ki)("extensionManagementService"),e.$vp="extensionsIdentifiers/disabled",e.$wp="extensionsIdentifiers/enabled",e.$xp=(0,k.$Ki)("IGlobalExtensionEnablementService"),e.$yp=(0,k.$Ki)("IExtensionTipsService"),e.$zp=(0,I.localize2)(1780,"Extensions"),e.$Ap=(0,I.localize2)(1781,"Preferences")}),define(le[119],he([0,1,2,22,9]),function(Q,e,P,I,y){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$5q=void 0;class k extends P.$Zc{constructor(O,g,u,d,f){super(),this.a=O,this.b=g,this.c=u,this.f=f,this.B(d.onDidInstallExtensions(m=>this.g(m))),this.B(d.onDidUninstallExtension(m=>this.h(m)))}g(O){for(const g of O)g.local&&this.invalidate(g.profileLocation)}h(O){O.error||this.invalidate(O.profileLocation)}async invalidate(O){if(O)for(const g of this.a.profiles)this.c.extUri.isEqual(g.extensionsResource,O)&&await this.j(g);else await this.j(this.a.defaultProfile)}async j(O){try{await this.b.del(this.c.extUri.joinPath(O.cacheHome,I.$rn))}catch(g){(0,y.$wl)(g)!==y.FileOperationResult.FILE_NOT_FOUND&&this.f.error(g)}}}e.$5q=k});var ze=this&&this.__importDefault||function(Q){return Q&&Q.__esModule?Q:{default:Q}};define(le[44],he([0,1,16,56,4,45,22,98]),function(Q,e,P,I,y,k,C,O){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$6p=d,e.$7p=f,e.$8p=m,e.$9p=a,e.$0p=$,e.$$p=S,e.$_p=b,e.$aq=v,I=ze(I),y=be(y),k=be(k);const g=/^(\^|>=)?((\d+)|x)\.((\d+)|x)\.((\d+)|x)(\-.*)?$/,u=/^-(\d{4})(\d{2})(\d{2})$/;function d(w){return w=w.trim(),w==="*"||g.test(w)}function f(w){if(!d(w))return null;if(w=w.trim(),w==="*")return{hasCaret:!1,hasGreaterEquals:!1,majorBase:0,majorMustEqual:!1,minorBase:0,minorMustEqual:!1,patchBase:0,patchMustEqual:!1,preRelease:null};const i=w.match(g);return i?{hasCaret:i[1]==="^",hasGreaterEquals:i[1]===">=",majorBase:i[2]==="x"?0:parseInt(i[2],10),majorMustEqual:i[2]!=="x",minorBase:i[4]==="x"?0:parseInt(i[4],10),minorMustEqual:i[4]!=="x",patchBase:i[6]==="x"?0:parseInt(i[6],10),patchMustEqual:i[6]!=="x",preRelease:i[8]||null}:null}function m(w){if(!w)return null;const i=w.majorBase,c=w.majorMustEqual,n=w.minorBase;let r=w.minorMustEqual;const t=w.patchBase;let s=w.patchMustEqual;w.hasCaret&&(i===0||(r=!1),s=!1);let o=0;if(w.preRelease){const l=u.exec(w.preRelease);if(l){const[,p,A,T]=l;o=Date.UTC(Number(p),Number(A)-1,Number(T))}}return{majorBase:i,majorMustEqual:c,minorBase:n,minorMustEqual:r,patchBase:t,patchMustEqual:s,isMinimum:w.hasGreaterEquals,notBefore:o}}function a(w,i,c){let n;typeof w=="string"?n=m(f(w)):n=w;let r;i instanceof Date?r=i.getTime():typeof i=="string"&&(r=new Date(i).getTime());let t;if(typeof c=="string"?t=m(f(c)):t=c,!n||!t)return!1;const s=n.majorBase,o=n.minorBase,l=n.patchBase;let p=t.majorBase,A=t.minorBase,T=t.patchBase;const N=t.notBefore;let D=t.majorMustEqual,j=t.minorMustEqual,x=t.patchMustEqual;return t.isMinimum?s>p?!0:s<p?!1:o>A?!0:o<A||r&&r<N?!1:l>=T:(s===1&&p===0&&(!D||!j||!x)&&(p=1,A=0,T=0,D=!0,j=!1,x=!1),s<p?!1:s>p?!D:o<A?!1:o>A?!j:l<T?!1:l>T?!x:!(r&&r<N))}function $(w,i,c,n,r,t){const s=[];if(typeof n.publisher<"u"&&typeof n.publisher!="string")return s.push([I.default.Error,y.localize(1832,null)]),s;if(typeof n.name!="string")return s.push([I.default.Error,y.localize(1833,null,"name")]),s;if(typeof n.version!="string")return s.push([I.default.Error,y.localize(1834,null,"version")]),s;if(!n.engines)return s.push([I.default.Error,y.localize(1835,null,"engines")]),s;if(typeof n.engines.vscode!="string")return s.push([I.default.Error,y.localize(1836,null,"engines.vscode")]),s;if(typeof n.extensionDependencies<"u"&&!R(n.extensionDependencies))return s.push([I.default.Error,y.localize(1837,null,"extensionDependencies")]),s;if(typeof n.activationEvents<"u"){if(!R(n.activationEvents))return s.push([I.default.Error,y.localize(1838,null,"activationEvents")]),s;if(typeof n.main>"u"&&typeof n.browser>"u")return s.push([I.default.Error,y.localize(1839,null,"activationEvents","main","browser")]),s}if(typeof n.extensionKind<"u"&&typeof n.main>"u"&&s.push([I.default.Warning,y.localize(1840,null,"extensionKind")]),typeof n.main<"u"){if(typeof n.main!="string")return s.push([I.default.Error,y.localize(1841,null,"main")]),s;{const p=(0,P.$lh)(c,n.main);(0,P.$fh)(p,c)||s.push([I.default.Warning,y.localize(1842,null,p.path,c.path)])}}if(typeof n.browser<"u"){if(typeof n.browser!="string")return s.push([I.default.Error,y.localize(1843,null,"browser")]),s;{const p=(0,P.$lh)(c,n.browser);(0,P.$fh)(p,c)||s.push([I.default.Warning,y.localize(1844,null,p.path,c.path)])}}if(!k.valid(n.version))return s.push([I.default.Error,y.localize(1845,null)]),s;const o=[];if(!S(w,i,n,r,o))for(const p of o)s.push([I.default.Error,p]);if(t&&n.enabledApiProposals?.length){const p=[];if(!v([...n.enabledApiProposals],p))for(const A of p)s.push([I.default.Error,A])}return s}function S(w,i,c,n,r){return n||typeof c.main>"u"&&typeof c.browser>"u"?!0:h(w,i,c.engines.vscode,r)}function b(w,i,c){return w==="*"||h(i,c,w)}function v(w,i){if(w.length===0)return!0;const c=Array.isArray(i)?i:void 0,n=(c?void 0:i)??O.allApiProposals,r=[],t=(0,C.$En)(w);for(const{proposalName:s,version:o}of t){const l=n[s];l&&o&&l.version!==o&&r.push(y.localize(1846,null,s))}return c?.push(...r),r.length===0}function h(w,i,c,n=[]){const r=m(f(c));if(!r)return n.push(y.localize(1847,null,c)),!1;if(r.majorBase===0){if(!r.majorMustEqual||!r.minorMustEqual)return n.push(y.localize(1848,null,c)),!1}else if(!r.majorMustEqual)return n.push(y.localize(1849,null,c)),!1;return a(w,i,r)?!0:(n.push(y.localize(1850,null,w,c)),!1)}function R(w){if(!Array.isArray(w))return!1;for(let i=0,c=w.length;i<c;i++)if(typeof w[i]!="string")return!1;return!0}}),define(le[69],he([0,1,21,2,11,4,20,10]),function(Q,e,P,I,y,k,C,O){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$is=e.$hs=void 0,e.$gs=g;function g(d){return d.tags.find(f=>f.startsWith("lp-"))?.split("lp-")[1]}e.$hs=(0,O.$Ki)("languagePackService");let u=class extends I.$Zc{constructor(f){super(),this.c=f}async getAvailableLanguages(){const f=new P.$Be;setTimeout(()=>f.cancel(),1e3);let m;try{m=await this.c.query({text:'category:"language packs"',pageSize:20},f.token)}catch{return[]}const $=m.firstPage.filter(S=>S.properties.localizedLanguages?.length&&S.tags.some(b=>b.startsWith("lp-"))).map(S=>{const b=S.properties.localizedLanguages?.[0],v=g(S);return{...this.f(v,b,S),extensionId:S.identifier.id,galleryExtension:S}});return $.push(this.f("en","English")),$}f(f,m,a){const $=m??f;let S;if($!==f&&(S=`(${f})`),f.toLowerCase()===y.$z.toLowerCase()&&(S??="",S+=(0,k.localize)(1928,null)),a?.installCount){S??="";const b=a.installCount;let v;b>1e6?v=`${Math.floor(b/1e5)/10}M`:b>1e3?v=`${Math.floor(b/1e3)}K`:v=String(b),S+=` $(cloud-download) ${v}`}return{id:f,label:$,description:S}}};e.$is=u,e.$is=u=Ee([oe(0,C.$rp)],u)}),define(le[46],he([0,1,13,7,2,4,40,10,6,37]),function(Q,e,P,I,y,k,C,O,g,u){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$cq=e.$bq=void 0,e.$dq=m,e.$eq=a,e.$fq=$,e.$gq=S,e.$hq=b,e.$iq=v,e.$bq=(0,O.$Ki)("requestService");class d{constructor(i){this.b=i}toJSON(){if(!this.a){const i=Object.create(null);for(const c in this.b)c.toLowerCase()==="authorization"||c.toLowerCase()==="proxy-authorization"?i[c]="*****":i[c]=this.b[c];this.a=i}return this.a}}class f extends y.$Zc{constructor(i){super(),this.b=0,this.a=i.createLogger("network",{name:(0,k.localize)(2050,null),when:g.$xk.isEqualTo((0,g.$uk)(g.LogLevel.Trace)).serialize()})}async c(i,c,n){const r=`${i} #${++this.b}: ${c.url}`;this.a.trace(`${r} - begin`,c.type,new d(c.headers??{}));try{const t=await n();return this.a.trace(`${r} - end`,c.type,t.res.statusCode,t.res.headers),t}catch(t){throw this.a.error(`${r} - error`,c.type,(0,I.$bb)(t)),t}}}e.$cq=f;function m(w){return w.res.statusCode&&w.res.statusCode>=200&&w.res.statusCode<300||w.res.statusCode===1223}function a(w){return w.res.statusCode===204}async function $(w){return a(w)?null:(await(0,P.$5e)(w.stream)).toString()}async function S(w){if(!m(w))throw new Error("Server returned "+w.res.statusCode);return $(w)}async function b(w){if(!m(w))throw new Error("Server returned "+w.res.statusCode);if(a(w))return null;const c=(await(0,P.$5e)(w.stream)).toString();try{return JSON.parse(c)}catch(n){throw n.message+=`:
`+c,n}}function v(w){R(w)}let h;function R(w){const i=u.$xo.as(C.$Co.Configuration),c=h;h={id:"http",order:15,title:(0,k.localize)(2051,null),type:"object",scope:w,properties:{"http.proxy":{type:"string",pattern:"^(https?|socks|socks4a?|socks5h?)://([^:]*(:[^@]*)?@)?([^:]+|\\[[:0-9a-fA-F]+\\])(:\\d+)?/?$|^$",markdownDescription:(0,k.localize)(2052,null),restricted:!0},"http.proxyStrictSSL":{type:"boolean",default:!0,description:(0,k.localize)(2053,null),restricted:!0},"http.proxyKerberosServicePrincipal":{type:"string",markdownDescription:(0,k.localize)(2054,null),restricted:!0},"http.noProxy":{type:"array",items:{type:"string"},markdownDescription:(0,k.localize)(2055,null),restricted:!0},"http.proxyAuthorization":{type:["null","string"],default:null,markdownDescription:(0,k.localize)(2056,null),restricted:!0},"http.proxySupport":{type:"string",enum:["off","on","fallback","override"],enumDescriptions:[(0,k.localize)(2057,null),(0,k.localize)(2058,null),(0,k.localize)(2059,null),(0,k.localize)(2060,null)],default:"override",description:(0,k.localize)(2061,null),restricted:!0},"http.systemCertificates":{type:"boolean",default:!0,description:(0,k.localize)(2062,null),restricted:!0},"http.experimental.systemCertificatesV2":{type:"boolean",tags:["experimental"],default:!1,description:(0,k.localize)(2063,null),restricted:!0}}},i.updateConfigurations({add:[h],remove:c?[c]:[]})}R(C.ConfigurationScope.APPLICATION)}),define(le[120],he([0,1,21,14,9,46]),function(Q,e,P,I,y,k){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$rS=void 0;let C=class{constructor(g,u){this.a=g,this.b=u}async download(g,u,d=P.CancellationToken.None){if(g.scheme===I.Schemas.file||g.scheme===I.Schemas.vscodeRemote){await this.b.copy(g,u);return}const f={type:"GET",url:g.toString(!0)},m=await this.a.request(f,d);if(m.res.statusCode===200)await this.b.writeFile(u,m.stream);else{const a=await(0,k.$gq)(m);throw new Error(`Expected 200, got back ${m.res.statusCode} instead.

${a}`)}}};e.$rS=C,e.$rS=C=Ee([oe(0,k.$bq),oe(1,y.$fl)],C)}),define(le[121],he([0,1,122,3]),function(Q,e,P,I){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$ms=k;function y(C,O){return C.protocol==="http:"?O.HTTP_PROXY||O.http_proxy||null:C.protocol==="https:"&&(O.HTTPS_PROXY||O.https_proxy||O.HTTP_PROXY||O.http_proxy)||null}async function k(C,O,g={}){const u=(0,P.parse)(C),d=g.proxyUrl||y(u,O);if(!d)return null;const f=(0,P.parse)(d);if(!/^https?:$/.test(f.protocol||""))return null;const m={host:f.hostname||"",port:(f.port?+f.port:0)||(f.protocol==="https"?443:80),auth:f.auth,rejectUnauthorized:(0,I.$pg)(g.strictSSL)?g.strictSSL:!0};if(u.protocol==="http:"){const a=await new Promise(($,S)=>{Q(["http-proxy-agent"],$,S)}).then(be);return new a.HttpProxyAgent(d,m)}else{const a=await new Promise(($,S)=>{Q(["https-proxy-agent"],$,S)}).then(be);return new a.HttpsProxyAgent(d,m)}}}),define(le[123],he([0,1,61,15,4,21,38,7,11,28,89,153,8,80]),function(Q,e,P,I,y,k,C,O,g,u,d,f,m,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$Wm=S;let $;async function S(v,h,R,w){return R["force-disable-user-env"]?(h.trace("resolveShellEnv(): skipped (--force-disable-user-env)"),{}):g.$l?(h.trace("resolveShellEnv(): skipped (Windows)"),{}):(0,f.$Pm)(w)&&!R["force-user-env"]?(h.trace("resolveShellEnv(): skipped (VSCODE_CLI is set)"),{}):((0,f.$Pm)(w)?h.trace("resolveShellEnv(): running (--force-user-env)"):h.trace("resolveShellEnv(): running (macOS/Linux)"),$||($=m.Promises.withAsyncBody(async(i,c)=>{const n=new k.$Be;let r=1e4;const t=v.getValue("application.shellEnvironmentResolutionTimeout");typeof t=="number"&&(r=(0,a.$Qm)(t,1,120)*1e3);const s=setTimeout(()=>{n.dispose(!0),c(new Error((0,y.localize)(2064,null)))},r);try{i(await b(h,n.token))}catch(o){!(0,O.$8)(o)&&!n.token.isCancellationRequested?c(new Error((0,y.localize)(2065,null,(0,C.$vj)(o)))):i({})}finally{clearTimeout(s),n.dispose()}})),$)}async function b(v,h){const R=process.env.ELECTRON_RUN_AS_NODE;v.trace("getUnixShellEnvironment#runAsNode",R);const w=process.env.ELECTRON_NO_ATTACH_CONSOLE;v.trace("getUnixShellEnvironment#noAttach",w);const i=(0,u.$7g)().replace(/-/g,"").substr(0,12),c=new RegExp(i+"({.*})"+i),n={...process.env,ELECTRON_RUN_AS_NODE:"1",ELECTRON_NO_ATTACH_CONSOLE:"1",VSCODE_RESOLVING_ENVIRONMENT:"1"};v.trace("getUnixShellEnvironment#env",n);const r=await(0,d.$Fm)(g.OS,n);return v.trace("getUnixShellEnvironment#shell",r),new Promise((t,s)=>{if(h.isCancellationRequested)return s(new O.$9);const o=(0,I.$sc)(r);let l,p;const A="";/^pwsh(-preview)?$/.test(o)?(l=`& '${process.execPath}' ${A} -p '''${i}'' + JSON.stringify(process.env) + ''${i}'''`,p=["-Login","-Command"]):o==="nu"?(l=`^'${process.execPath}' ${A} -p '"${i}" + JSON.stringify(process.env) + "${i}"'`,p=["-i","-l","-c"]):o==="xonsh"?(l=`import os, json; print("${i}", json.dumps(dict(os.environ)), "${i}")`,p=["-i","-l","-c"]):(l=`'${process.execPath}' ${A} -p '"${i}" + JSON.stringify(process.env) + "${i}"'`,o==="tcsh"||o==="csh"?p=["-ic"]:p=["-i","-l","-c"]),v.trace("getUnixShellEnvironment#spawn",JSON.stringify(p),l);const T=(0,P.spawn)(r,[...p,l],{detached:!0,stdio:["ignore","pipe","pipe"],env:n});h.onCancellationRequested(()=>(T.kill(),s(new O.$9))),T.on("error",j=>{v.error("getUnixShellEnvironment#errorChildProcess",(0,C.$vj)(j)),s(j)});const N=[];T.stdout.on("data",j=>N.push(j));const D=[];T.stderr.on("data",j=>D.push(j)),T.on("close",(j,x)=>{const Y=Buffer.concat(N).toString("utf8");v.trace("getUnixShellEnvironment#raw",Y);const ne=Buffer.concat(D).toString("utf8");if(ne.trim()&&v.trace("getUnixShellEnvironment#stderr",ne),j||x)return s(new Error((0,y.localize)(2066,null,j,x)));const ae=c.exec(Y),ue=ae?ae[1]:"{}";try{const me=JSON.parse(ue);R?me.ELECTRON_RUN_AS_NODE=R:delete me.ELECTRON_RUN_AS_NODE,w?me.ELECTRON_NO_ATTACH_CONSOLE=w:delete me.ELECTRON_NO_ATTACH_CONSOLE,delete me.VSCODE_RESOLVING_ENVIRONMENT,delete me.XDG_RUNTIME_DIR,v.trace("getUnixShellEnvironment#result",me),t(me)}catch(me){v.error("getUnixShellEnvironment#errorCaught",(0,C.$vj)(me)),s(me)}})})}}),define(le[124],he([0,1,10]),function(Q,e,P){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$5R=e.$4R=void 0,e.$4R=(0,P.$Ki)("stateReadService"),e.$5R=(0,P.$Ki)("stateService")}),define(le[70],he([0,1,8,13,2,3,17,9,6]),function(Q,e,P,I,y,k,C,O,g){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$8R=e.$7R=e.$6R=e.SaveStrategy=void 0;var u;(function(a){a[a.IMMEDIATE=0]="IMMEDIATE",a[a.DELAYED=1]="DELAYED"})(u||(e.SaveStrategy=u={}));class d extends y.$Zc{constructor($,S,b,v){super(),this.h=$,this.j=S,this.m=b,this.n=v,this.a=Object.create(null),this.b="",this.c=this.B(new P.$Ih(this.j===u.IMMEDIATE?0:100)),this.f=void 0,this.g=void 0}init(){return this.f||(this.f=this.r()),this.f}async r(){try{this.b=(await this.n.readFile(this.h)).value.toString(),this.a=JSON.parse(this.b)}catch($){$.fileOperationResult!==O.FileOperationResult.FILE_NOT_FOUND&&this.m.error($)}}getItem($,S){const b=this.a[$];return(0,k.$sg)(b)?S:b}setItem($,S){this.setItems([{key:$,data:S}])}setItems($){let S=!1;for(const{key:b,data:v}of $)this.a[b]!==v&&((0,k.$sg)(v)?(0,k.$qg)(this.a[b])||(this.a[b]=void 0,S=!0):(this.a[b]=v,S=!0));S&&this.s()}removeItem($){(0,k.$qg)(this.a[$])||(this.a[$]=void 0,this.s())}async s(){if(!this.g)return this.c.trigger(()=>this.t())}async t(){if(!this.f)return;await this.f;const $=JSON.stringify(this.a,null,4);if($!==this.b)try{await this.n.writeFile(this.h,I.$Se.fromString($),{atomic:{postfix:".vsctmp"}}),this.b=$}catch(S){this.m.error(S)}}async close(){return this.g||(this.g=this.c.trigger(()=>this.t(),0)),this.g}}e.$6R=d;let f=class extends y.$Zc{constructor($,S,b,v){super(),this.a=this.B(new d(S.stateResource,$,b,v))}async init(){await this.a.init()}getItem($,S){return this.a.getItem($,S)}};e.$7R=f,e.$7R=f=Ee([oe(1,C.$Ri),oe(2,g.$fk),oe(3,O.$fl)],f);class m extends f{setItem($,S){this.a.setItem($,S)}setItems($){this.a.setItems($)}removeItem($){this.a.removeItem($)}close(){return this.a.close()}}e.$8R=m}),define(le[71],he([0,1,11,36,28]),function(Q,e,P,I,y){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$Bp=C,e.$Cp=O;function k(g){if(P.$x===P.Platform.Linux&&/^penguin(\.|$)/i.test(g))return"chromebook"}function C(g,u,d,f,m,a,$,S,b,v){const h=Object.create(null);h["common.machineId"]=a,h["common.sqmId"]=$,h["common.devDeviceId"]=S,h.sessionID=(0,y.$7g)()+Date.now(),h.commitHash=f,h.version=m,h["common.platformVersion"]=(g||"").replace(/^(\d+)(\.\d+)?(\.\d+)?(.*)/,"$1$2$3"),h["common.platform"]=(0,P.$k)(P.$x),h["common.nodePlatform"]=I.$ic,h["common.nodeArch"]=d,h["common.product"]=v||"desktop",b&&(h["common.msftInternal"]=b);let R=0;const w=Date.now();Object.defineProperties(h,{timestamp:{get:()=>new Date,enumerable:!0},"common.timesincesessionstart":{get:()=>Date.now()-w,enumerable:!0},"common.sequence":{get:()=>R++,enumerable:!0}}),P.$o&&(h["common.snap"]="true");const i=k(u);return i&&(h["common.platformDetail"]=i),h}function O(g){const u=I.env.USERDNSDOMAIN;if(!u)return!1;const d=u.toLowerCase();return g.some(f=>d===f)}}),define(le[18],he([0,1,10]),function(Q,e,P){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TelemetryConfiguration=e.TelemetryLevel=e.$pm=e.$om=e.$nm=e.$mm=e.$lm=e.$km=e.$jm=e.$im=e.$hm=e.$gm=e.$fm=e.$em=void 0,e.$em=(0,P.$Ki)("telemetryService"),e.$fm=(0,P.$Ki)("customEndpointTelemetryService"),e.$gm="telemetry.currentSessionDate",e.$hm="telemetry.firstSessionDate",e.$im="telemetry.lastSessionDate",e.$jm="telemetry.machineId",e.$km="telemetry.sqmId",e.$lm="telemetry.devDeviceId",e.$mm="telemetry",e.$nm="telemetry.telemetryLevel",e.$om="telemetry.enableCrashReporter",e.$pm="telemetry.enableTelemetry";var I;(function(k){k[k.NONE=0]="NONE",k[k.CRASH=1]="CRASH",k[k.ERROR=2]="ERROR",k[k.USAGE=3]="USAGE"})(I||(e.TelemetryLevel=I={}));var y;(function(k){k.OFF="off",k.CRASH="crash",k.ERROR="error",k.ON="all"})(y||(e.TelemetryConfiguration=y={}))}),define(le[72],he([0,1,58,7,10,6,18]),function(Q,e,P,I,y,k,C){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$Dq=e.$Cq=e.ExtensionSignatureVerificationCode=e.$Bq=void 0,e.$Bq=(0,y.$Ki)("IExtensionSignatureVerificationService");var O;(function(d){d.Success="Success",d.RequiredArgumentMissing="RequiredArgumentMissing",d.InvalidArgument="InvalidArgument",d.PackageIsUnreadable="PackageIsUnreadable",d.UnhandledException="UnhandledException",d.SignatureManifestIsMissing="SignatureManifestIsMissing",d.SignatureManifestIsUnreadable="SignatureManifestIsUnreadable",d.SignatureIsMissing="SignatureIsMissing",d.SignatureIsUnreadable="SignatureIsUnreadable",d.CertificateIsUnreadable="CertificateIsUnreadable",d.SignatureArchiveIsUnreadable="SignatureArchiveIsUnreadable",d.FileAlreadyExists="FileAlreadyExists",d.SignatureArchiveIsInvalidZip="SignatureArchiveIsInvalidZip",d.SignatureArchiveHasSameSignatureFile="SignatureArchiveHasSameSignatureFile",d.PackageIntegrityCheckFailed="PackageIntegrityCheckFailed",d.SignatureIsInvalid="SignatureIsInvalid",d.SignatureManifestIsInvalid="SignatureManifestIsInvalid",d.SignatureIntegrityCheckFailed="SignatureIntegrityCheckFailed",d.EntryIsMissing="EntryIsMissing",d.EntryIsTampered="EntryIsTampered",d.Untrusted="Untrusted",d.CertificateRevoked="CertificateRevoked",d.SignatureIsNotValid="SignatureIsNotValid",d.UnknownError="UnknownError",d.PackageIsInvalidZip="PackageIsInvalidZip",d.SignatureArchiveHasTooManyEntries="SignatureArchiveHasTooManyEntries"})(O||(e.ExtensionSignatureVerificationCode=O={}));class g extends Error{constructor(f){super(f),this.code=f}}e.$Cq=g;let u=class{constructor(f,m){this.b=f,this.c=m}d(){return this.a||(this.a=this.f()),this.a}async f(){return(0,P.$zq)("@vscode/vsce-sign","src/main.js")}async verify(f,m,a,$){let S;const b=f.identifier.id;try{S=await this.d()}catch(w){return this.b.error("Could not load vsce-sign module",(0,I.$bb)(w)),this.b.info(`Extension signature verification is not done: ${b}`),!1}const v=new Date().getTime();let h;try{this.b.trace(`Verifying extension signature for ${b}...`),h=await S.verify(m,a,this.b.getLevel()===k.LogLevel.Trace)}catch(w){h={code:O.UnknownError,didExecute:!1,output:(0,I.$bb)(w)}}const R=new Date().getTime()-v;if(this.b.info(`Extension signature verification result for ${b}: ${h.code}. Executed: ${h.didExecute}. Duration: ${R}ms.`),this.b.trace(`Extension signature verification output for ${b}:
${h.output}`),this.c.publicLog2("extensionsignature:verification",{extensionId:b,extensionVersion:f.version,code:h.code,internalCode:h.internalCode,duration:R,didExecute:h.didExecute,clientTargetPlatform:$}),h.code===O.Success)return!0;throw new g(h.code)}};e.$Dq=u,e.$Dq=u=Ee([oe(0,k.$fk),oe(1,C.$em)],u)}),define(le[41],he([0,1,27,3,68,71,18]),function(Q,e,P,I,y,k,C){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$Jp=e.$Ip=e.$Hp=e.$Gp=e.$Fp=e.$Ep=e.$Dp=void 0,e.$Kp=d,e.$Lp=f,e.$Mp=m,e.$Np=a,e.$Op=S,e.$Pp=v,e.$Qp=h,e.$Rp=i;class O{constructor(n){this.value=n,this.isTrustedTelemetryValue=!0}}e.$Dp=O;class g{constructor(){this.telemetryLevel=C.TelemetryLevel.NONE,this.sessionId="someValue.sessionId",this.machineId="someValue.machineId",this.sqmId="someValue.sqmId",this.devDeviceId="someValue.devDeviceId",this.firstSessionDate="someValue.firstSessionDate",this.sendErrorTelemetry=!1}publicLog(){}publicLog2(){}publicLogError(){}publicLogError2(){}setExperimentProperty(){}}e.$Ep=g,e.$Fp=new g;class u{async publicLog(n,r,t){}async publicLogError(n,r,t){}}e.$Gp=u,e.$Hp="telemetry",e.$Ip="extensionTelemetryLog",e.$Jp={log:()=>null,flush:()=>Promise.resolve(null)};function d(c,n){return!n.isBuilt&&!n.disableTelemetry?!0:!(n.disableTelemetry||!c.enableTelemetry)}function f(c,n){return n.extensionTestsLocationURI?!0:!(n.isBuilt||n.disableTelemetry||c.enableTelemetry&&c.aiConfig?.ariaKey)}function m(c){const n=c.getValue(C.$nm),r=c.getValue(C.$om);if(c.getValue(C.$pm)===!1||r===!1)return C.TelemetryLevel.NONE;switch(n??C.TelemetryConfiguration.ON){case C.TelemetryConfiguration.ON:return C.TelemetryLevel.USAGE;case C.TelemetryConfiguration.ERROR:return C.TelemetryLevel.ERROR;case C.TelemetryConfiguration.CRASH:return C.TelemetryLevel.CRASH;case C.TelemetryConfiguration.OFF:return C.TelemetryLevel.NONE}}function a(c){const n={},r={},t={};b(c,t);for(let s in t){s=s.length>150?s.substr(s.length-149):s;const o=t[s];typeof o=="number"?r[s]=o:typeof o=="boolean"?r[s]=o?1:0:typeof o=="string"?(o.length>8192&&console.warn(`Telemetry property: ${s} has been trimmed to 8192, the original length is ${o.length}`),n[s]=o.substring(0,8191)):typeof o<"u"&&o!==null&&(n[s]=o)}return{properties:n,measurements:r}}const $=new Set(["ssh-remote","dev-container","attached-container","wsl","tunnel","codespaces","amlext"]);function S(c){if(!c)return"none";const n=(0,y.$on)(c);return $.has(n)?n:"other"}function b(c,n,r=0,t){if(c)for(const s of Object.getOwnPropertyNames(c)){const o=c[s],l=t?t+s:s;Array.isArray(o)?n[l]=(0,P.$po)(o):o instanceof Date?n[l]=o.toISOString():(0,I.$lg)(o)?r<2?b(o,n,r+1,l+"."):n[l]=(0,P.$po)(o):n[l]=o}}function v(c,n){const r=c.msftInternalDomains||[],t=n.getValue("telemetry.internalTesting");return(0,k.$Cp)(r)||t}function h(c){return[c.appRoot,c.extensionsPath,c.userHome.fsPath,c.tmpDir.fsPath,c.userDataPath]}function R(c,n){if(!c||!c.includes("/")&&!c.includes("\\"))return c;let r=c;const t=[];for(const p of n)for(;;){const A=p.exec(c);if(!A)break;t.push([A.index,p.lastIndex])}const s=/^[\\\/]?(node_modules|node_modules\.asar)[\\\/]/,o=/(file:\/\/)?([a-zA-Z]:(\\\\|\\|\/)|(\\\\|\\|\/))?([\w-\._]+(\\\\|\\|\/))+[\w-\._]*/g;let l=0;for(r="";;){const p=o.exec(c);if(!p)break;const A=t.some(([T,N])=>p.index<N&&T<o.lastIndex);!s.test(p[0])&&!A&&(r+=c.substring(l,p.index)+"<REDACTED: user-file-path>",l=o.lastIndex)}return l<c.length&&(r+=c.substr(l)),r}function w(c){if(!c)return c;const n=[{label:"Google API Key",regex:/AIza[A-Za-z0-9_\\\-]{35}/},{label:"Slack Token",regex:/xox[pbar]\-[A-Za-z0-9]/},{label:"GitHub Token",regex:/(gh[psuro]_[a-zA-Z0-9]{36}|github_pat_[a-zA-Z0-9]{22}_[a-zA-Z0-9]{59})/},{label:"Generic Secret",regex:/(key|token|sig|secret|signature|password|passwd|pwd|android:value)[^a-zA-Z0-9]/i},{label:"CLI Credentials",regex:/((login|psexec|(certutil|psexec)\.exe).{1,50}(\s-u(ser(name)?)?\s+.{3,100})?\s-(admin|user|vm|root)?p(ass(word)?)?\s+["']?[^$\-\/\s]|(^|[\s\r\n\\])net(\.exe)?.{1,5}(user\s+|share\s+\/user:| user -? secrets ? set) \s + [^ $\s \/])/},{label:"Email",regex:/@[a-zA-Z0-9-]+\.[a-zA-Z0-9-]+/}];for(const r of n)if(r.regex.test(c))return`<REDACTED: ${r.label}>`;return c}function i(c,n){return(0,P.$mo)(c,r=>{if(r instanceof O||Object.hasOwnProperty.call(r,"isTrustedTelemetryValue"))return r.value;if(typeof r=="string"){let t=r.replaceAll("%20"," ");t=R(t,n);for(const s of n)t=t.replace(s,"");return t=w(t),t}})}}),define(le[26],he([0,1,31,20,22,11,12,7,36,41]),function(Q,e,P,I,y,k,C,O,g,u){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$2p=e.$Tp=void 0,e.$Sp=d,e.$Up=$,e.$Vp=S,e.$Wp=b,e.$Xp=v,e.$Yp=h,e.$Zp=R,e.$1p=w,e.$3p=i,e.$4p=n;function d(r,t){return r.uuid&&t.uuid?r.uuid===t.uuid:r.id===t.id?!0:(0,P.$Ff)(r.id,t.id)===0}const f=/^([^.]+\..+)-(\d+\.\d+\.\d+)(-(.+))?$/;class m{static create(t){const s=t.manifest?t.manifest.version:t.version,o=t.manifest?t.targetPlatform:t.properties.targetPlatform;return new m(t.identifier,s,o)}static parse(t){const s=f.exec(t);return s&&s[1]&&s[2]?new m({id:s[1]},s[2],s[4]||void 0):null}constructor(t,s,o=y.TargetPlatform.UNDEFINED){this.identifier=t,this.version=s,this.targetPlatform=o,this.id=t.id}toString(){return`${this.id}-${this.version}${this.targetPlatform!==y.TargetPlatform.UNDEFINED?`-${this.targetPlatform}`:""}`}equals(t){return t instanceof m?d(this,t)&&this.version===t.version&&this.targetPlatform===t.targetPlatform:!1}}e.$Tp=m;const a=/^([^.]+\..+)@((prerelease)|(\d+\.\d+\.\d+(-.*)?))$/;function $(r){const t=a.exec(r);return t&&t[1]?[b(t[1]),t[2]]:[b(r),void 0]}function S(r,t){return`${r}.${t}`}function b(r){return r.toLowerCase()}function v(r,t){return b(S(r??y.$tn,t))}function h(r,t){const s=[],o=l=>{for(const p of s)if(p.some(A=>d(t(A),t(l))))return p;return null};for(const l of r){const p=o(l);p?p.push(l):s.push([l])}return s}function R(r){return{id:r.identifier.id,name:r.manifest.name,galleryId:null,publisherId:r.publisherId,publisherName:r.manifest.publisher,publisherDisplayName:r.publisherDisplayName,dependencies:r.manifest.extensionDependencies&&r.manifest.extensionDependencies.length>0}}function w(r){return{id:new u.$Dp(r.identifier.id),name:new u.$Dp(r.name),version:r.version,galleryId:r.identifier.uuid,publisherId:r.publisherId,publisherName:r.publisher,publisherDisplayName:r.publisherDisplayName,isPreReleaseVersion:r.properties.isPreReleaseVersion,dependencies:!!(r.properties.dependencies&&r.properties.dependencies.length>0),isSigned:r.isSigned,...r.telemetryData}}e.$2p=new y.$xn("pprice.better-merge");function i(r,t){const s=[],o=t.manifest.extensionDependencies?.slice(0)??[];for(;o.length;){const l=o.shift();if(l&&s.every(p=>!d(p.identifier,{id:l}))){const p=r.filter(A=>d(A.identifier,{id:l}));p.length===1&&(s.push(p[0]),o.push(...p[0].manifest.extensionDependencies?.slice(0)??[]))}}return s}async function c(r,t){if(!k.$n)return!1;let s;try{s=(await r.readFile(C.URI.file("/etc/os-release"))).value.toString()}catch{try{s=(await r.readFile(C.URI.file("/usr/lib/os-release"))).value.toString()}catch(l){t.debug("Error while getting the os-release file.",(0,O.$bb)(l))}}return!!s&&(s.match(/^ID=([^\u001b\r\n]*)/m)||[])[1]==="alpine"}async function n(r,t){const s=await c(r,t),o=(0,I.$np)(s?"alpine":k.$x,g.$jc);return t.debug("ComputeTargetPlatform:",o),o}}),define(le[125],he([0,1,21,7,14,16,45,12,4,20,26,22]),function(Q,e,P,I,y,k,C,O,g,u,d,f){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$Eq=void 0;const m=S=>(0,g.localize)(1782,null,S),a=(0,g.localize)(1783,null,"ms-dotnettools.csharp");let $=class{constructor(b,v,h){this.a=b,this.b=v,this.d=h}get f(){}async listExtensions(b,v,h){let R=await this.b.getInstalled(f.ExtensionType.User,h);const w=f.$wn.map(c=>c.toLowerCase());if(v&&v!==""){if(w.indexOf(v.toLowerCase())<0){this.a.info("Invalid category please enter a valid category. To list valid categories run --category without a category specified");return}R=R.filter(c=>c.manifest.categories?c.manifest.categories.map(r=>r.toLowerCase()).indexOf(v.toLowerCase())>-1:!1)}else if(v===""){this.a.info("Possible Categories: "),w.forEach(c=>{this.a.info(c)});return}this.f&&this.a.info((0,g.localize)(1784,null,this.f)),R=R.sort((c,n)=>c.identifier.id.localeCompare(n.identifier.id));let i;for(const c of R)i!==c.identifier.id&&(i=c.identifier.id,this.a.info(b?`${i}@${c.manifest.version}`:i))}async installExtensions(b,v,h,R){const w=[];try{b.length&&this.a.info(this.f?(0,g.localize)(1785,null,this.f):(0,g.localize)(1786,null));const i=[],c=[],n=(t,s,o)=>{c.push({id:t,version:s!=="prerelease"?s:void 0,installOptions:{...h,isBuiltin:o,installPreReleaseVersion:s==="prerelease"||h.installPreReleaseVersion}})};for(const t of b)if(t instanceof O.URI)i.push({vsix:t,installOptions:h});else{const[s,o]=(0,d.$Up)(t);n(s,o,!1)}for(const t of v)if(t instanceof O.URI)i.push({vsix:t,installOptions:{...h,isBuiltin:!0,donotIncludePackAndDependencies:!0}});else{const[s,o]=(0,d.$Up)(t);n(s,o,!0)}const r=await this.b.getInstalled(void 0,h.profileLocation);if(i.length&&await Promise.all(i.map(async({vsix:t,installOptions:s})=>{try{await this.h(t,s,R,r)}catch(o){this.a.error(o),w.push(t.toString())}})),c.length){const t=await this.g(c,r,R);w.push(...t)}}catch(i){throw this.a.error((0,g.localize)(1787,null,(0,I.$bb)(i))),i}if(w.length)throw new Error((0,g.localize)(1788,null,w.join(", ")))}async updateExtensions(b){const v=await this.b.getInstalled(f.ExtensionType.User,b),h=[];for(const c of v)c.identifier.uuid&&h.push({...c.identifier,preRelease:c.preRelease});this.a.trace((0,g.localize)(1789,null,h.length));const R=await this.d.getExtensions(h,{compatible:!0},P.CancellationToken.None),w=[];for(const c of R)for(const n of v)(0,d.$Sp)(n.identifier,c.identifier)&&(0,C.gt)(c.version,n.manifest.version)&&w.push({extension:c,options:{operation:u.InstallOperation.Update,installPreReleaseVersion:n.preRelease,profileLocation:b,isApplicationScoped:n.isApplicationScoped}});if(!w.length){this.a.info((0,g.localize)(1790,null));return}this.a.info((0,g.localize)(1791,null,w.map(c=>c.extension.identifier.id).join(", ")));const i=await this.b.installGalleryExtensions(w);for(const c of i)c.error?this.a.error((0,g.localize)(1792,null,c.identifier.id,(0,I.$bb)(c.error))):this.a.info((0,g.localize)(1793,null,c.identifier.id,c.local?.manifest.version))}async g(b,v,h){if(b=b.filter(({id:c,version:n})=>{const r=v.find(t=>(0,d.$Sp)(t.identifier,{id:c}));if(r){if(!h&&(!n||n==="prerelease"&&r.preRelease))return this.a.info((0,g.localize)(1794,null,c,r.manifest.version,c)),!1;if(n&&r.manifest.version===n)return this.a.info((0,g.localize)(1795,null,`${c}@${n}`)),!1}return!0}),!b.length)return[];const R=[],w=[],i=await this.j(b);if(await Promise.all(b.map(async({id:c,version:n,installOptions:r})=>{const t=i.get(c.toLowerCase());if(!t){this.a.error(`${m(n?`${c}@${n}`:c)}
${a}`),R.push(c);return}try{const o=await this.d.getManifest(t,P.CancellationToken.None);if(o&&!this.k(o))return}catch(o){this.a.error(o.message||o.stack||o),R.push(c);return}const s=v.find(o=>(0,d.$Sp)(o.identifier,t.identifier));if(s){if(t.version===s.manifest.version){this.a.info((0,g.localize)(1796,null,n?`${c}@${n}`:c));return}this.a.info((0,g.localize)(1797,null,c,t.version))}r.isBuiltin?this.a.info(n?(0,g.localize)(1798,null,c,n):(0,g.localize)(1799,null,c)):this.a.info(n?(0,g.localize)(1800,null,c,n):(0,g.localize)(1801,null,c)),w.push({extension:t,options:{...r,installGivenVersion:!!n,isApplicationScoped:r.isApplicationScoped||s?.isApplicationScoped}})})),w.length){const c=await this.b.installGalleryExtensions(w);for(const n of c)n.error?(this.a.error((0,g.localize)(1802,null,n.identifier.id,(0,I.$bb)(n.error))),R.push(n.identifier.id)):this.a.info((0,g.localize)(1803,null,n.identifier.id,n.local?.manifest.version))}return R}async h(b,v,h,R){const w=await this.b.getManifest(b);if(!w)throw new Error("Invalid vsix");if(await this.l(w,h,v.profileLocation,R))try{await this.b.install(b,{...v,installGivenVersion:!0}),this.a.info((0,g.localize)(1804,null,(0,k.$ih)(b)))}catch(c){if((0,I.$8)(c))this.a.info((0,g.localize)(1805,null,(0,k.$ih)(b)));else throw c}}async j(b){const v=new Map,h=b.some(i=>i.installOptions.installPreReleaseVersion),R=await this.b.getTargetPlatform(),w=[];for(const i of b)u.$fp.test(i.id)&&w.push({...i,preRelease:h});if(w.length){const i=await this.d.getExtensions(w,{targetPlatform:R},P.CancellationToken.None);for(const c of i)v.set(c.identifier.id.toLowerCase(),c)}return v}k(b){return!0}async l(b,v,h,R){if(!v){const w={id:(0,d.$Xp)(b.publisher,b.name)},i=R.find(c=>(0,d.$Sp)(w,c.identifier)&&(0,C.gt)(c.manifest.version,b.version));if(i)return this.a.info((0,g.localize)(1806,null,i.identifier.id,i.manifest.version,b.version)),!1}return this.k(b)}async uninstallExtensions(b,v,h){const R=async i=>{if(i instanceof O.URI){const c=await this.b.getManifest(i);return(0,d.$Vp)(c.publisher,c.name)}return i},w=[];for(const i of b){const c=await R(i),r=(await this.b.getInstalled(void 0,h)).filter(t=>(0,d.$Sp)(t.identifier,{id:c}));if(!r.length)throw new Error(`${this.m(c)}
${a}`);if(r.some(t=>t.type===f.ExtensionType.System)){this.a.info((0,g.localize)(1807,null,c));return}if(!v&&r.some(t=>t.isBuiltin)){this.a.info((0,g.localize)(1808,null,c));return}this.a.info((0,g.localize)(1809,null,c));for(const t of r)await this.b.uninstall(t,{profileLocation:h}),w.push(t);this.f?this.a.info((0,g.localize)(1810,null,c,this.f)):this.a.info((0,g.localize)(1811,null,c))}}async locateExtension(b){const v=await this.b.getInstalled();b.forEach(h=>{v.forEach(R=>{if(R.identifier.id===h&&R.location.scheme===y.Schemas.file){this.a.info(R.location.fsPath);return}})})}m(b){return this.f?(0,g.localize)(1812,null,b,this.f):(0,g.localize)(1813,null,b)}};e.$Eq=$,e.$Eq=$=Ee([oe(1,u.$up),oe(2,u.$rp)],$)}),define(le[126],he([0,1,7,5,2,25,26,22,9]),function(Q,e,P,I,y,k,C,O,g){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$6q=void 0;class u extends y.$Zc{constructor(f,m,a,$,S,b,v){super(),this.f=f,this.g=m,this.h=a,this.j=$,this.m=S,this.n=b,this.r=v,this.a=this.B(new I.$qe),this.onDidChangeExtensionsByAnotherSource=this.a.event,this.b=new Map,this.c=this.B(new y.$9c),this.s().then(null,h=>v.error("Error while initializing Extensions Watcher",(0,P.$bb)(h)))}async s(){await this.g.initializeDefaultProfileExtensions(),await this.u(this.h.profiles),this.t(),await this.H()}t(){this.B(this.h.onDidChangeProfiles(f=>this.u(f.added))),this.B(this.j.onAddExtensions(f=>this.w(f))),this.B(this.j.onDidAddExtensions(f=>this.y(f))),this.B(this.j.onRemoveExtensions(f=>this.z(f))),this.B(this.j.onDidRemoveExtensions(f=>this.C(f))),this.B(this.n.onDidFilesChange(f=>this.D(f)))}async u(f){try{f.length&&await Promise.all(f.map(m=>(this.c.set(m.id,(0,y.$Wc)(this.n.watch(this.m.extUri.dirname(m.extensionsResource)),this.n.watch(m.extensionsResource))),this.G(m.extensionsResource))))}catch(m){throw this.r.error(m),m}}async w(f){for(const m of f.extensions)this.I(this.L(m.identifier,m.version),f.profileLocation)}async y(f){for(const m of f.extensions){const a=this.L(m.identifier,m.version);f.error?this.J(a,f.profileLocation):this.I(a,f.profileLocation)}}async z(f){for(const m of f.extensions)this.J(this.L(m.identifier,m.version),f.profileLocation)}async C(f){const m=[],a=[];for(const $ of f.extensions){const S=this.L($.identifier,$.version);f.error?this.I(S,f.profileLocation):(this.J(S,f.profileLocation),this.b.has(S)||(this.r.debug("Extension is removed from all profiles",$.identifier.id,$.version),a.push(this.f.scanInstalledExtensionAtLocation($.location).then(b=>{b?m.push(b):this.r.info("Extension not found at the location",$.location.toString())},b=>this.r.error(b)))))}try{await Promise.all(a),m.length&&await this.H(m)}catch($){this.r.error($)}}D(f){for(const m of this.h.profiles)f.contains(m.extensionsResource,g.FileChangeType.UPDATED,g.FileChangeType.ADDED)&&this.F(m.extensionsResource)}async F(f){const m=[],a=[],$=await this.j.scanProfileExtensions(f),S=new Set,b=new Set;for(const[v,h]of this.b)h.has(f)&&b.add(v);for(const v of $){const h=this.L(v.identifier,v.version);S.add(h),b.has(h)||(m.push(v.identifier),this.I(h,f))}for(const v of b)if(!S.has(v)){const h=this.M(v);h&&(a.push(h.identifier),this.J(v,f))}(m.length||a.length)&&this.a.fire({added:m.length?{extensions:m,profileLocation:f}:void 0,removed:a.length?{extensions:a,profileLocation:f}:void 0})}async G(f){const m=await this.j.scanProfileExtensions(f);for(const a of m)this.I(this.L(a.identifier,a.version),f)}async H(f){f||(f=(await this.f.scanAllUserInstalledExtensions()).filter(a=>!this.b.has(this.L(a.identifier,a.manifest.version)))),f.length&&await this.f.markAsUninstalled(...f)}I(f,m){let a=this.b.get(f);a||this.b.set(f,a=new k.$Gc($=>this.m.extUri.getComparisonKey($))),a.add(m)}J(f,m){const a=this.b.get(f);a&&a.delete(m),a?.size||this.b.delete(f)}L(f,m){return`${O.$xn.toKey(f.id)}@${m}`}M(f){const[m,a]=(0,C.$Up)(f);return a?{identifier:{id:m},version:a}:void 0}}e.$6q=u}),define(le[127],he([0,1,32,154,19,8,2,14,15,29,17,20,26,6,69,12]),function(Q,e,P,I,y,k,C,O,g,u,d,f,m,a,$,S){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$js=void 0,P=be(P);let b=class extends $.$is{constructor(w,i,c,n){super(c),this.h=w,this.j=n,this.g=this.B(new v(i,n)),this.h.registerParticipant({postInstall:async r=>this.m(r),postUninstall:async r=>this.n(r)})}async getBuiltInExtensionTranslationsUri(w,i){const n=(await this.g.getLanguagePacks())[i];if(!n){this.j.warn(`No language pack found for ${i}`);return}const r=n.translations[w];return r?S.URI.file(r):void 0}async getInstalledLanguages(){const w=await this.g.getLanguagePacks(),i=Object.keys(w).map(c=>{const n=w[c];return{...this.f(c,n.label),extensionId:n.extensions[0].extensionIdentifier.id}});return i.push(this.f("en","English")),i.sort((c,n)=>c.label.localeCompare(n.label)),i}async m(w){w&&w.manifest&&w.manifest.contributes&&w.manifest.contributes.localizations&&w.manifest.contributes.localizations.length&&(this.j.info("Adding language packs from the extension",w.identifier.id),await this.update())}async n(w){const i=await this.g.getLanguagePacks();Object.keys(i).some(c=>i[c]&&i[c].extensions.some(n=>(0,m.$Sp)(n.extensionIdentifier,w.identifier)))&&(this.j.info("Removing language packs from the extension",w.identifier.id),await this.update())}async update(){const[w,i]=await Promise.all([this.g.getLanguagePacks(),this.h.getInstalled()]),c=await this.g.update(i);return!(0,y.$yb)(Object.keys(w),Object.keys(c))}};e.$js=b,e.$js=b=Ee([oe(0,f.$up),oe(1,d.$Si),oe(2,f.$rp),oe(3,a.$fk)],b);let v=class extends C.$Zc{constructor(w,i){super(),this.j=i,this.c={},this.f=(0,g.$oc)(w.userDataPath,"languagepacks.json"),this.g=new k.$Rh}getLanguagePacks(){return this.g.size||!this.h?this.s().then(()=>this.c):Promise.resolve(this.c)}update(w){return this.s(i=>{Object.keys(i).forEach(c=>delete i[c]),this.m(i,...w)}).then(()=>this.c)}m(w,...i){for(const c of i)c&&c.manifest&&c.manifest.contributes&&c.manifest.contributes.localizations&&c.manifest.contributes.localizations.length&&this.n(w,c);Object.keys(w).forEach(c=>this.r(w[c]))}n(w,i){const c=i.identifier,n=i.manifest.contributes&&i.manifest.contributes.localizations?i.manifest.contributes.localizations:[];for(const r of n)if(i.location.scheme===O.Schemas.file&&h(r)){let t=w[r.languageId];t||(t={hash:"",extensions:[],translations:{},label:r.localizedLanguageName??r.languageName},w[r.languageId]=t);const s=t.extensions.filter(o=>(0,m.$Sp)(o.extensionIdentifier,c))[0];s?s.version=i.manifest.version:t.extensions.push({extensionIdentifier:c,version:i.manifest.version});for(const o of r.translations)t.translations[o.id]=(0,g.$oc)(i.location.fsPath,o.path)}}r(w){if(w){const i=(0,I.createHash)("md5");for(const c of w.extensions)i.update(c.extensionIdentifier.uuid||c.extensionIdentifier.id).update(c.version);w.hash=i.digest("hex")}}s(w=()=>null){return this.g.queue(()=>{let i=null;return P.promises.readFile(this.f,"utf8").then(void 0,c=>c.code==="ENOENT"?Promise.resolve("{}"):Promise.reject(c)).then(c=>{try{return JSON.parse(c)}catch{return{}}}).then(c=>(i=w(c),c)).then(c=>{for(const r of Object.keys(c))c[r]||delete c[r];this.c=c,this.h=!0;const n=JSON.stringify(this.c);return this.j.debug("Writing language packs",n),u.Promises.writeFile(this.f,n)}).then(()=>i,c=>this.j.error(c))})}};v=Ee([oe(0,d.$Si),oe(1,a.$fk)],v);function h(R){if(typeof R.languageId!="string"||!Array.isArray(R.translations)||R.translations.length===0)return!1;for(const w of R.translations)if(typeof w.id!="string"||typeof w.path!="string")return!1;return!(R.languageName&&typeof R.languageName!="string"||R.localizedLanguageName&&typeof R.localizedLanguageName!="string")}}),define(le[128],he([0,1,58,7,27,11,41]),function(Q,e,P,I,y,k,C){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$ZR=void 0;const O="https://mobile.events.data.microsoft.com/OneCollector/1.0",g="https://mobile.events.data.microsoft.com/ping";async function u(f,m,a){k.$r;const $=await(0,P.$zq)("@microsoft/1ds-core-js","dist/ms.core.js"),S=await(0,P.$zq)("@microsoft/1ds-post-js","dist/ms.post.js"),b=new $.AppInsightsCore,v=new S.PostChannel,h={instrumentationKey:f,endpointUrl:O,loggingLevelTelemetry:0,loggingLevelConsole:0,disableCookiesUsage:!0,disableDbgExt:!0,disableInstrumentationKeyValidation:!0,channels:[[v]]};if(a){h.extensionConfig={};const R={alwaysUseXhrOverride:!0,ignoreMc1Ms0CookieProcessing:!0,httpXHROverride:a};h.extensionConfig[v.identifier]=R}return b.initialize(h,[]),b.addTelemetryInitializer(R=>{R.ext=R.ext??{},R.ext.web=R.ext.web??{},R.ext.web.consentDetails='{"GPC_DataSharingOptIn":false}',m&&(R.ext.utc=R.ext.utc??{},R.ext.utc.flags=8462029)}),b}class d{constructor(m,a,$,S,b){this.e=m,this.f=a,this.g=$,this.h=b,this.c=O,this.d=g,this.g||(this.g={}),typeof S=="function"?this.a=S():this.a=S,this.b=null}i(m){if(this.a){if(typeof this.a!="string"){m(this.a);return}this.b||(this.b=u(this.a,this.e,this.h)),this.b.then(a=>{m(a)},a=>{(0,I.$4)(a),console.error(a)})}}log(m,a){if(!this.a)return;a=(0,y.$no)(a,this.g),a=(0,C.$Np)(a);const $=this.f+"/"+m;try{this.i(S=>{S.pluginVersionString=a?.properties.version??"Unknown",S.track({name:$,baseData:{name:$,properties:a?.properties,measurements:a?.measurements}})})}catch{}}flush(){return this.a?new Promise(m=>{this.i(a=>{a.unload(!0,()=>{this.a=void 0,m(void 0)})})}):Promise.resolve(void 0)}}e.$ZR=d});var ze=this&&this.__importDefault||function(Q){return Q&&Q.__esModule?Q:{default:Q}};define(le[129],he([0,1,2,27,11,31,4,30,40,130,33,37,18,41]),function(Q,e,P,I,y,k,C,O,g,u,d,f,m,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$ps=void 0,u=ze(u);let $=class{static{this.IDLE_START_EVENT_NAME="UserIdleStart"}static{this.IDLE_STOP_EVENT_NAME="UserIdleStop"}constructor(v,h,R){this.k=h,this.l=R,this.d={},this.i=new P.$Yc,this.j=[],this.b=v.appenders,this.c=v.commonProperties??Object.create(null),this.sessionId=this.c.sessionID,this.machineId=this.c["common.machineId"],this.sqmId=this.c["common.sqmId"],this.devDeviceId=this.c["common.devDeviceId"],this.firstSessionDate=this.c["common.firstSessionDate"],this.msftInternal=this.c["common.msftInternal"],this.f=v.piiPaths||[],this.g=m.TelemetryLevel.USAGE,this.h=!!v.sendErrorTelemetry,this.j=[/(vscode-)?file:\/\/\/.*?\/resources\/app\//gi];for(const w of this.f)this.j.push(new RegExp((0,k.$mf)(w),"gi")),w.indexOf("\\")>=0&&this.j.push(new RegExp((0,k.$mf)(w.replace(/\\/g,"/")),"gi"));this.m(),this.i.add(this.k.onDidChangeConfiguration(w=>{(w.affectsConfiguration(m.$nm)||w.affectsConfiguration(m.$pm)||w.affectsConfiguration(m.$om))&&this.m()}))}setExperimentProperty(v,h){this.d[v]=h}m(){let v=(0,a.$Mp)(this.k);const h=this.l.enabledTelemetryLevels;if(h){this.h=this.sendErrorTelemetry?h.error:!1;const R=h.usage?m.TelemetryLevel.USAGE:h.error?m.TelemetryLevel.ERROR:m.TelemetryLevel.NONE;v=Math.min(v,R)}this.g=v}get sendErrorTelemetry(){return this.h}get telemetryLevel(){return this.g}dispose(){this.i.dispose()}n(v,h,R){this.g<h||(R=(0,I.$no)(R,this.d),R=(0,a.$Rp)(R,this.j),R=(0,I.$no)(R,this.c),this.b.forEach(w=>w.log(v,R)))}publicLog(v,h){this.n(v,m.TelemetryLevel.USAGE,h)}publicLog2(v,h){this.publicLog(v,h)}publicLogError(v,h){this.h&&this.n(v,m.TelemetryLevel.ERROR,h)}publicLogError2(v,h){this.publicLogError(v,h)}};e.$ps=$,e.$ps=$=Ee([oe(1,O.$ej),oe(2,d.$yk)],$);function S(){const b=(0,C.localize)(2068,null,u.default.nameLong),v=u.default.privacyStatementUrl?(0,C.localize)(2070,null,"https://aka.ms/vscode-telemetry",u.default.privacyStatementUrl):(0,C.localize)(2069,null,"https://aka.ms/vscode-telemetry"),h=y.$r?"":(0,C.localize)(2071,null),R=(0,C.localize)(2072,null),w=(0,C.localize)(2073,null),i=(0,C.localize)(2074,null),c=(0,C.localize)(2075,null),n=`
|       | ${R} | ${w} | ${i} |
|:------|:---------------------:|:---------------:|:--------------:|
| all   |            \u2713          |        \u2713        |        \u2713       |
| error |            \u2713          |        \u2713        |        -       |
| crash |            \u2713          |        -        |        -       |
| off   |            -          |        -        |        -       |
`,r=(0,C.localize)(2076,null);return`
${b} ${v} ${h}

&nbsp;

${c}
${n}

&nbsp;

${r}
`}f.$xo.as(g.$Co.Configuration).registerConfiguration({id:m.$mm,order:1,type:"object",title:(0,C.localize)(2077,null),properties:{[m.$nm]:{type:"string",enum:[m.TelemetryConfiguration.ON,m.TelemetryConfiguration.ERROR,m.TelemetryConfiguration.CRASH,m.TelemetryConfiguration.OFF],enumDescriptions:[(0,C.localize)(2078,null),(0,C.localize)(2079,null),(0,C.localize)(2080,null),(0,C.localize)(2081,null)],markdownDescription:S(),default:m.TelemetryConfiguration.ON,restricted:!0,scope:g.ConfigurationScope.APPLICATION,tags:["usesOnlineServices","telemetry"]}}}),f.$xo.as(g.$Co.Configuration).registerConfiguration({id:m.$mm,order:110,type:"object",title:(0,C.localize)(2082,null),properties:{[m.$pm]:{type:"boolean",markdownDescription:u.default.privacyStatementUrl?(0,C.localize)(2084,null,u.default.nameLong,u.default.privacyStatementUrl):(0,C.localize)(2083,null,u.default.nameLong),default:!0,restricted:!0,markdownDeprecationMessage:(0,C.localize)(2085,null,`\`#${m.$nm}#\``),scope:g.ConfigurationScope.APPLICATION,tags:["usesOnlineServices","telemetry"]}}})}),define(le[131],he([0,1,13,21,155,128]),function(Q,e,P,I,y,k){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$1R=void 0,y=be(y);async function C(d,f){const m=await f.request(d,I.CancellationToken.None),a=(await(0,P.$5e)(m.stream)).toString(),$=m.res.statusCode??200;return{headers:m.res.headers,statusCode:$,responseData:a}}async function O(d){const f={method:d.type,headers:d.headers};return new Promise((a,$)=>{const S=y.request(d.url??"",f,b=>{b.on("data",function(v){a({headers:b.headers,statusCode:b.statusCode??200,responseData:v.toString()})}),b.on("error",function(v){$(v)})});S.write(d.data,b=>{b&&$(b)}),S.end()})}async function g(d,f,m){const a=typeof f.data=="string"?f.data:new TextDecoder().decode(f.data),$={type:"POST",headers:{...f.headers,"Content-Type":"application/json","Content-Length":Buffer.byteLength(f.data).toString()},url:f.urlString,data:a};try{const S=d?await C($,d):await O($);m(S.statusCode,S.headers,S.responseData)}catch{m(0,{})}}class u extends k.$ZR{constructor(f,m,a,$,S){const b={sendPOST:(v,h)=>{g(f,v,h)}};super(m,a,$,S,b)}}e.$1R=u}),define(le[132],he([0,1,32,15,29]),function(Q,e,P,I,y){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$Bjc=k,P=be(P);async function k(C,O){const g=Object.create(null),u=(f,m)=>{const a=JSON.parse(f);g[m]=a};if(O){const f=[],m=await y.Promises.readdir(O);for(const $ of m)try{(await P.promises.stat((0,I.$oc)(O,$))).isDirectory()&&f.push($)}catch{}const a=[];for(const $ of f)(await y.Promises.readdir((0,I.$oc)(O,$))).filter(b=>b==="telemetry.json").length===1&&a.push($);for(const $ of a){const S=(await P.promises.readFile((0,I.$oc)(O,$,"telemetry.json"))).toString();u(S,$)}}let d=(await P.promises.readFile((0,I.$oc)(C,"telemetry-core.json"))).toString();return u(d,"vscode-core"),d=(await P.promises.readFile((0,I.$oc)(C,"telemetry-extensions.json"))).toString(),u(d,"vscode-extensions"),JSON.stringify(g,null,4)}}),define(le[133],he([0,1,11,87,18]),function(Q,e,P,I,y){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$Xic=k,e.$Yic=C,e.$Zic=O;async function k(g,u){let d=g.getItem(y.$jm);return(typeof d!="string"||P.$m&&d==="6c9d2bc8f91b89624add29c0abeae7fb42bf539fa1cdb2e3e57cd668fa9bcead")&&(d=await(0,I.$Zn)(u.error.bind(u))),d}async function C(g,u){let d=g.getItem(y.$km);return typeof d!="string"&&(d=await(0,I.$1n)(u.error.bind(u))),d}async function O(g,u){let d=g.getItem(y.$lm);return typeof d!="string"&&(d=await(0,I.$2n)(u.error.bind(u))),d}}),define(le[23],he([0,1,10]),function(Q,e,P){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$Pl=void 0,e.$Pl=(0,P.$Ki)("IUriIdentityService")}),define(le[134],he([0,1,23,99,9,16,81,5,2]),function(Q,e,P,I,y,k,C,O,g){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$3s=void 0;class u{static{this._clock=0}constructor(m){this.uri=m,this.time=u._clock++}touch(){return this.time=u._clock++,this}}let d=class{constructor(m){this.g=m,this.c=new g.$Yc,this.f=2**16;const a=new Map,$=S=>{let b=a.get(S.scheme);return b===void 0&&(b=m.hasProvider(S)&&!this.g.hasCapability(S,y.FileSystemProviderCapabilities.PathCaseSensitive),a.set(S.scheme,b)),b};this.c.add(O.Event.any(m.onDidChangeFileSystemProviderRegistrations,m.onDidChangeFileSystemProviderCapabilities)(S=>{a.delete(S.scheme)})),this.extUri=new k.$ah($),this.d=new C.$2s((S,b)=>this.extUri.compare(S,b,!0),this.f)}dispose(){this.c.dispose(),this.d.clear()}asCanonicalUri(m){this.g.hasProvider(m)&&(m=(0,k.$mh)(m));const a=this.d.get(m);return a?a.touch().uri.with({fragment:m.fragment}):(this.d.set(m,new u(m)),this.h(),m)}h(){if(this.d.size<this.f)return;const m=[...this.d.entries()].sort(($,S)=>$[1].time<S[1].time?1:$[1].time>S[1].time?-1:0);u._clock=0,this.d.clear();const a=this.f*.5;for(let $=0;$<a;$++)this.d.set(m[$][0],m[$][1].touch())}};e.$3s=d,e.$3s=d=Ee([oe(0,y.$fl)],d),(0,I.$Zs)(P.$Pl,d,I.InstantiationType.Delayed)}),define(le[135],he([0,1,5,2,9,49,25]),function(Q,e,P,I,y,k,C){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$ljc=void 0;class O extends I.$Zc{constructor(u,d,f,m,a,$){super(),this.f=u,this.g=d,this.h=f,this.j=m,this.m=a,this.n=$,this.capabilities=this.g.capabilities,this.onDidChangeCapabilities=this.g.onDidChangeCapabilities,this.a=this.B(new P.$qe),this.onDidChangeFile=this.a.event,this.b=k.$Qi.forUris(()=>!(this.capabilities&y.FileSystemProviderCapabilities.PathCaseSensitive)),this.c=new C.$Gc(S=>this.m.extUri.getComparisonKey(this.t(S))),this.r(),this.B(m.onDidChangeProfiles(()=>this.r())),this.B(this.g.onDidChangeFile(S=>this.s(S)))}r(){this.c.clear();for(const u of this.j.profiles)this.c.add(u.settingsResource),this.c.add(u.keybindingsResource),this.c.add(u.tasksResource),this.c.add(u.extensionsResource)}open(u,d){return this.g.open(this.t(u),d)}close(u){return this.g.close(u)}read(u,d,f,m,a){return this.g.read(u,d,f,m,a)}write(u,d,f,m,a){return this.g.write(u,d,f,m,a)}watch(u,d){this.b.set(u,u);const f=this.g.watch(this.t(u),d);return(0,I.$Xc)(()=>{this.b.delete(u),f.dispose()})}stat(u){return this.g.stat(this.t(u))}mkdir(u){return this.g.mkdir(this.t(u))}rename(u,d,f){return this.g.rename(this.t(u),this.t(d),f)}readFile(u,d){return this.g.readFile(this.t(u),d)}readFileStream(u,d,f){return this.g.readFileStream(this.t(u),d,f)}readdir(u){return this.g.readdir(this.t(u))}enforceAtomicReadFile(u){return this.c.has(u)}writeFile(u,d,f){return this.g.writeFile(this.t(u),d,f)}enforceAtomicWriteFile(u){return this.c.has(u)?{postfix:".vsctmp"}:!1}delete(u,d){return this.g.delete(this.t(u),d)}copy(u,d,f){if((0,y.$jl)(this.g))return this.g.copy(this.t(u),this.t(d),f);throw new Error("copy not supported")}cloneFile(u,d){if((0,y.$kl)(this.g))return this.g.cloneFile(this.t(u),this.t(d));throw new Error("clone not supported")}s(u){const d=[];for(const f of u){if(f.resource.scheme!==this.f)continue;const m=this.u(f.resource);this.b.findSubstr(m)&&d.push({resource:m,type:f.type,cId:f.cId})}d.length&&(this.n.debug("User data changed"),this.a.fire(d))}t(u){return u.with({scheme:this.f})}u(u){return u.with({scheme:this.h})}}e.$ljc=O}),define(le[136],he([0,1,4,15,49,16,12,10,14]),function(Q,e,P,I,y,k,C,O,g){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$aj=e.$0i=e.$9i=e.$8i=e.$7i=e.$5i=e.$4i=e.WorkbenchState=e.$Xi=e.$Wi=e.$Ti=void 0,e.$Ui=u,e.$Vi=d,e.$Yi=f,e.$Zi=m,e.$1i=a,e.$2i=S,e.$3i=b,e.$6i=R,e.$$i=w,e.$_i=i,e.$bj=c,e.$cj=n,e.$dj=r,e.$Ti=(0,O.$Ki)("contextService");function u(t){const s=t;return typeof s?.id=="string"&&C.URI.isUri(s.uri)}function d(t){return typeof t?.id=="string"&&!u(t)&&!m(t)}e.$Wi={id:"ext-dev"},e.$Xi={id:"empty-window"};function f(t,s){if(typeof t=="string"||typeof t>"u")return typeof t=="string"?{id:(0,I.$sc)(t)}:s?e.$Wi:e.$Xi;const o=t;return o.configuration?{id:o.id,configPath:o.configuration}:o.folders.length===1?{id:o.id,uri:o.folders[0].uri}:{id:o.id}}function m(t){const s=t;return typeof s?.id=="string"&&C.URI.isUri(s.configPath)}function a(t){const s=t;if(s?.uri)return{id:s.id,uri:C.URI.revive(s.uri)};const o=t;if(o?.configPath)return{id:o.id,configPath:C.URI.revive(o.configPath)};if(t?.id)return{id:t.id}}var $;(function(t){t[t.EMPTY=1]="EMPTY",t[t.FOLDER=2]="FOLDER",t[t.WORKSPACE=3]="WORKSPACE"})($||(e.WorkbenchState=$={}));function S(t){const s=t;return!!(s&&typeof s=="object"&&typeof s.id=="string"&&Array.isArray(s.folders))}function b(t){const s=t;return!!(s&&typeof s=="object"&&C.URI.isUri(s.uri)&&typeof s.name=="string"&&typeof s.toResource=="function")}class v{constructor(s,o,l,p,A){this.h=s,this.j=l,this.k=p,this.l=A,this.c=y.$Qi.forUris(this.l,()=>!0),this.folders=o}update(s){this.h=s.id,this.k=s.configuration,this.j=s.transient,this.l=s.l,this.folders=s.folders}get folders(){return this.g}set folders(s){this.g=s,this.n()}get id(){return this.h}get transient(){return this.j}get configuration(){return this.k}set configuration(s){this.k=s}getFolder(s){return s&&this.c.findSubstr(s)||null}n(){this.c=y.$Qi.forUris(this.l,()=>!0);for(const s of this.folders)this.c.set(s.uri,s)}toJSON(){return{id:this.id,folders:this.folders,transient:this.transient,configuration:this.configuration}}}e.$4i=v;class h{constructor(s,o){this.raw=o,this.uri=s.uri,this.index=s.index,this.name=s.name}toResource(s){return(0,k.$lh)(this.uri,s)}toJSON(){return{uri:this.uri,name:this.name,index:this.index}}}e.$5i=h;function R(t){return new h({uri:t,index:0,name:(0,k.$hh)(t)},{uri:t.toString()})}e.$7i="code-workspace",e.$8i=`.${e.$7i}`,e.$9i=[{name:(0,P.localize)(2489,null),extensions:[e.$7i]}],e.$0i="workspace.json";function w(t,s){return k.$ch.isEqualOrParent(t,s.untitledWorkspacesHome)}function i(t){let s;return C.URI.isUri(t)?s=t:s=t.configuration,s?.scheme===g.Schemas.tmp}e.$aj="4064f6ec-cb38-4ad0-af64-ee6467e63c82";function c(t){return t.id===e.$aj}function n(t,s){return!w(t,s)&&!i(t)}function r(t){return(typeof t=="string"?(0,I.$tc)(t):(0,k.$jh)(t))===e.$8i}}),define(le[24],he([0,1,43,5,2,16,12,4,17,9,10,6,136,25,23,8,28,31,3]),function(Q,e,P,I,y,k,C,O,g,u,d,f,m,a,$,S,b,v,h){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$Vl=e.$Ul=e.$Rl=e.ProfileResourceType=void 0,e.$Ql=w,e.$Sl=i,e.$Tl=c;var R;(function(t){t.Settings="settings",t.Keybindings="keybindings",t.Snippets="snippets",t.Tasks="tasks",t.Extensions="extensions",t.GlobalState="globalState"})(R||(e.ProfileResourceType=R={}));function w(t){const s=t;return!!(s&&typeof s=="object"&&typeof s.id=="string"&&typeof s.isDefault=="boolean"&&typeof s.name=="string"&&C.URI.isUri(s.location)&&C.URI.isUri(s.globalStorageHome)&&C.URI.isUri(s.settingsResource)&&C.URI.isUri(s.keybindingsResource)&&C.URI.isUri(s.tasksResource)&&C.URI.isUri(s.snippetsHome)&&C.URI.isUri(s.extensionsResource))}e.$Rl=(0,d.$Ki)("IUserDataProfilesService");function i(t,s){return{id:t.id,isDefault:t.isDefault,name:t.name,shortName:t.shortName,icon:t.icon,location:C.URI.revive(t.location).with({scheme:s}),globalStorageHome:C.URI.revive(t.globalStorageHome).with({scheme:s}),settingsResource:C.URI.revive(t.settingsResource).with({scheme:s}),keybindingsResource:C.URI.revive(t.keybindingsResource).with({scheme:s}),tasksResource:C.URI.revive(t.tasksResource).with({scheme:s}),snippetsHome:C.URI.revive(t.snippetsHome).with({scheme:s}),extensionsResource:C.URI.revive(t.extensionsResource).with({scheme:s}),cacheHome:C.URI.revive(t.cacheHome).with({scheme:s}),useDefaultFlags:t.useDefaultFlags,isTransient:t.isTransient}}function c(t,s,o,l,p,A){return{id:t,name:s,location:o,isDefault:!1,shortName:p?.shortName,icon:p?.icon,globalStorageHome:A&&p?.useDefaultFlags?.globalState?A.globalStorageHome:(0,k.$lh)(o,"globalStorage"),settingsResource:A&&p?.useDefaultFlags?.settings?A.settingsResource:(0,k.$lh)(o,"settings.json"),keybindingsResource:A&&p?.useDefaultFlags?.keybindings?A.keybindingsResource:(0,k.$lh)(o,"keybindings.json"),tasksResource:A&&p?.useDefaultFlags?.tasks?A.tasksResource:(0,k.$lh)(o,"tasks.json"),snippetsHome:A&&p?.useDefaultFlags?.snippets?A.snippetsHome:(0,k.$lh)(o,"snippets"),extensionsResource:A&&p?.useDefaultFlags?.extensions?A.extensionsResource:(0,k.$lh)(o,"extensions.json"),cacheHome:(0,k.$lh)(l,t),useDefaultFlags:p?.useDefaultFlags,isTransient:p?.transient}}let n=class extends y.$Zc{static{this.b="userDataProfiles"}static{this.c="profileAssociations"}get defaultProfile(){return this.profiles[0]}get profiles(){return[...this.C.profiles,...this.s.profiles]}constructor(s,o,l,p){super(),this.t=s,this.u=o,this.w=l,this.y=p,this.f=!0,this.h=this.B(new I.$qe),this.onDidChangeProfiles=this.h.event,this.j=this.B(new I.$qe),this.onWillCreateProfile=this.j.event,this.m=this.B(new I.$qe),this.onWillRemoveProfile=this.m.event,this.n=this.B(new I.$qe),this.onDidResetWorkspaces=this.n.event,this.r=new Map,this.s={profiles:[],folders:new a.$Fc,workspaces:new a.$Fc,emptyWindows:new Map},this.profilesHome=(0,k.$lh)(this.t.userRoamingDataHome,"profiles"),this.g=(0,k.$lh)(this.t.cacheHome,"CachedProfilesData")}init(){this.z=void 0}setEnablement(s){this.f!==s&&(this.z=void 0,this.f=s)}isEnabled(){return this.f}get C(){if(!this.z){const s=this.D(),o=[s];if(this.f)try{for(const A of this.O()){if(!A.name||!(0,h.$jg)(A.name)||!A.location){this.y.warn("Skipping the invalid stored profile",A.location||A.name);continue}o.push(c((0,k.$ih)(A.location),A.name,A.location,this.g,{shortName:A.shortName,icon:A.icon,useDefaultFlags:A.useDefaultFlags},s))}}catch(A){this.y.error(A)}const l=new a.$Fc,p=new Map;if(o.length)try{const A=this.Q();if(A.workspaces)for(const[T,N]of Object.entries(A.workspaces)){const D=C.URI.parse(T),j=o.find(x=>x.id===N);j&&l.set(D,j)}if(A.emptyWindows)for(const[T,N]of Object.entries(A.emptyWindows)){const D=o.find(j=>j.id===N);D&&p.set(T,D)}}catch(A){this.y.error(A)}this.z={profiles:o,workspaces:l,emptyWindows:p}}return this.z}D(){const s=c("__default__profile__",(0,O.localize)(2442,null),this.t.userRoamingDataHome,this.g);return{...s,extensionsResource:this.S()??s.extensionsResource,isDefault:!0}}async createTransientProfile(s){const o="Temp",l=new RegExp(`${(0,v.$mf)(o)}\\s(\\d+)`);let p=0;for(const T of this.profiles){const N=l.exec(T.name),D=N?parseInt(N[1]):0;p=D>p?D:p}const A=`${o} ${p+1}`;return this.createProfile((0,P.$yj)((0,b.$7g)()).toString(16),A,{transient:!0},s)}async createNamedProfile(s,o,l){return this.createProfile((0,P.$yj)((0,b.$7g)()).toString(16),s,o,l)}async createProfile(s,o,l,p){if(!this.f)throw new Error("Profiles are disabled in the current environment.");const A=await this.F(s,o,l);return p&&await this.setProfileForWorkspace(p,A),A}async F(s,o,l){if(!(0,h.$jg)(o)||!o)throw new Error("Name of the profile is mandatory and must be of type `string`");let p=this.r.get(o);return p||(p=(async()=>{try{if(this.profiles.find(D=>D.name===o||D.id===s))throw new Error(`Profile with ${o} name already exists`);const T=c(s,o,(0,k.$lh)(this.profilesHome,s),this.g,l,this.defaultProfile);await this.u.createFolder(T.location);const N=[];return this.j.fire({profile:T,join(D){N.push(D)}}),await S.Promises.settled(N),this.I([T],[],[]),T}finally{this.r.delete(o)}})(),this.r.set(o,p)),p}async updateProfile(s,o){if(!this.f)throw new Error("Profiles are disabled in the current environment.");let l=this.profiles.find(p=>p.id===s.id);if(!l)throw new Error(`Profile '${s.name}' does not exist`);return l=c(l.id,o.name??l.name,l.location,this.g,{shortName:o.shortName??l.shortName,icon:o.icon===null?void 0:o.icon??l.icon,transient:o.transient??l.isTransient,useDefaultFlags:o.useDefaultFlags??l.useDefaultFlags},this.defaultProfile),this.I([],[],[l]),l}async removeProfile(s){if(!this.f)throw new Error("Profiles are disabled in the current environment.");if(s.isDefault)throw new Error("Cannot remove default profile");const o=this.profiles.find(p=>p.id===s.id);if(!o)throw new Error(`Profile '${s.name}' does not exist`);const l=[];this.m.fire({profile:o,join(p){l.push(p)}});try{await Promise.allSettled(l)}catch(p){this.y.error(p)}for(const p of[...this.C.emptyWindows.keys()])o.id===this.C.emptyWindows.get(p)?.id&&this.C.emptyWindows.delete(p);for(const p of[...this.C.workspaces.keys()])o.id===this.C.workspaces.get(p)?.id&&this.C.workspaces.delete(p);this.M(),this.I([],[o],[]);try{await this.u.del(o.cacheHome,{recursive:!0})}catch(p){(0,u.$wl)(p)!==u.FileOperationResult.FILE_NOT_FOUND&&this.y.error(p)}}async setProfileForWorkspace(s,o){if(!this.f)throw new Error("Profiles are disabled in the current environment.");const l=this.profiles.find(p=>p.id===o.id);if(!l)throw new Error(`Profile '${o.name}' does not exist`);this.L(s,l)}unsetWorkspace(s,o){if(!this.f)throw new Error("Profiles are disabled in the current environment.");this.L(s,void 0,o)}async resetWorkspaces(){this.s.folders.clear(),this.s.workspaces.clear(),this.s.emptyWindows.clear(),this.C.workspaces.clear(),this.C.emptyWindows.clear(),this.M(),this.n.fire()}async cleanUp(){if(this.f&&await this.u.exists(this.profilesHome)){const s=await this.u.resolve(this.profilesHome);await Promise.all((s.children||[]).filter(o=>o.isDirectory&&this.profiles.every(l=>!this.w.extUri.isEqual(l.location,o.resource))).map(o=>this.u.del(o.resource,{recursive:!0})))}}async cleanUpTransientProfiles(){if(!this.f)return;const s=this.s.profiles.filter(o=>!this.H(o));await Promise.allSettled(s.map(o=>this.removeProfile(o)))}getProfileForWorkspace(s){const o=this.G(s),l=C.URI.isUri(o)?this.C.workspaces.get(o):this.C.emptyWindows.get(o);return l||((0,m.$Ui)(s)?this.s.folders.get(s.uri):(0,m.$Zi)(s)?this.s.workspaces.get(s.configPath):this.s.emptyWindows.get(s.id))}G(s){return(0,m.$Ui)(s)?s.uri:(0,m.$Zi)(s)?s.configPath:s.id}H(s){return!!([...this.C.emptyWindows.values()].some(o=>this.w.extUri.isEqual(o.location,s.location))||[...this.C.workspaces.values()].some(o=>this.w.extUri.isEqual(o.location,s.location))||[...this.s.emptyWindows.values()].some(o=>this.w.extUri.isEqual(o.location,s.location))||[...this.s.workspaces.values()].some(o=>this.w.extUri.isEqual(o.location,s.location))||[...this.s.folders.values()].some(o=>this.w.extUri.isEqual(o.location,s.location)))}I(s,o,l){const p=[...this.profiles,...s],A=[],T=this.s.profiles;this.s.profiles=[];for(let N of p){if(N.isDefault||o.some(j=>N.id===j.id))continue;N=l.find(j=>N.id===j.id)??N;const D=T.find(j=>N.id===j.id);if(N.isTransient)this.s.profiles.push(N);else{if(D){for(const[j,x]of this.s.emptyWindows.entries())if(N.id===x.id){this.L({id:j},N);break}for(const[j,x]of this.s.workspaces.entries())if(N.id===x.id){this.L({id:"",configPath:j},N);break}for(const[j,x]of this.s.folders.entries())if(N.id===x.id){this.L({id:"",uri:j},N);break}}A.push({location:N.location,name:N.name,shortName:N.shortName,icon:N.icon,useDefaultFlags:N.useDefaultFlags})}}this.P(A),this.z=void 0,this.J(s,o,l)}J(s,o,l){this.h.fire({added:s,removed:o,updated:l,all:this.profiles})}L(s,o,l){if(l=o?.isTransient?!0:l,l)(0,m.$Ui)(s)?(this.s.folders.delete(s.uri),o&&this.s.folders.set(s.uri,o)):(0,m.$Zi)(s)?(this.s.workspaces.delete(s.configPath),o&&this.s.workspaces.set(s.configPath,o)):(this.s.emptyWindows.delete(s.id),o&&this.s.emptyWindows.set(s.id,o));else{this.L(s,void 0,!0);const p=this.G(s);C.URI.isUri(p)?(this.C.workspaces.delete(p),o&&this.C.workspaces.set(p,o)):(this.C.emptyWindows.delete(p),o&&this.C.emptyWindows.set(p,o)),this.M()}}M(){const s={};for(const[l,p]of this.C.workspaces.entries())s[l.toString()]=p.id;const o={};for(const[l,p]of this.C.emptyWindows.entries())o[l.toString()]=p.id;this.R({workspaces:s,emptyWindows:o}),this.z=void 0}N(s){const o={},l=this.D();if(s.workspaces)for(const[A,T]of Object.entries(s.workspaces)){const N=C.URI.parse(T);o[A]=this.w.extUri.isEqual(N,l.location)?l.id:this.w.extUri.basename(N)}const p={};if(s.emptyWindows)for(const[A,T]of Object.entries(s.emptyWindows)){const N=C.URI.parse(T);p[A]=this.w.extUri.isEqual(N,l.location)?l.id:this.w.extUri.basename(N)}return{workspaces:o,emptyWindows:p}}O(){return[]}P(s){throw new Error("not implemented")}Q(){return{}}R(s){throw new Error("not implemented")}S(){}};e.$Ul=n,e.$Ul=n=Ee([oe(0,g.$Ri),oe(1,u.$fl),oe(2,$.$Pl),oe(3,f.$fk)],n);class r extends n{constructor(){super(...arguments),this.a=[],this.X={}}O(){return this.a}P(s){this.a=s}Q(){return this.X}R(s){this.X=s}}e.$Vl=r}),define(le[53],he([0,1,19,8,21,7,5,2,25,11,3,12,4,20,26,22,44,6,33,18,23,24]),function(Q,e,P,I,y,k,C,O,g,u,d,f,m,a,$,S,b,v,h,R,w,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$Pq=e.$Nq=void 0,e.$Oq=n,m=be(m);let c=class extends O.$Zc{get onInstallExtension(){return this.n.event}get onDidInstallExtensions(){return this.s.event}get onUninstallExtension(){return this.t.event}get onDidUninstallExtension(){return this.u.event}get onDidUpdateExtensionMetadata(){return this.w.event}constructor(o,l,p,A,T,N){super(),this.z=o,this.C=l,this.D=p,this.F=A,this.G=T,this.H=N,this.h=0,this.j=new Map,this.m=new Map,this.n=this.B(new C.$qe),this.s=this.B(new C.$qe),this.t=this.B(new C.$qe),this.u=this.B(new C.$qe),this.w=this.B(new C.$qe),this.y=[],this.B((0,O.$Xc)(()=>{this.j.forEach(({task:D})=>D.cancel()),this.m.forEach(D=>D.cancel()),this.j.clear(),this.m.clear()}))}async canInstall(o){const l=await this.getTargetPlatform();return o.allTargetPlatforms.some(p=>(0,a.$pp)(p,o.allTargetPlatforms,l))}async installFromGallery(o,l={}){try{const A=(await this.installGalleryExtensions([{extension:o,options:l}])).find(({identifier:T})=>(0,$.$Sp)(T,o.identifier));if(A?.local)return A?.local;throw A?.error?A.error:new a.$tp(`Unknown error while installing extension ${o.identifier.id}`,a.ExtensionManagementErrorCode.Unknown)}catch(p){throw n(p)}}async installGalleryExtensions(o){if(!this.z.isEnabled())throw new a.$tp(m.localize(1767,null),a.ExtensionManagementErrorCode.NotAllowed);const l=[],p=[];return await Promise.allSettled(o.map(async({extension:A,options:T})=>{try{const N=await this.N(A,!!T?.installGivenVersion,!!T?.installPreReleaseVersion,T.productVersion??{version:this.G.version,date:this.G.date});p.push({...N,options:T})}catch(N){l.push({identifier:A.identifier,operation:a.InstallOperation.Install,source:A,error:N,profileLocation:T.profileLocation??this.W()})}})),p.length&&l.push(...await this.I(p)),l}async uninstall(o,l){return this.F.trace("ExtensionManagementService#uninstall",o.identifier.id),this.uninstallExtensions([{extension:o,options:l}])}async toggleAppliationScope(o,l){if((0,S.$An)(o.manifest)||o.isBuiltin)return o;if(o.isApplicationScoped){let p=await this.updateMetadata(o,{isApplicationScoped:!1},this.H.defaultProfile.extensionsResource);this.D.extUri.isEqual(l,this.H.defaultProfile.extensionsResource)||(p=await this.Z(o,this.H.defaultProfile.extensionsResource,l));for(const A of this.H.profiles){const T=(await this.getInstalled(S.ExtensionType.User,A.extensionsResource)).find(N=>(0,$.$Sp)(N.identifier,o.identifier));T?this.w.fire({local:T,profileLocation:A.extensionsResource}):this.u.fire({identifier:o.identifier,profileLocation:A.extensionsResource})}return p}else{const p=this.D.extUri.isEqual(l,this.H.defaultProfile.extensionsResource)?await this.updateMetadata(o,{isApplicationScoped:!0},this.H.defaultProfile.extensionsResource):await this.Z(o,l,this.H.defaultProfile.extensionsResource,{isApplicationScoped:!0});return this.s.fire([{identifier:p.identifier,operation:a.InstallOperation.Install,local:p,profileLocation:this.H.defaultProfile.extensionsResource,applicationScoped:!0}]),p}}getExtensionsControlManifest(){const o=new Date().getTime();return(!this.g||o-this.h>1e3*60*5)&&(this.g=this.U(),this.h=o),this.g}registerParticipant(o){this.y.push(o)}async resetPinnedStateForAllUserExtensions(o){try{await this.L(this.H.profiles.map(async l=>{const p=await this.getInstalled(S.ExtensionType.User,l.extensionsResource);await this.L(p.map(async A=>{A.pinned!==o&&await this.updateMetadata(A,{pinned:o},l.extensionsResource)}))}))}catch(l){throw this.F.error("Error while resetting pinned state for all user extensions",(0,k.$bb)(l)),l}}async I(o){const l=new Map,p=new Map,A=[],T=(D,j)=>`${$.$Tp.create(D).toString()}-${j.toString()}`,N=(D,j,x,Y)=>{const ne=this.X(D,j,x),ae=`${(0,$.$Xp)(D.publisher,D.name)}-${x.profileLocation.toString()}`;p.set(ae,{task:ne,root:Y}),this.n.fire({identifier:ne.identifier,source:j,profileLocation:x.profileLocation}),this.F.info("Installing extension:",ne.identifier.id,x),f.URI.isUri(j)||this.j.set(T(j,x.profileLocation),{task:ne,waitingTasks:[]})};try{for(const{manifest:D,extension:j,options:x}of o){const Y=x.isApplicationScoped||x.isBuiltin||(0,S.$An)(D),ne={...x,installOnlyNewlyAddedFromExtensionPack:x.installOnlyNewlyAddedFromExtensionPack??!f.URI.isUri(j),isApplicationScoped:Y,profileLocation:Y?this.H.defaultProfile.extensionsResource:x.profileLocation??this.W(),productVersion:x.productVersion??{version:this.G.version,date:this.G.date}},ae=f.URI.isUri(j)?void 0:this.j.get(T(j,ne.profileLocation));ae?(this.F.info("Extension is already requested to install",ae.task.identifier.id,ne.profileLocation.toString()),A.push(ae.task.waitUntilTaskIsFinished())):N(D,j,ne,void 0)}return await Promise.all([...p.values()].map(async({task:D})=>{if(D.options.donotIncludePackAndDependencies)this.F.info("Installing the extension without checking dependencies and pack",D.identifier.id);else try{const j=await this.M(D.identifier,D.manifest,!!D.options.installOnlyNewlyAddedFromExtensionPack,!!D.options.installPreReleaseVersion,D.options.profileLocation,D.options.productVersion),x=await this.getInstalled(void 0,D.options.profileLocation,D.options.productVersion),Y={...D.options,context:{...D.options.context,[a.$jp]:!0}};for(const{gallery:ne,manifest:ae}of(0,P.$Qb)(j,({gallery:ue})=>ue.identifier.id)){if(p.has(`${ne.identifier.id.toLowerCase()}-${Y.profileLocation.toString()}`))continue;const ue=this.j.get(T(ne,Y.profileLocation));if(ue){if(this.J(D,ue.task)){const me=ue.task.identifier;this.F.info("Waiting for already requested installing extension",me.id,D.identifier.id,Y.profileLocation.toString()),ue.waitingTasks.push(D),A.push(C.Event.toPromise(C.Event.filter(this.onDidInstallExtensions,W=>W.some(_=>(0,$.$Sp)(_.identifier,me)))).then(W=>{if(this.F.info("Finished waiting for already requested installing extension",me.id,D.identifier.id,Y.profileLocation.toString()),!W.find(M=>(0,$.$Sp)(M.identifier,me))?.local)throw new Error(`Extension ${me.id} is not installed`)}))}}else x.some(({identifier:me})=>(0,$.$Sp)(me,ne.identifier))||N(ae,ne,Y,D)}}catch(j){if(f.URI.isUri(D.source))(0,P.$Pb)(D.manifest.extensionDependencies)&&this.F.warn("Cannot install dependencies of extension:",D.identifier.id,j.message),(0,P.$Pb)(D.manifest.extensionPack)&&this.F.warn("Cannot install packed extensions of extension:",D.identifier.id,j.message);else throw this.F.error("Error while preparing to install dependencies and extension packs of the extension:",D.identifier.id),j}})),await this.L([...p.entries()].map(async([D,{task:j}])=>{const x=new Date().getTime();let Y;try{Y=await j.run(),await this.L(this.y.map(ne=>ne.postInstall(Y,j.source,j.options,y.CancellationToken.None)),a.ExtensionManagementErrorCode.PostInstall)}catch(ne){const ae=n(ne);throw f.URI.isUri(j.source)||r(this.C,j.operation===a.InstallOperation.Update?"extensionGallery:update":"extensionGallery:install",{extensionData:(0,$.$1p)(j.source),error:ae,source:j.options.context?.[a.$ip]}),l.set(D,{error:ae,identifier:j.identifier,operation:j.operation,source:j.source,context:j.options.context,profileLocation:j.options.profileLocation,applicationScoped:j.options.isApplicationScoped}),this.F.error("Error while installing the extension",j.identifier.id,(0,k.$bb)(ae),j.options.profileLocation.toString()),ae}if(!f.URI.isUri(j.source)){const ne=j.operation===a.InstallOperation.Update,ae=ne?void 0:(new Date().getTime()-j.source.lastUpdated)/1e3;if(r(this.C,ne?"extensionGallery:update":"extensionGallery:install",{extensionData:(0,$.$1p)(j.source),verificationStatus:j.verificationStatus,duration:new Date().getTime()-x,durationSinceUpdate:ae,source:j.options.context?.[a.$ip]}),u.$r&&j.operation!==a.InstallOperation.Update)try{await this.z.reportStatistic(Y.manifest.publisher,Y.manifest.name,Y.manifest.version,a.StatisticType.Install)}catch{}}l.set(D,{local:Y,identifier:j.identifier,operation:j.operation,source:j.source,context:j.options.context,profileLocation:j.options.profileLocation,applicationScoped:Y.isApplicationScoped})})),A.length&&await this.L(A),[...l.values()]}catch(D){const j=(ne,ae,ue)=>{const me=[];ne.manifest.extensionDependencies?.length&&me.push(...ne.manifest.extensionDependencies),ne.manifest.extensionPack?.length&&me.push(...ne.manifest.extensionPack);for(const W of me){if(ue.includes(W.toLowerCase()))continue;ue.push(W.toLowerCase());const _=l.get(`${W.toLowerCase()}-${ae.toString()}`);_?.local&&(ue=j(_.local,ae,ue))}return ue},x=ne=>({identifier:ne.identifier,operation:a.InstallOperation.Install,source:ne.source,context:ne.options.context,profileLocation:ne.options.profileLocation,error:D}),Y=[];for(const[ne,{task:ae,root:ue}]of p){const me=l.get(ne);me?me.local&&ue&&!l.get(`${ue.identifier.id.toLowerCase()}-${ae.options.profileLocation.toString()}`)?.local&&(Y.push(this.Y(me.local,{versionOnly:!0,profileLocation:ae.options.profileLocation})),l.set(ne,x(ae))):(ae.cancel(),l.set(ne,x(ae)))}for(const[ne,{task:ae}]of p){const ue=l.get(ne);if(!ue?.local||ae.options.donotIncludePackAndDependencies)continue;j(ue.local,ae.options.profileLocation,[ue.local.identifier.id.toLowerCase()]).slice(1).some(W=>p.has(`${W.toLowerCase()}-${ae.options.profileLocation.toString()}`)&&!l.get(`${W.toLowerCase()}-${ae.options.profileLocation.toString()}`)?.local)&&(Y.push(this.Y(ue.local,{versionOnly:!0,profileLocation:ae.options.profileLocation})),l.set(ne,x(ae)))}throw Y.length&&await Promise.allSettled(Y.map(async ne=>{try{await ne.run(),this.F.info("Rollback: Uninstalled extension",ne.extension.identifier.id)}catch(ae){this.F.warn("Rollback: Error while uninstalling extension",ne.extension.identifier.id,(0,k.$bb)(ae))}})),D}finally{for(const{task:D}of p.values())D.source&&!f.URI.isUri(D.source)&&this.j.delete(T(D.source,D.options.profileLocation));if(l.size){const D=[...l.values()];for(const j of D)j.local&&this.F.info("Extension installed successfully:",j.identifier.id,j.profileLocation.toString());this.s.fire(D)}}}J(o,l){for(const[,{task:p,waitingTasks:A}]of this.j.entries())if(p===o&&(A.includes(l)||A.some(T=>this.J(T,l)))||p===l&&A[0]&&!this.J(o,A[0]))return!1;return!0}async L(o,l){const p=[],A=[],T=await Promise.allSettled(o);for(const D of T)D.status==="fulfilled"?p.push(D.value):A.push(n(D.reason,l));if(!A.length)return p;if(A.length===1)throw A[0];let N=new a.$tp("",a.ExtensionManagementErrorCode.Unknown);for(const D of A)N=new a.$tp(N.message?`${N.message}, ${D.message}`:D.message,D.code!==a.ExtensionManagementErrorCode.Unknown&&D.code!==a.ExtensionManagementErrorCode.Internal?D.code:N.code);throw N}async M(o,l,p,A,T,N){if(!this.z.isEnabled())return[];const D=await this.getInstalled(void 0,T,N),j=[],x=[],Y=async(ne,ae)=>{j.push(ne);const ue=ae.extensionDependencies||[],me=[...ue];if(ae.extensionPack){const W=p?D.find(_=>(0,$.$Sp)(_.identifier,ne)):void 0;for(const _ of ae.extensionPack)W&&W.manifest.extensionPack&&W.manifest.extensionPack.some(M=>(0,$.$Sp)({id:M},{id:_}))||me.every(M=>!(0,$.$Sp)({id:M},{id:_}))&&me.push(_)}if(me.length){const W=me.filter(_=>j.every(M=>!(0,$.$Sp)(M,{id:_})));if(W.length){const _=await this.z.getExtensions(W.map(M=>({id:M,preRelease:A})),y.CancellationToken.None);for(const M of _){if(j.find(K=>(0,$.$Sp)(K,M.identifier)))continue;const U=ue.some(K=>(0,$.$Sp)({id:K},M.identifier));let H;try{H=await this.N(M,!1,A,N)}catch(K){if(U)throw K;this.F.info("Skipping the packed extension as it cannot be installed",M.identifier.id,(0,k.$bb)(K));continue}x.push({gallery:H.extension,manifest:H.manifest}),await Y(H.extension.identifier,H.manifest)}}}};return await Y(o,l),x}async N(o,l,p,A){let T;const N=await this.getExtensionsControlManifest();if(N.malicious.some(x=>(0,$.$Sp)(o.identifier,x)))throw new a.$tp(m.localize(1768,null,o.identifier.id),a.ExtensionManagementErrorCode.Malicious);const D=N.deprecated[o.identifier.id.toLowerCase()];if(D?.extension?.autoMigrate){if(this.F.info(`The '${o.identifier.id}' extension is deprecated, fetching the compatible '${D.extension.id}' extension instead.`),T=(await this.z.getExtensions([{id:D.extension.id,preRelease:D.extension.preRelease}],{targetPlatform:await this.getTargetPlatform(),compatible:!0,productVersion:A},y.CancellationToken.None))[0],!T)throw new a.$tp(m.localize(1769,null,o.identifier.id,D.extension.id),a.ExtensionManagementErrorCode.Deprecated)}else{if(!await this.canInstall(o)){const x=await this.getTargetPlatform();throw new a.$tp(m.localize(1770,null,o.identifier.id,this.G.nameLong,(0,a.$lp)(x)),a.ExtensionManagementErrorCode.IncompatibleTargetPlatform)}if(T=await this.O(o,l,p,A),!T){const x=[];throw(0,b.$aq)(o.properties.enabledApiProposals??[],x)?!p&&o.properties.isPreReleaseVersion&&(await this.z.getExtensions([o.identifier],y.CancellationToken.None))[0]?new a.$tp(m.localize(1772,null,o.displayName??o.identifier.id),a.ExtensionManagementErrorCode.ReleaseVersionNotFound):new a.$tp(m.localize(1773,null,o.identifier.id,this.G.nameLong,this.G.version),a.ExtensionManagementErrorCode.Incompatible):new a.$tp(m.localize(1771,null,o.displayName??o.identifier.id,x[0]),a.ExtensionManagementErrorCode.IncompatibleApi)}}this.F.info("Getting Manifest...",T.identifier.id);const j=await this.z.getManifest(T,y.CancellationToken.None);if(j===null)throw new a.$tp(`Missing manifest for extension ${T.identifier.id}`,a.ExtensionManagementErrorCode.Invalid);if(j.version!==T.version)throw new a.$tp(`Cannot install '${T.identifier.id}' extension because of version mismatch in Marketplace`,a.ExtensionManagementErrorCode.Invalid);return{extension:T,manifest:j}}async O(o,l,p,A){const T=await this.getTargetPlatform();let N=null;return!l&&o.hasPreReleaseVersion&&o.properties.isPreReleaseVersion!==p&&(N=(await this.z.getExtensions([{...o.identifier,preRelease:p}],{targetPlatform:T,compatible:!0,productVersion:A},y.CancellationToken.None))[0]||null),!N&&await this.z.isExtensionCompatible(o,p,T,A)&&(N=o),N||(l?N=(await this.z.getExtensions([{...o.identifier,version:o.version}],{targetPlatform:T,compatible:!0,productVersion:A},y.CancellationToken.None))[0]||null:N=await this.z.getCompatibleExtension(o,p,T,A)),N}async uninstallExtensions(o){const l=(x,Y)=>`${x.identifier.id.toLowerCase()}${Y.versionOnly?`-${x.manifest.version}`:""}@${Y.profileLocation.toString()}`,p=(x,Y)=>{const ne=this.Y(x,Y);return this.m.set(l(ne.extension,Y),ne),this.F.info("Uninstalling extension from the profile:",`${x.identifier.id}@${x.manifest.version}`,Y.profileLocation.toString()),this.t.fire({identifier:x.identifier,profileLocation:Y.profileLocation,applicationScoped:x.isApplicationScoped}),ne},A=(x,Y,ne)=>{ne?this.F.error("Failed to uninstall extension from the profile:",`${x.identifier.id}@${x.manifest.version}`,Y.profileLocation.toString(),ne.message):this.F.info("Successfully uninstalled extension from the profile",`${x.identifier.id}@${x.manifest.version}`,Y.profileLocation.toString()),r(this.C,"extensionGallery:uninstall",{extensionData:(0,$.$Zp)(x),error:ne}),this.u.fire({identifier:x.identifier,error:ne?.code,profileLocation:Y.profileLocation,applicationScoped:x.isApplicationScoped})},T=[],N=[],D=[],j=new g.$Fc;for(const{extension:x,options:Y}of o){const ne={...Y,profileLocation:x.isApplicationScoped?this.H.defaultProfile.extensionsResource:Y?.profileLocation??this.W()},ae=this.m.get(l(x,ne));ae?(this.F.info("Extensions is already requested to uninstall",x.identifier.id),D.push(ae.waitUntilTaskIsFinished())):T.push(p(x,ne))}try{for(const x of T.slice(0)){let Y=j.get(x.options.profileLocation);if(Y||j.set(x.options.profileLocation,Y=await this.getInstalled(S.ExtensionType.User,x.options.profileLocation)),x.options.donotIncludePack)this.F.info("Uninstalling the extension without including packed extension",`${x.extension.identifier.id}@${x.extension.manifest.version}`);else{const ne=this.R(x.extension,Y);for(const ae of ne)this.m.has(l(ae,x.options))?this.F.info("Extensions is already requested to uninstall",ae.identifier.id):T.push(p(ae,x.options))}x.options.donotCheckDependents?this.F.info("Uninstalling the extension without checking dependents",`${x.extension.identifier.id}@${x.extension.manifest.version}`):this.P(T.map(ne=>ne.extension),Y,x.extension)}await this.L(T.map(async x=>{try{if(await x.run(),await this.L(this.y.map(Y=>Y.postUninstall(x.extension,x.options,y.CancellationToken.None))),x.extension.identifier.uuid)try{await this.z.reportStatistic(x.extension.manifest.publisher,x.extension.manifest.name,x.extension.manifest.version,a.StatisticType.Uninstall)}catch{}}catch(Y){const ne=n(Y);throw A(x.extension,x.options,ne),ne}finally{N.push(x)}})),D.length&&await this.L(D);for(const x of T)A(x.extension,x.options)}catch(x){const Y=n(x);for(const ne of T){try{ne.cancel()}catch{}N.includes(ne)||A(ne.extension,ne.options,Y)}throw Y}finally{for(const x of T)this.m.delete(l(x.extension,x.options))||this.F.warn("Uninstallation task is not found in the cache",x.extension.identifier.id)}}P(o,l,p){for(const A of o){const T=this.S(A,l);if(T.length){const N=T.filter(D=>!o.some(j=>(0,$.$Sp)(j.identifier,D.identifier)));if(N.length)throw new Error(this.Q(A,N,p))}}}Q(o,l,p){return p===o?l.length===1?m.localize(1774,null,p.manifest.displayName||p.manifest.name,l[0].manifest.displayName||l[0].manifest.name):l.length===2?m.localize(1775,null,p.manifest.displayName||p.manifest.name,l[0].manifest.displayName||l[0].manifest.name,l[1].manifest.displayName||l[1].manifest.name):m.localize(1776,null,p.manifest.displayName||p.manifest.name,l[0].manifest.displayName||l[0].manifest.name,l[1].manifest.displayName||l[1].manifest.name):l.length===1?m.localize(1777,null,p.manifest.displayName||p.manifest.name,o.manifest.displayName||o.manifest.name,l[0].manifest.displayName||l[0].manifest.name):l.length===2?m.localize(1778,null,p.manifest.displayName||p.manifest.name,o.manifest.displayName||o.manifest.name,l[0].manifest.displayName||l[0].manifest.name,l[1].manifest.displayName||l[1].manifest.name):m.localize(1779,null,p.manifest.displayName||p.manifest.name,o.manifest.displayName||o.manifest.name,l[0].manifest.displayName||l[0].manifest.name,l[1].manifest.displayName||l[1].manifest.name)}R(o,l,p=[]){if(p.indexOf(o)!==-1)return[];p.push(o);const A=o.manifest.extensionPack?o.manifest.extensionPack:[];if(A.length){const T=l.filter(D=>!D.isBuiltin&&A.some(j=>(0,$.$Sp)({id:j},D.identifier))),N=[];for(const D of T)N.push(...this.R(D,l,p));return[...T,...N]}return[]}S(o,l){return l.filter(p=>p.manifest.extensionDependencies&&p.manifest.extensionDependencies.some(A=>(0,$.$Sp)({id:A},o.identifier)))}async U(){try{return this.F.trace("ExtensionManagementService.updateControlCache"),await this.z.getExtensionsControlManifest()}catch(o){return this.F.trace("ExtensionManagementService.refreshControlCache - failed to get extension control manifest",(0,k.$bb)(o)),{malicious:[],deprecated:{},search:[]}}}};e.$Nq=c,e.$Nq=c=Ee([oe(0,a.$rp),oe(1,R.$em),oe(2,w.$Pl),oe(3,v.$fk),oe(4,h.$yk),oe(5,i.$Rl)],c);function n(s,o){if(s instanceof a.$tp)return s;let l;return s instanceof a.$sp?l=new a.$tp(s.message,s.code===a.ExtensionGalleryErrorCode.DownloadFailedWriting?a.ExtensionManagementErrorCode.DownloadFailedWriting:a.ExtensionManagementErrorCode.Gallery):l=new a.$tp(s.message,(0,k.$8)(s)?a.ExtensionManagementErrorCode.Cancelled:o??a.ExtensionManagementErrorCode.Internal),l.stack=s.stack,l}function r(s,o,{extensionData:l,verificationStatus:p,duration:A,error:T,source:N,durationSinceUpdate:D}){let j,x;(0,d.$rg)(p)&&(p===!0?p="Verified":(p===!1||(j=a.ExtensionManagementErrorCode.Signature,x=p),p="Unverified")),T&&(j=T.code,T.code===a.ExtensionManagementErrorCode.Signature&&(x=T.message)),s.publicLog(o,{...l,verificationStatus:p,success:!T,duration:A,errorcode:j,errorcodeDetail:x,durationSinceUpdate:D,source:N})}class t{constructor(){this.d=new I.$Jh}async waitUntilTaskIsFinished(){return await this.d.wait(),this.g}run(){return this.g||(this.g=(0,I.$xh)(o=>this.h(o))),this.d.open(),this.g}cancel(){this.g||(this.g=(0,I.$xh)(o=>new Promise((l,p)=>{const A=o.onCancellationRequested(()=>{A.dispose(),p(new k.$9)})})),this.d.open()),this.g.cancel()}}e.$Pq=t}),define(le[42],he([0,1,8,13,2,5,25,12,20,26,9,10,6,24,23,3,7,18]),function(Q,e,P,I,y,k,C,O,g,u,d,f,m,a,$,S,b,v){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$Sq=e.$Rq=e.$Qq=e.ExtensionsProfileScanningErrorCode=void 0;var h;(function(n){n.ERROR_PROFILE_NOT_FOUND="ERROR_PROFILE_NOT_FOUND",n.ERROR_INVALID_CONTENT="ERROR_INVALID_CONTENT"})(h||(e.ExtensionsProfileScanningErrorCode=h={}));class R extends Error{constructor(r,t){super(r),this.code=t}}e.$Qq=R,e.$Rq=(0,f.$Ki)("IExtensionsProfileScannerService");let w=class extends y.$Zc{constructor(r,t,s,o,l,p){super(),this.j=r,this.m=t,this.n=s,this.r=o,this.s=l,this.t=p,this.b=this.B(new k.$qe),this.onAddExtensions=this.b.event,this.c=this.B(new k.$qe),this.onDidAddExtensions=this.c.event,this.f=this.B(new k.$qe),this.onRemoveExtensions=this.f.event,this.g=this.B(new k.$qe),this.onDidRemoveExtensions=this.g.event,this.h=new C.$Fc}scanProfileExtensions(r,t){return this.u(r,void 0,t)}async addExtensionsToProfile(r,t,s){const o=[],l=[];try{return await this.u(t,p=>{const A=[];if(s)A.push(...p);else for(const T of p)r.some(([N])=>(0,u.$Sp)(N.identifier,T.identifier)&&N.manifest.version!==T.version)?o.push(T):A.push(T);for(const[T,N]of r){const D=A.findIndex(x=>(0,u.$Sp)(x.identifier,T.identifier)&&x.version===T.manifest.version),j={identifier:T.identifier,version:T.manifest.version,location:T.location,metadata:N};D===-1?(l.push(j),A.push(j)):A.splice(D,1,j)}return l.length&&this.b.fire({extensions:l,profileLocation:t}),o.length&&this.f.fire({extensions:o,profileLocation:t}),A}),l.length&&this.c.fire({extensions:l,profileLocation:t}),o.length&&this.g.fire({extensions:o,profileLocation:t}),l}catch(p){throw l.length&&this.c.fire({extensions:l,error:p,profileLocation:t}),o.length&&this.g.fire({extensions:o,error:p,profileLocation:t}),p}}async updateMetadata(r,t){const s=[];return await this.u(t,o=>{const l=[];for(const p of o){const A=r.find(([T])=>(0,u.$Sp)(T.identifier,p.identifier)&&T.manifest.version===p.version);A&&(p.metadata={...p.metadata,...A[1]},s.push(p)),l.push(p)}return l}),s}async removeExtensionFromProfile(r,t){const s=[];try{await this.u(t,o=>{const l=[];for(const p of o)(0,u.$Sp)(p.identifier,r.identifier)?s.push(p):l.push(p);return s.length&&this.f.fire({extensions:s,profileLocation:t}),l}),s.length&&this.g.fire({extensions:s,profileLocation:t})}catch(o){throw s.length&&this.g.fire({extensions:s,error:o,profileLocation:t}),o}}async u(r,t,s){return this.F(r).queue(async()=>{let o=[],l;try{const p=await this.m.readFile(r);l=JSON.parse(p.value.toString().trim()||"[]")}catch(p){if((0,d.$wl)(p)!==d.FileOperationResult.FILE_NOT_FOUND)throw p;if(this.r.extUri.isEqual(r,this.n.defaultProfile.extensionsResource)&&(l=await this.D()),!l&&s?.bailOutWhenFileNotFound)throw new R((0,b.$bb)(p),h.ERROR_PROFILE_NOT_FOUND)}if(l){Array.isArray(l)||this.w(r);let p=!1;for(const A of l){i(A)||this.w(r);let T;if((0,S.$jg)(A.relativeLocation)&&A.relativeLocation)T=this.z(A.relativeLocation);else if((0,S.$jg)(A.location)){this.t.warn(`Extensions profile: Ignoring extension with invalid location: ${A.location}`);continue}else{T=O.URI.revive(A.location);const N=this.y(T);N&&(p=!0,A.relativeLocation=N)}(0,S.$qg)(A.metadata?.hasPreReleaseVersion)&&A.metadata?.preRelease&&(p=!0,A.metadata.hasPreReleaseVersion=!0),o.push({identifier:A.identifier,location:T,version:A.version,metadata:A.metadata})}p&&await this.m.writeFile(r,I.$Se.fromString(JSON.stringify(l)))}if(t){o=t(o);const p=o.map(A=>({identifier:A.identifier,version:A.version,location:A.location.toJSON(),relativeLocation:this.y(A.location),metadata:A.metadata}));await this.m.writeFile(r,I.$Se.fromString(JSON.stringify(p)))}return o})}w(r){const t=new R(`Invalid extensions content in ${r.toString()}`,h.ERROR_INVALID_CONTENT);throw this.s.publicLogError2("extensionsProfileScanningError",{code:t.code}),t}y(r){return this.r.extUri.isEqual(this.r.extUri.dirname(r),this.j)?this.r.extUri.basename(r):void 0}z(r){return this.r.extUri.joinPath(this.j,r)}async D(){return this.C||(this.C=(async()=>{const r=this.r.extUri.joinPath(this.n.defaultProfile.location,"extensions.json"),t=this.r.extUri.joinPath(this.j,".init-default-profile-extensions");let s;try{s=(await this.m.readFile(r)).value.toString()}catch(l){if((0,d.$wl)(l)===d.FileOperationResult.FILE_NOT_FOUND)return;throw l}this.t.info("Migrating extensions from old default profile location",r.toString());let o;try{const l=JSON.parse(s);Array.isArray(l)&&l.every(p=>i(p))?o=l:this.t.warn("Skipping migrating from old default profile locaiton: Found invalid data",l)}catch(l){this.t.error(l)}if(o)try{await this.m.createFile(this.n.defaultProfile.extensionsResource,I.$Se.fromString(JSON.stringify(o)),{overwrite:!1}),this.t.info("Migrated extensions from old default profile location to new location",r.toString(),this.n.defaultProfile.extensionsResource.toString())}catch(l){if((0,d.$wl)(l)===d.FileOperationResult.FILE_MODIFIED_SINCE)this.t.info("Migration from old default profile location to new location is done by another window",r.toString(),this.n.defaultProfile.extensionsResource.toString());else throw l}try{await this.m.del(r)}catch(l){(0,d.$wl)(l)!==d.FileOperationResult.FILE_NOT_FOUND&&this.t.error(l)}try{await this.m.del(t)}catch(l){(0,d.$wl)(l)!==d.FileOperationResult.FILE_NOT_FOUND&&this.t.error(l)}return o})()),this.C}F(r){let t=this.h.get(r);return t||(t=new P.$Rh,this.h.set(r,t)),t}};e.$Sq=w,e.$Sq=w=Ee([oe(1,d.$fl),oe(2,a.$Rl),oe(3,$.$Pl),oe(4,v.$em),oe(5,m.$fk)],w);function i(n){return(0,S.$lg)(n)&&(0,g.$qp)(n.identifier)&&(c(n.location)||(0,S.$jg)(n.location)&&n.location)&&((0,S.$qg)(n.relativeLocation)||(0,S.$jg)(n.relativeLocation))&&n.version&&(0,S.$jg)(n.version)}function c(n){return n?(0,S.$jg)(n.path)&&(0,S.$jg)(n.scheme):!1}});var ze=this&&this.__importDefault||function(Q){return Q&&Q.__esModule?Q:{default:Q}};define(le[54],he([0,1,19,8,27,13,7,34,85,2,14,15,11,16,45,56,3,12,4,17,26,22,44,9,10,6,33,5,48,42,24,23,97]),function(Q,e,P,I,y,k,C,O,g,u,d,f,m,a,$,S,b,v,h,R,w,i,c,n,r,t,s,o,l,p,A,T,N){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$Zq=e.$Xq=e.$Wq=e.$Vq=e.Translations=void 0,e.$Yq=ae,y=be(y),f=be(f),m=be(m),$=be($),S=ze(S);var D;(function(me){function W(_,M){if(_===M)return!0;const U=Object.keys(_),H=new Set;for(const K of Object.keys(M))H.add(K);if(U.length!==H.size)return!1;for(const K of U){if(_[K]!==M[K])return!1;H.delete(K)}return H.size===0}me.equals=W})(D||(e.Translations=D={})),e.$Vq=(0,r.$Ki)("IExtensionsScannerService");let j=class extends u.$Zc{constructor(W,_,M,U,H,K,ie,se,L,V,z,E){super(),this.systemExtensionsLocation=W,this.userExtensionsLocation=_,this.r=M,this.s=U,this.t=H,this.u=K,this.w=ie,this.y=se,this.z=L,this.C=V,this.D=z,this.F=E,this.g=this.B(new o.$qe),this.onDidChangeCache=this.g.event,this.h=(0,a.$lh)(this.userExtensionsLocation,".obsolete"),this.j=this.B(this.F.createInstance(ne,this.s,this.h)),this.m=this.B(this.F.createInstance(ne,this.s,this.h)),this.n=this.B(this.F.createInstance(Y,this.h)),this.H=void 0,this.B(this.j.onDidChangeCache(()=>this.g.fire(i.ExtensionType.System))),this.B(this.m.onDidChangeCache(()=>this.g.fire(i.ExtensionType.User)))}getTargetPlatform(){return this.G||(this.G=(0,w.$4p)(this.w,this.y)),this.G}async scanAllExtensions(W,_,M){const[U,H]=await Promise.all([this.scanSystemExtensions(W),this.scanUserExtensions(_)]),K=M?await this.scanExtensionsUnderDevelopment(W,[...U,...H]):[];return this.L(U,H,K,await this.getTargetPlatform(),!0)}async scanSystemExtensions(W){const _=[];_.push(this.M(!!W.useCache,W.language)),_.push(this.N(W.language,!!W.checkControlFile));const[M,U]=await Promise.all(_);return this.J([...M,...U],i.ExtensionType.System,W,!1)}async scanUserExtensions(W){const _=W.profileLocation??this.userExtensionsLocation;this.y.trace("Started scanning user extensions",_);const M=this.D.extUri.isEqual(W.profileLocation,this.t.defaultProfile.extensionsResource)?{bailOutWhenFileNotFound:!0}:void 0,U=await this.P(_,!!W.profileLocation,i.ExtensionType.User,!W.includeUninstalled,W.language,!0,M,W.productVersion??this.R()),H=W.useCache&&!U.devMode&&U.excludeObsolete?this.m:this.n;let K;try{K=await H.scanExtensions(U)}catch(ie){if(ie instanceof p.$Qq&&ie.code===p.ExtensionsProfileScanningErrorCode.ERROR_PROFILE_NOT_FOUND)await this.I(),K=await H.scanExtensions(U);else throw ie}return K=await this.J(K,i.ExtensionType.User,W,!0),this.y.trace("Scanned user extensions:",K.length),K}async scanExtensionsUnderDevelopment(W,_){if(this.z.isExtensionDevelopment&&this.z.extensionDevelopmentLocationURI){const M=(await Promise.all(this.z.extensionDevelopmentLocationURI.filter(U=>U.scheme===d.Schemas.file).map(async U=>{const H=await this.P(U,!1,i.ExtensionType.User,!0,W.language,!1,void 0,W.productVersion??this.R());return(await this.n.scanOneOrMultipleExtensions(H)).map(ie=>(ie.type=_.find(se=>(0,w.$Sp)(se.identifier,ie.identifier))?.type??ie.type,this.n.validate(ie,H)))}))).flat();return this.J(M,"development",W,!0)}return[]}async scanExistingExtension(W,_,M){const U=await this.P(W,!1,_,!0,M.language,!0,void 0,M.productVersion??this.R()),H=await this.n.scanExtension(U);return!H||!M.includeInvalid&&!H.isValid?null:H}async scanOneOrMultipleExtensions(W,_,M){const U=await this.P(W,!1,_,!0,M.language,!0,void 0,M.productVersion??this.R()),H=await this.n.scanOneOrMultipleExtensions(U);return this.J(H,_,M,!0)}async scanMultipleExtensions(W,_,M){const U=[];return await Promise.all(W.map(async H=>{const K=await this.scanOneOrMultipleExtensions(H,_,M);U.push(...K)})),this.J(U,_,M,!0)}async scanMetadata(W){const _=(0,a.$lh)(W,"package.json"),M=(await this.w.readFile(_)).value.toString();return JSON.parse(M).__metadata}async updateMetadata(W,_){const M=(0,a.$lh)(W,"package.json"),U=(await this.w.readFile(M)).value.toString(),H=JSON.parse(U);_.isMachineScoped===!1&&delete _.isMachineScoped,_.isBuiltin===!1&&delete _.isBuiltin,H.__metadata={...H.__metadata,..._},await this.w.writeFile((0,a.$lh)(W,"package.json"),k.$Se.fromString(JSON.stringify(H,null,"	")))}async initializeDefaultProfileExtensions(){try{await this.u.scanProfileExtensions(this.t.defaultProfile.extensionsResource,{bailOutWhenFileNotFound:!0})}catch(W){if(W instanceof p.$Qq&&W.code===p.ExtensionsProfileScanningErrorCode.ERROR_PROFILE_NOT_FOUND)await this.I();else throw W}}async I(){return this.H||(this.H=(async()=>{try{this.y.info("Started initializing default profile extensions in extensions installation folder.",this.userExtensionsLocation.toString());const W=await this.scanUserExtensions({includeInvalid:!0});if(W.length)await this.u.addExtensionsToProfile(W.map(_=>[_,_.metadata]),this.t.defaultProfile.extensionsResource);else try{await this.w.createFile(this.t.defaultProfile.extensionsResource,k.$Se.fromString(JSON.stringify([])))}catch(_){(0,n.$wl)(_)!==n.FileOperationResult.FILE_NOT_FOUND&&this.y.warn("Failed to create default profile extensions manifest in extensions installation folder.",this.userExtensionsLocation.toString(),(0,C.$bb)(_))}this.y.info("Completed initializing default profile extensions in extensions installation folder.",this.userExtensionsLocation.toString())}catch(W){this.y.error(W)}finally{this.H=void 0}})()),this.H}async J(W,_,M,U){return M.includeAllVersions||(W=this.L(_===i.ExtensionType.System?W:void 0,_===i.ExtensionType.User?W:void 0,_==="development"?W:void 0,await this.getTargetPlatform(),U)),M.includeInvalid||(W=W.filter(H=>H.isValid)),W.sort((H,K)=>{const ie=f.$sc(H.location.fsPath),se=f.$sc(K.location.fsPath);return ie<se?-1:ie>se?1:0})}L(W,_,M,U,H){const K=(se,L,V)=>{if(se.isValid&&!L.isValid)return!1;if(se.isValid===L.isValid){if(H&&$.gt(se.manifest.version,L.manifest.version))return this.y.debug(`Skipping extension ${L.location.path} with lower version ${L.manifest.version} in favour of ${se.location.path} with version ${se.manifest.version}`),!1;if($.eq(se.manifest.version,L.manifest.version)){if(se.type===i.ExtensionType.System)return this.y.debug(`Skipping extension ${L.location.path} in favour of system extension ${se.location.path} with same version`),!1;if(se.targetPlatform===U)return this.y.debug(`Skipping extension ${L.location.path} from different target platform ${L.targetPlatform}`),!1}}return V?this.y.warn(`Overwriting user extension ${se.location.path} with ${L.location.path}.`):this.y.debug(`Overwriting user extension ${se.location.path} with ${L.location.path}.`),!0},ie=new i.$zn;return W?.forEach(se=>{const L=ie.get(se.identifier.id);(!L||K(L,se,!1))&&ie.set(se.identifier.id,se)}),_?.forEach(se=>{const L=ie.get(se.identifier.id);if(!L&&W&&se.type===i.ExtensionType.System){this.y.debug(`Skipping obsolete system extension ${se.location.path}.`);return}(!L||K(L,se,!1))&&ie.set(se.identifier.id,se)}),M?.forEach(se=>{const L=ie.get(se.identifier.id);(!L||K(L,se,!0))&&ie.set(se.identifier.id,se),ie.set(se.identifier.id,se)}),[...ie.values()]}async M(W,_){this.y.trace("Started scanning system extensions");const M=await this.P(this.systemExtensionsLocation,!1,i.ExtensionType.System,!0,_,!0,void 0,this.R()),H=await(W&&!M.devMode?this.j:this.n).scanExtensions(M);return this.y.trace("Scanned system extensions:",H.length),H}async N(W,_){const M=this.z.isBuilt?[]:this.C.builtInExtensions;if(!M?.length)return[];this.y.trace("Started scanning dev system extensions");const U=_?await this.O():{},H=[],K=v.URI.file(f.$mc(f.$oc(d.$5g.asFileUri("").fsPath,"..",".build","builtInExtensions")));for(const se of M){const L=U[se.name]||"marketplace";switch(L){case"disabled":break;case"marketplace":H.push((0,a.$lh)(K,se.name));break;default:H.push(v.URI.file(L));break}}const ie=await Promise.all(H.map(async se=>this.n.scanExtension(await this.P(se,!1,i.ExtensionType.System,!0,W,!0,void 0,this.R()))));return this.y.trace("Scanned dev system extensions:",ie.length),(0,P.$Lb)(ie)}async O(){try{const W=await this.w.readFile(this.r);return JSON.parse(W.value.toString())}catch{return{}}}async P(W,_,M,U,H,K,ie,se){const L=await this.f(H??m.$z),V=await this.Q(W),z=_&&!this.D.extUri.isEqual(W,this.t.defaultProfile.extensionsResource)?this.t.defaultProfile.extensionsResource:void 0,E=z?await this.Q(z):void 0;return new x(W,V,z,E,_,ie,M,U,K,se.version,se.date,this.C.commit,!this.z.isBuilt,H,L)}async Q(W){try{const _=await this.w.stat(W);if(typeof _.mtime=="number")return _.mtime}catch{}}R(){return{version:this.C.version,date:this.C.date}}};e.$Wq=j,e.$Wq=j=Ee([oe(4,A.$Rl),oe(5,p.$Rq),oe(6,n.$fl),oe(7,t.$fk),oe(8,R.$Ri),oe(9,s.$yk),oe(10,T.$Pl),oe(11,r.$Ji)],j);class x{constructor(W,_,M,U,H,K,ie,se,L,V,z,E,F,J,Z){this.location=W,this.mtime=_,this.applicationExtensionslocation=M,this.applicationExtensionslocationMtime=U,this.profile=H,this.profileScanOptions=K,this.type=ie,this.excludeObsolete=se,this.validate=L,this.productVersion=V,this.productDate=z,this.productCommit=E,this.devMode=F,this.language=J,this.translations=Z}static createNlsConfiguration(W){return{language:W.language,pseudo:W.language==="pseudo",devMode:W.devMode,translations:W.translations}}static equals(W,_){return(0,a.$eh)(W.location,_.location)&&W.mtime===_.mtime&&(0,a.$eh)(W.applicationExtensionslocation,_.applicationExtensionslocation)&&W.applicationExtensionslocationMtime===_.applicationExtensionslocationMtime&&W.profile===_.profile&&y.$oo(W.profileScanOptions,_.profileScanOptions)&&W.type===_.type&&W.excludeObsolete===_.excludeObsolete&&W.validate===_.validate&&W.productVersion===_.productVersion&&W.productDate===_.productDate&&W.productCommit===_.productCommit&&W.devMode===_.devMode&&W.language===_.language&&D.equals(W.translations,_.translations)}}e.$Xq=x;let Y=class extends u.$Zc{constructor(W,_,M,U,H,K,ie){super(),this.g=W,this.h=_,this.j=M,this.m=U,this.n=K,this.r=ie,this.f=H.extensionsEnabledWithApiProposalVersion?.map(se=>se.toLowerCase())??[]}async scanExtensions(W){const _=W.profile?await this.t(W):await this.s(W);let M={};if(W.excludeObsolete&&W.type===i.ExtensionType.User)try{const U=(await this.m.readFile(this.g)).value.toString();M=JSON.parse(U)}catch{}return(0,b.$wg)(M)?_:_.filter(U=>!M[w.$Tp.create(U).toString()])}async s(W){const _=await this.m.resolve(W.location);if(!_.children?.length)return[];const M=await Promise.all(_.children.map(async U=>{if(!U.isDirectory||W.type===i.ExtensionType.User&&(0,a.$ih)(U.resource).indexOf(".")===0)return null;const H=new x(U.resource,W.mtime,W.applicationExtensionslocation,W.applicationExtensionslocationMtime,W.profile,W.profileScanOptions,W.type,W.excludeObsolete,W.validate,W.productVersion,W.productDate,W.productCommit,W.devMode,W.language,W.translations);return this.scanExtension(H)}));return(0,P.$Lb)(M).sort((U,H)=>U.location.path<H.location.path?-1:1)}async t(W){let _=await this.u(W.location,()=>!0,W);if(W.applicationExtensionslocation&&!this.j.extUri.isEqual(W.location,W.applicationExtensionslocation)){_=_.filter(U=>!U.metadata?.isApplicationScoped);const M=await this.u(W.applicationExtensionslocation,U=>!!U.metadata?.isBuiltin||!!U.metadata?.isApplicationScoped,W);_.push(...M)}return _}async u(W,_,M){const U=await this.h.scanProfileExtensions(W,M.profileScanOptions);if(!U.length)return[];const H=await Promise.all(U.map(async K=>{if(_(K)){const ie=new x(K.location,M.mtime,M.applicationExtensionslocation,M.applicationExtensionslocationMtime,M.profile,M.profileScanOptions,M.type,M.excludeObsolete,M.validate,M.productVersion,M.productDate,M.productCommit,M.devMode,M.language,M.translations);return this.scanExtension(ie,K.metadata)}return null}));return(0,P.$Lb)(H)}async scanOneOrMultipleExtensions(W){try{if(await this.m.exists((0,a.$lh)(W.location,"package.json"))){const _=await this.scanExtension(W);return _?[_]:[]}else return await this.scanExtensions(W)}catch(_){return this.r.error(`Error scanning extensions at ${W.location.path}:`,(0,C.$bb)(_)),[]}}async scanExtension(W,_){try{let M=await this.w(W.location);if(M){M.publisher||(M.publisher=i.$tn),_=_??M.__metadata,delete M.__metadata;const U=(0,w.$Xp)(M.publisher,M.name),H=_?.id?{id:U,uuid:_.id}:{id:U},K=_?.isSystem?i.ExtensionType.System:W.type,ie=K===i.ExtensionType.System||!!_?.isBuiltin;M=await this.y(W.location,M,x.createNlsConfiguration(W));let se={type:K,identifier:H,manifest:M,location:W.location,isBuiltin:ie,targetPlatform:_?.targetPlatform??i.TargetPlatform.UNDEFINED,publisherDisplayName:_?.publisherDisplayName,metadata:_,isValid:!0,validations:[]};return W.validate&&(se=this.validate(se,W)),M.enabledApiProposals&&(!this.n.isBuilt||this.f.includes(U.toLowerCase()))&&(M.originalEnabledApiProposals=M.enabledApiProposals,M.enabledApiProposals=(0,i.$Fn)([...M.enabledApiProposals])),se}}catch(M){W.type!==i.ExtensionType.System&&this.r.error(M)}return null}validate(W,_){let M=!0;const U=this.n.isBuilt&&this.f.includes(W.identifier.id.toLowerCase()),H=(0,c.$0p)(_.productVersion,_.productDate,_.location,W.manifest,W.isBuiltin,U);for(const[K,ie]of H)K===S.default.Error&&(M=!1,this.r.error(this.F(_.location,ie)));return W.isValid=M,W.validations=H,W}async w(W){const _=(0,a.$lh)(W,"package.json");let M;try{M=(await this.m.readFile(_)).value.toString()}catch(H){return(0,n.$wl)(H)!==n.FileOperationResult.FILE_NOT_FOUND&&this.r.error(this.F(W,(0,h.localize)(1815,null,_.path,H.message))),null}let U;try{U=JSON.parse(M)}catch{const K=[];(0,O.$5n)(M,K);for(const ie of K)this.r.error(this.F(W,(0,h.localize)(1816,null,_.path,ie.offset,ie.length,(0,g.$Tq)(ie.error))));return null}return(0,O.$ao)(U)!=="object"?(this.r.error(this.F(W,(0,h.localize)(1817,null,_.path))),null):U}async y(W,_,M){const U=await this.z(W,_,M);if(U)try{const H=[],K=await this.C(U.default,H);if(H.length>0)return H.forEach(se=>{this.r.error(this.F(W,(0,h.localize)(1818,null,U.default?.path,(0,g.$Tq)(se.error))))}),_;if((0,O.$ao)(U)!=="object")return this.r.error(this.F(W,(0,h.localize)(1819,null,U.default?.path))),_;const ie=U.values||Object.create(null);return(0,N.$Uq)(this.r,_,ie,K)}catch{}return _}async z(W,_,M){const U=(0,a.$lh)(W,"package.nls.json"),H=(L,V)=>{V.forEach(z=>{this.r.error(this.F(W,(0,h.localize)(1820,null,L?.path,(0,g.$Tq)(z.error))))})},K=L=>{this.r.error(this.F(W,(0,h.localize)(1821,null,L?.path)))},ie=`${_.publisher}.${_.name}`,se=M.translations[ie];if(se)try{const L=v.URI.file(se),V=(await this.m.readFile(L)).value.toString(),z=[],E=(0,O.$5n)(V,z);return z.length>0?(H(L,z),{values:void 0,default:U}):(0,O.$ao)(E)!=="object"?(K(L),{values:void 0,default:U}):{values:E.contents?E.contents.package:void 0,default:U}}catch{return{values:void 0,default:U}}else{if(!await this.m.exists(U))return;let V;try{V=await this.D(W,M)}catch{return}if(!V.localized)return{values:void 0,default:V.original};try{const z=(await this.m.readFile(V.localized)).value.toString(),E=[],F=(0,O.$5n)(z,E);return E.length>0?(H(V.localized,E),{values:void 0,default:V.original}):(0,O.$ao)(F)!=="object"?(K(V.localized),{values:void 0,default:V.original}):{values:F,default:V.original}}catch{return{values:void 0,default:V.original}}}}async C(W,_){if(W)try{const M=(await this.m.readFile(W)).value.toString();return(0,O.$5n)(M,_)}catch{}}D(W,_){return new Promise((M,U)=>{const H=K=>{const ie=(0,a.$lh)(W,`package.nls.${K}.json`);this.m.exists(ie).then(se=>{se&&M({localized:ie,original:(0,a.$lh)(W,"package.nls.json")});const L=K.lastIndexOf("-");L===-1?M({localized:(0,a.$lh)(W,"package.nls.json"),original:null}):(K=K.substring(0,L),H(K))})};if(_.devMode||_.pseudo||!_.language)return M({localized:(0,a.$lh)(W,"package.nls.json"),original:null});H(_.language)})}F(W,_){return`[${W.path}]: ${_}`}};Y=Ee([oe(1,p.$Rq),oe(2,T.$Pl),oe(3,n.$fl),oe(4,s.$yk),oe(5,R.$Ri),oe(6,t.$fk)],Y);let ne=class extends Y{constructor(W,_,M,U,H,K,ie,se,L){super(_,U,H,K,ie,se,L),this.J=W,this.L=M,this.H=this.B(new I.$Ih(3e3)),this.I=this.B(new o.$qe),this.onDidChangeCache=this.I.event}async scanExtensions(W){const _=this.P(W),M=await this.M(_);if(this.G=W,M&&M.input&&x.equals(M.input,this.G))return this.r.debug("Using cached extensions scan result",W.type===i.ExtensionType.System?"system":"user",W.location.toString()),this.H.trigger(()=>this.O()),M.result.map(H=>(H.location=v.URI.revive(H.location),H));const U=await super.scanExtensions(W);return await this.N(_,{input:W,result:U}),U}async M(W){try{const _=await this.m.readFile(W),M=JSON.parse(_.value.toString());return{result:M.result,input:(0,l.$hi)(M.input)}}catch(_){this.r.debug("Error while reading the extension cache file:",W.path,(0,C.$bb)(_))}return null}async N(W,_){try{await this.m.writeFile(W,k.$Se.fromString(JSON.stringify(_)))}catch(M){this.r.debug("Error while writing the extension cache file:",W.path,(0,C.$bb)(M))}}async O(){if(!this.G)return;const W=this.P(this.G),_=await this.M(W);if(!_)return;const M=_.result,U=JSON.parse(JSON.stringify(await super.scanExtensions(this.G)));if(!y.$oo(U,M))try{this.r.info("Invalidating Cache",M,U),await this.m.del(W),this.I.fire()}catch(H){this.r.error(H)}}P(W){const _=this.Q(W);return this.j.extUri.joinPath(_.cacheHome,W.type===i.ExtensionType.System?i.$sn:i.$rn)}Q(W){return W.type===i.ExtensionType.System?this.L.defaultProfile:W.profile?this.j.extUri.isEqual(W.location,this.J.extensionsResource)?this.J:this.L.profiles.find(_=>this.j.extUri.isEqual(W.location,_.extensionsResource))??this.J:this.L.defaultProfile}};ne=Ee([oe(2,A.$Rl),oe(3,p.$Rq),oe(4,T.$Pl),oe(5,n.$fl),oe(6,s.$yk),oe(7,R.$Ri),oe(8,t.$fk)],ne);function ae(me,W){const _=(0,w.$Vp)(me.manifest.publisher,me.manifest.name);return{id:_,identifier:new i.$xn(_),isBuiltin:me.type===i.ExtensionType.System,isUserBuiltin:me.type===i.ExtensionType.User&&me.isBuiltin,isUnderDevelopment:W,extensionLocation:me.location,uuid:me.identifier.uuid,targetPlatform:me.targetPlatform,publisherDisplayName:me.publisherDisplayName,...me.manifest}}class ue extends j{constructor(W,_,M,U,H,K,ie,se,L,V,z,E){super(W,_,(0,a.$lh)(M,".vscode-oss-dev","extensions","control.json"),U,H,K,ie,se,L,V,z,E),this.S=(async()=>{if(m.$C)try{const F=await this.w.readFile(v.URI.file(m.$C));return JSON.parse(F.value.toString())}catch{}return Object.create(null)})()}f(W){return this.S}}e.$Zq=ue}),define(le[137],he([0,1,61,8,38,5,2,14,15,29,6,24]),function(Q,e,P,I,y,k,C,O,g,u,d,f){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$4q=void 0;let m=class extends C.$Zc{constructor($,S){super(),this.b=$,this.f=S,this.a=new I.$Qh(5)}async postUninstall($){const S=this.g($,"uninstall");S&&(this.f.info($.identifier.id,$.manifest.version,"Running post uninstall script"),await this.a.queue(async()=>{try{await this.h(S.script,"uninstall",S.args,!0,$),this.f.info("Finished running post uninstall script",$.identifier.id,$.manifest.version)}catch(b){this.f.error("Failed to run post uninstall script",$.identifier.id,$.manifest.version),this.f.error(b)}}));try{await u.Promises.rm(this.m($))}catch(b){this.f.error("Error while removing extension storage path",$.identifier.id),this.f.error(b)}}g($,S){const b=`vscode:${S}`;if($.location.scheme===O.Schemas.file&&$.manifest&&$.manifest.scripts&&typeof $.manifest.scripts[b]=="string"){const v=$.manifest.scripts[b].split(" ");return v.length<2||v[0]!=="node"||!v[1]?(this.f.warn($.identifier.id,$.manifest.version,`${b} should be a node script`),null):{script:(0,g.$oc)($.location.fsPath,v[1]),args:v.slice(2)||[]}}return null}h($,S,b,v,h){return new Promise((R,w)=>{const i=this.j($,S,b,h);let c;const n=r=>{c&&(clearTimeout(c),c=null),r?w(r):R(void 0)};i.on("error",r=>{n((0,y.$vj)(r)||"Unknown")}),i.on("exit",(r,t)=>{n(r?`post-${S} process exited with code ${r}`:void 0)}),v&&(c=setTimeout(()=>{c=null,i.kill(),w("timed out")},5e3))})}j($,S,b,v){const h={silent:!0,execArgv:void 0},R=(0,P.fork)($,[`--type=extension-post-${S}`,...b],h);R.stdout.setEncoding("utf8"),R.stderr.setEncoding("utf8");const w=k.Event.fromNodeEventEmitter(R.stdout,"data"),i=k.Event.fromNodeEventEmitter(R.stderr,"data");this.B(w(r=>this.f.info(v.identifier.id,v.manifest.version,`post-${S}`,r))),this.B(i(r=>this.f.error(v.identifier.id,v.manifest.version,`post-${S}`,r)));const c=k.Event.any(k.Event.map(w,r=>({data:`%c${r}`,format:[""]}),this.q),k.Event.map(i,r=>({data:`%c${r}`,format:["color: red"]}),this.q));return k.Event.debounce(c,(r,t)=>r?{data:r.data+t.data,format:[...r.format,...t.format]}:{data:t.data,format:t.format},100,void 0,void 0,void 0,this.q)(r=>{console.group(v.identifier.id),console.log(r.data,...r.format),console.groupEnd()}),R}m($){return(0,g.$oc)(this.b.defaultProfile.globalStorageHome.fsPath,$.identifier.id.toLowerCase())}};e.$4q=m,e.$4q=m=Ee([oe(0,f.$Rl),oe(1,d.$fk)],m)}),define(le[73],he([0,1,50,4,53,20]),function(Q,e,P,I,y,k){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$1q=C,e.$2q=O;function C(g){let u=k.ExtensionManagementErrorCode.Extract;return g instanceof P.$Jq&&(g.type==="CorruptZip"?u=k.ExtensionManagementErrorCode.CorruptZip:g.type==="Incomplete"&&(u=k.ExtensionManagementErrorCode.IncompleteZip)),(0,y.$Oq)(g,u)}async function O(g){let u;try{u=await(0,P.$Mq)(g,"extension/package.json")}catch(d){throw C(d)}try{return JSON.parse(u.toString("utf8"))}catch{throw new k.$tp((0,I.localize)(1831,null),k.ExtensionManagementErrorCode.Invalid)}}}),define(le[138],he([0,1,8,7,2,14,16,45,3,28,29,50,30,17,53,20,26,73,72,9,6,18]),function(Q,e,P,I,y,k,C,O,g,u,d,f,m,a,$,S,b,v,h,R,w,i){"use strict";var c;Object.defineProperty(e,"__esModule",{value:!0}),e.$3q=void 0,O=be(O);let n=class extends y.$Zc{static{c=this}static{this.c=".sigzip"}constructor(t,s,o,l,p,A,T){super(),this.h=s,this.j=o,this.m=l,this.n=p,this.r=A,this.t=T,this.extensionsDownloadDir=t.extensionsDownloadLocation,this.f=20,this.g=this.F()}async download(t,s,o,l){await this.g;const p=await this.w(t,s);let A=!1;if(o&&this.u(t)){let T;try{T=await this.y(t)}catch(N){try{await this.delete(p)}catch(D){this.t.error(D)}throw N}try{A=await this.n.verify(t,p.fsPath,T.fsPath,l)}catch(N){if(A=N.code,A===h.ExtensionSignatureVerificationCode.PackageIsInvalidZip||A===h.ExtensionSignatureVerificationCode.SignatureArchiveIsInvalidZip){try{await this.delete(p)}catch(D){this.t.error(D)}throw new S.$tp(f.$Iq,S.ExtensionManagementErrorCode.CorruptZip)}}finally{try{await this.delete(T)}catch(N){this.t.error(N)}}}return{location:p,verificationStatus:A}}u(t){if(!t.isSigned)return this.t.info(`Extension is not signed: ${t.identifier.id}`),!1;const s=this.m.getValue("extensions.verifySignature");return(0,g.$pg)(s)?s:!0}async w(t,s){try{const o=(0,C.$lh)(this.extensionsDownloadDir,this.G(t)),l=await this.C(t,"vsix",async()=>{await this.z(t,o,p=>this.j.download(t,p,s));try{await this.D(o.fsPath,"extension/package.json")}catch(p){try{await this.h.del(o)}catch(A){this.t.warn(`Error while deleting: ${o.path}`,(0,I.$bb)(A))}throw p}},2);return l>1&&this.r.publicLog2("extensiongallery:downloadvsix:retry",{extensionId:t.identifier.id,attempts:l}),o}catch(o){throw(0,$.$Oq)(o,S.ExtensionManagementErrorCode.Download)}}async y(t){try{const s=(0,C.$lh)(this.extensionsDownloadDir,`.${(0,u.$7g)()}`),o=await this.C(t,"sigzip",async()=>{await this.j.downloadSignatureArchive(t,s);try{await this.D(s.fsPath,".signature.p7s")}catch(l){try{await this.h.del(s)}catch(p){this.t.warn(`Error while deleting: ${s.path}`,(0,I.$bb)(p))}throw l}},2);return o>1&&this.r.publicLog2("extensiongallery:downloadsigzip:retry",{extensionId:t.identifier.id,attempts:o}),s}catch(s){throw(0,$.$Oq)(s,S.ExtensionManagementErrorCode.DownloadSignature)}}async z(t,s,o){if(await this.h.exists(s))return;if(s.scheme!==k.Schemas.file){await o(s);return}const l=(0,C.$lh)(this.extensionsDownloadDir,`.${(0,u.$7g)()}`);try{await o(l)}catch(p){try{await this.h.del(l)}catch{}throw p}try{await d.Promises.rename(l.fsPath,s.fsPath,2*60*1e3)}catch(p){try{await this.h.del(l)}catch{}let A=!1;try{A=await this.h.exists(s)}catch{}if(A)this.t.info("Rename failed because the file was downloaded by another source. So ignoring renaming.",t.identifier.id,s.path);else throw this.t.info(`Rename failed because of ${(0,I.$bb)(p)}. Deleted the file from downloaded location`,l.path),p}}async C(t,s,o,l){let p=1;for(;;)try{return await o(),p}catch(A){if(p++>l)throw A;this.t.warn(`Failed downloading ${s}. ${(0,I.$bb)(A)}. Retry again...`,t.identifier.id)}}async D(t,s){try{await(0,f.$Mq)(t,s)}catch(o){throw(0,v.$1q)(o)}}async delete(t){await this.g,await this.h.del(t)}async F(){try{if(!await this.h.exists(this.extensionsDownloadDir)){this.t.trace("Extension VSIX downloads cache dir does not exist");return}const t=await this.h.resolve(this.extensionsDownloadDir,{resolveMetadata:!0});if(t.children){const s=[],o=[],l=[];for(const T of t.children)if(T.name.endsWith(c.c))l.push(T.resource);else{const N=b.$Tp.parse(T.name);N&&o.push([N,T])}const p=(0,b.$Yp)(o,([T])=>T),A=[];for(const T of p)T.sort((N,D)=>O.rcompare(N[0].version,D[0].version)),s.push(...T.slice(1).map(N=>N[1].resource)),A.push(T[0][1]);A.sort((T,N)=>T.mtime-N.mtime),s.push(...A.slice(0,Math.max(0,A.length-this.f)).map(T=>T.resource)),s.push(...l),await P.Promises.settled(s.map(T=>(this.t.trace("Deleting from cache",T.path),this.h.del(T))))}}catch(t){this.t.error(t)}}G(t){return this.f?b.$Tp.create(t).toString().toLowerCase():(0,u.$7g)()}};e.$3q=n,e.$3q=n=c=Ee([oe(0,a.$Si),oe(1,R.$fl),oe(2,S.$rp),oe(3,m.$ej),oe(4,h.$Bq),oe(5,i.$em),oe(6,w.$fk)],n)}),define(le[139],he([0,1,32,8,13,21,38,7,5,43,2,25,14,15,16,45,3,12,28,29,50,4,62,17,53,20,26,42,54,138,137,73,119,126,22,44,9,10,6,33,18,23,24]),function(Q,e,P,I,y,k,C,O,g,u,d,f,m,a,$,S,b,v,h,R,w,i,c,n,r,t,s,o,l,p,A,T,N,D,j,x,Y,ne,ae,ue,me,W,_){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$9q=e.$8q=e.$7q=void 0,P=be(P),a=be(a),S=be(S),R=be(R),i=be(i),e.$7q=(0,ne.$Li)(t.$up);const M=".vsctmp";let U=class extends r.$Nq{constructor(L,V,z,E,F,J,Z,G,q,X,re,ce){super(L,V,re,z,X,ce),this.db=F,this.eb=J,this.fb=Z,this.gb=G,this.hb=q,this.cb=new Map,this.sb=new f.$Gc;const fe=this.B(G.createInstance(A.$4q));this.$=this.B(G.createInstance(H,de=>fe.postUninstall(de))),this.ab=this.B(new N.$5q(ce,q,re,this,this.F)),this.bb=this.B(G.createInstance(p.$3q));const we=this.B(new D.$6q(this,this.db,ce,J,re,q,z));this.B(we.onDidChangeExtensionsByAnotherSource(de=>this.rb(de))),this.tb()}getTargetPlatform(){return this.ib||(this.ib=(0,s.$4p)(this.hb,this.F)),this.ib}async zip(L){this.F.trace("ExtensionManagementService#zip",L.identifier.id);const V=await this.qb(L),z=await(0,w.zip)((0,$.$lh)(this.bb.extensionsDownloadDir,(0,h.$7g)()).fsPath,V);return v.URI.file(z)}async getManifest(L){const{location:V,cleanup:z}=await this.kb(L),E=a.$pc(V.fsPath);try{return await(0,T.$2q)(E)}finally{await z()}}getInstalled(L,V=this.H.defaultProfile.extensionsResource,z={version:this.G.version,date:this.G.date}){return this.$.scanExtensions(L??null,V,z)}scanAllUserInstalledExtensions(){return this.$.scanAllUserExtensions(!1)}scanInstalledExtensionAtLocation(L){return this.$.scanUserExtensionAtLocation(L)}async install(L,V={}){this.F.trace("ExtensionManagementService#install",L.toString());const{location:z,cleanup:E}=await this.kb(L);try{const F=await(0,T.$2q)(a.$pc(z.fsPath)),J=(0,s.$Xp)(F.publisher,F.name);if(F.engines&&F.engines.vscode&&!(0,x.$_p)(F.engines.vscode,this.G.version,this.G.date))throw new Error(i.localize(1822,null,J,this.G.version));const G=(await this.I([{manifest:F,extension:z,options:V}])).find(({identifier:q})=>(0,s.$Sp)(q,{id:J}));if(G?.local)return G.local;throw G?.error?G.error:(0,r.$Oq)(new Error(`Unknown error while installing extension ${J}`))}finally{await E()}}async installFromLocation(L,V){this.F.trace("ExtensionManagementService#installFromLocation",L.toString());const z=await this.$.scanUserExtensionAtLocation(L);if(!z||!z.manifest.name||!z.manifest.version)throw new Error(`Cannot find a valid extension from the location ${L.toString()}`);return await this.vb([[z,{source:"resource"}]],V),this.F.info("Successfully installed extension",z.identifier.id,V.toString()),z}async installExtensionsFromProfile(L,V,z){this.F.trace("ExtensionManagementService#installExtensionsFromProfile",L,V.toString(),z.toString());const E=(await this.getInstalled(j.ExtensionType.User,V)).filter(F=>L.some(J=>(0,s.$Sp)(J,F.identifier)));if(E.length){const F=await Promise.all(E.map(J=>this.$.scanMetadata(J,V)));await this.vb(E.map((J,Z)=>[J,F[Z]]),z),this.F.info("Successfully installed extensions",E.map(J=>J.identifier.id),z.toString())}return E}async updateMetadata(L,V,z){return this.F.trace("ExtensionManagementService#updateMetadata",L.identifier.id),V.isPreReleaseVersion&&(V.preRelease=!0,V.hasPreReleaseVersion=!0),V.isMachineScoped===!1&&(V.isMachineScoped=void 0),V.isBuiltin===!1&&(V.isBuiltin=void 0),V.pinned===!1&&(V.pinned=void 0),L=await this.$.updateMetadata(L,V,z),this.ab.invalidate(z),this.w.fire({local:L,profileLocation:z}),L}async reinstallFromGallery(L){if(this.F.trace("ExtensionManagementService#reinstallFromGallery",L.identifier.id),!this.z.isEnabled())throw new Error(i.localize(1823,null));const V=await this.getTargetPlatform(),[z]=await this.z.getExtensions([{...L.identifier,preRelease:L.preRelease}],{targetPlatform:V,compatible:!0},k.CancellationToken.None);if(!z)throw new Error(i.localize(1824,null));await this.$.setUninstalled(L);try{await this.$.removeUninstalledExtension(L)}catch(E){throw new Error(i.localize(1825,null,(0,C.$vj)(E)))}return this.installFromGallery(z)}Z(L,V,z,E){return this.$.copyExtension(L,V,z,E)}copyExtensions(L,V){return this.$.copyExtensions(L,V,{version:this.G.version,date:this.G.date})}markAsUninstalled(...L){return this.$.setUninstalled(...L)}async cleanUp(){this.F.trace("ExtensionManagementService#cleanUp");try{await this.$.cleanUp()}catch(L){this.F.error(L)}}async download(L,V,z){const{location:E}=await this.bb.download(L,V,!z);return E}async kb(L){if(L.scheme===m.Schemas.file)return{location:L,async cleanup(){}};this.F.trace("Downloading extension from",L.toString());const V=(0,$.$lh)(this.bb.extensionsDownloadDir,(0,h.$7g)());return await this.fb.download(L,V),this.F.info("Downloaded extension to",V.toString()),{location:V,cleanup:async()=>{try{await this.hb.del(V)}catch(E){this.F.error(E)}}}}W(){return this.H.defaultProfile.extensionsResource}X(L,V,z){const E=V instanceof v.URI?new s.$Tp({id:(0,s.$Xp)(L.publisher,L.name)},L.version):s.$Tp.create(V);return this.gb.createInstance(K,E,L,V,z,(F,J)=>{if(V instanceof v.URI)return this.pb(E,V,z,J);let Z=this.cb.get(E.toString());return Z||(this.cb.set(E.toString(),Z=this.ob(E,V,F,z,J)),Z.finally(()=>this.cb.delete(E.toString()))),Z},this.$)}Y(L,V){return new ie(L,V,this.eb)}async ob(L,V,z,E,F){const{verificationStatus:J,location:Z}=await this.bb.download(V,z,!E.donotVerifySignature,E.context?.[t.$kp]);try{if(F.isCancellationRequested)throw new O.$9;const G=await(0,T.$2q)(Z.fsPath);if(!new s.$Tp(V.identifier,V.version).equals(new s.$Tp({id:(0,s.$Xp)(G.publisher,G.name)},G.version)))throw new t.$tp(i.localize(1826,null,V.identifier.id),t.ExtensionManagementErrorCode.Invalid);return{local:await this.$.extractUserExtension(L,Z.fsPath,{id:V.identifier.uuid,publisherId:V.publisherId,publisherDisplayName:V.publisherDisplayName,targetPlatform:V.properties.targetPlatform,isApplicationScoped:E.isApplicationScoped,isMachineScoped:E.isMachineScoped,isBuiltin:E.isBuiltin,isPreReleaseVersion:V.properties.isPreReleaseVersion,hasPreReleaseVersion:V.properties.isPreReleaseVersion,installedTimestamp:Date.now(),pinned:E.installGivenVersion?!0:!!E.pinned,preRelease:(0,b.$pg)(E.preRelease)?E.preRelease:E.installPreReleaseVersion||V.properties.isPreReleaseVersion,source:"gallery"},!1,F),verificationStatus:J}}catch(G){try{await this.bb.delete(Z)}catch(q){this.F.warn("Error while deleting the downloaded file",Z.toString(),(0,O.$bb)(q))}throw(0,r.$Oq)(G)}}async pb(L,V,z,E){return{local:await this.$.extractUserExtension(L,a.$pc(V.fsPath),{isApplicationScoped:z.isApplicationScoped,isMachineScoped:z.isMachineScoped,isBuiltin:z.isBuiltin,installedTimestamp:Date.now(),pinned:z.installGivenVersion?!0:!!z.pinned,source:"vsix"},z.keepExisting??!0,E)}}async qb(L){const V=async E=>{let F=await R.Promises.readdir(E);F=F.map(G=>a.$oc(E,G));const J=await Promise.all(F.map(G=>P.promises.stat(G)));let Z=Promise.resolve([]);return J.forEach((G,q)=>{const X=F[q];G.isFile()&&(Z=Z.then(re=>[...re,X])),G.isDirectory()&&(Z=Z.then(re=>V(X).then(ce=>[...re,...ce])))}),Z};return(await V(L.location.fsPath)).map(E=>({path:`extension/${a.$qc(L.location.fsPath,E)}`,localPath:E}))}async rb({added:L,removed:V}){if(V){const z=L&&this.D.extUri.isEqual(V.profileLocation,L.profileLocation)?V.extensions.filter(E=>L.extensions.every(F=>!(0,s.$Sp)(F,E))):V.extensions;for(const E of z)this.F.info("Extensions removed from another source",E.id,V.profileLocation.toString()),this.u.fire({identifier:E,profileLocation:V.profileLocation})}if(L){const E=(await this.getInstalled(j.ExtensionType.User,L.profileLocation)).filter(F=>L.extensions.some(J=>(0,s.$Sp)(J,F.identifier)));this.s.fire(E.map(F=>(this.F.info("Extensions added from another source",F.identifier.id,L.profileLocation.toString()),{identifier:F.identifier,local:F,profileLocation:L.profileLocation,operation:t.InstallOperation.None})))}}async tb(){this.B(this.$.onExtract(V=>this.sb.add(V)));const L=await this.hb.resolve(this.db.userExtensionsLocation);for(const V of L.children??[])V.isDirectory&&this.sb.add(V.resource);this.B(this.hb.watch(this.db.userExtensionsLocation)),this.B(this.hb.onDidFilesChange(V=>this.ub(V)))}async ub(L){if(!L.affects(this.db.userExtensionsLocation,Y.FileChangeType.ADDED))return;const V=[];for(const z of L.rawAdded){if(this.sb.has(z)||!this.D.extUri.isEqual(this.D.extUri.dirname(z),this.db.userExtensionsLocation)||this.D.extUri.isEqual(z,this.D.extUri.joinPath(this.db.userExtensionsLocation,".obsolete"))||this.D.extUri.basename(z).startsWith(".")||!(await this.hb.stat(z)).isDirectory)continue;const E=await this.$.scanUserExtensionAtLocation(z);E&&E.installedTimestamp===void 0&&(this.sb.add(z),V.push(E))}V.length&&(await this.vb(V.map(z=>[z,void 0]),this.H.defaultProfile.extensionsResource),this.F.info("Added extensions to default profile from external source",V.map(z=>z.identifier.id)))}async vb(L,V){const z=L.map(E=>E[0]);await this.wb(z),await this.eb.addExtensionsToProfile(L,V),this.s.fire(z.map(E=>({local:E,identifier:E.identifier,operation:t.InstallOperation.None,profileLocation:V})))}async wb(L){const V=await this.$.getUninstalledExtensions();for(const z of L){const E=s.$Tp.create(z);V[E.toString()]&&(this.F.trace("Removing the extension from uninstalled list:",E.id),await this.$.setInstalled(E),this.F.info("Removed the extension from uninstalled list:",E.id))}}};e.$8q=U,e.$8q=U=Ee([oe(0,t.$rp),oe(1,me.$em),oe(2,ae.$fk),oe(3,n.$Si),oe(4,l.$Vq),oe(5,o.$Rq),oe(6,c.$8o),oe(7,ne.$Ji),oe(8,Y.$fl),oe(9,ue.$yk),oe(10,W.$Pl),oe(11,_.$Rl)],U);let H=class extends d.$Zc{constructor(L,V,z,E,F,J,Z){super(),this.n=L,this.s=V,this.t=z,this.u=E,this.w=F,this.y=J,this.z=Z,this.h=this.B(new g.$qe),this.onExtract=this.h.event,this.j=new f.$Fc,this.m=new f.$Fc,this.c=(0,$.$lh)(this.t.userExtensionsLocation,".obsolete"),this.g=new I.$Rh}async cleanUp(){await this.J(),await this.I()}async scanExtensions(L,V,z){try{const E={includeInvalid:!0,profileLocation:V,productVersion:z};let F=[];if(L===null||L===j.ExtensionType.System){let J=this.j.get(V);J||(J=this.t.scanAllExtensions({includeInvalid:!0,useCache:!0},E,!1).finally(()=>this.j.delete(V)),this.j.set(V,J)),F.push(...await J)}else if(L===j.ExtensionType.User){let J=this.m.get(V);J||(J=this.t.scanUserExtensions(E).finally(()=>this.m.delete(V)),this.m.set(V,J)),F.push(...await J)}return F=L!==null?F.filter(J=>J.type===L):F,await Promise.all(F.map(J=>this.H(J)))}catch(E){throw(0,r.$Oq)(E,t.ExtensionManagementErrorCode.Scanning)}}async scanAllUserExtensions(L){try{const V=await this.t.scanUserExtensions({includeAllVersions:!L,includeInvalid:!0});return await Promise.all(V.map(z=>this.H(z)))}catch(V){throw(0,r.$Oq)(V,t.ExtensionManagementErrorCode.Scanning)}}async scanUserExtensionAtLocation(L){try{const V=await this.t.scanExistingExtension(L,j.ExtensionType.User,{includeInvalid:!0});if(V)return await this.H(V)}catch(V){this.z.error(V)}return null}async extractUserExtension(L,V,z,E,F){const J=L.toString(),Z=v.URI.file(a.$oc(this.t.userExtensionsLocation.fsPath,`.${(0,h.$7g)()}`)),G=v.URI.file(a.$oc(this.t.userExtensionsLocation.fsPath,J));if(await this.s.exists(G)){if(!E)try{return await this.scanLocalExtension(G,j.ExtensionType.User)}catch(q){this.z.warn(`Error while scanning the existing extension at ${G.path}. Deleting the existing extension and extracting it.`,(0,O.$bb)(q))}try{await this.D(L.id,G,"removeExisting")}catch{throw new t.$tp(i.localize(1827,null,G.fsPath,L.id),t.ExtensionManagementErrorCode.Delete)}}try{if(F.isCancellationRequested)throw new O.$9;try{this.z.trace(`Started extracting the extension from ${V} to ${G.fsPath}`),await(0,w.$Lq)(V,Z.fsPath,{sourcePath:"extension",overwrite:!0},F),this.z.info(`Extracted extension to ${G}:`,L.id)}catch(q){throw(0,T.$1q)(q)}try{await this.t.updateMetadata(Z,z)}catch(q){throw this.y.publicLog2("extension:extract",{extensionId:L.id,code:`${(0,Y.$wl)(q)}`}),(0,r.$Oq)(q,t.ExtensionManagementErrorCode.UpdateMetadata)}if(F.isCancellationRequested)throw new O.$9;try{this.z.trace(`Started renaming the extension from ${Z.fsPath} to ${G.fsPath}`),await this.G(Z.fsPath,G.fsPath),this.z.info("Renamed to",G.fsPath)}catch(q){if(q.code==="ENOTEMPTY"){this.z.info("Rename failed because extension was installed by another source. So ignoring renaming.",L.id);try{await this.s.del(Z,{recursive:!0})}catch{}}else throw this.z.info(`Rename failed because of ${(0,O.$bb)(q)}. Deleted from extracted location`,Z),q}this.h.fire(G)}catch(q){try{await this.s.del(Z,{recursive:!0})}catch{}throw q}return this.scanLocalExtension(G,j.ExtensionType.User)}async scanMetadata(L,V){return V?(await this.C(L,V))?.metadata:this.t.scanMetadata(L.location)}async C(L,V){return(await this.u.scanProfileExtensions(V)).find(E=>(0,s.$Sp)(E.identifier,L.identifier))}async updateMetadata(L,V,z){try{z?await this.u.updateMetadata([[L,V]],z):await this.t.updateMetadata(L.location,V)}catch(E){throw this.y.publicLog2("extension:extract",{extensionId:L.identifier.id,code:`${(0,Y.$wl)(E)}`,isProfile:!!z}),(0,r.$Oq)(E,t.ExtensionManagementErrorCode.UpdateMetadata)}return this.scanLocalExtension(L.location,L.type,z)}async getUninstalledExtensions(){try{return await this.F()}catch(L){throw(0,r.$Oq)(L,t.ExtensionManagementErrorCode.ReadUninstalled)}}async setUninstalled(...L){const V=L.map(z=>s.$Tp.create(z));await this.F(z=>V.forEach(E=>{z[E.toString()]=!0,this.z.info("Marked extension as uninstalled",E.toString())}))}async setInstalled(L){try{await this.F(V=>delete V[L.toString()])}catch(V){throw(0,r.$Oq)(V,t.ExtensionManagementErrorCode.UnsetUninstalled)}}async removeExtension(L,V){if(this.w.extUri.isEqualOrParent(L.location,this.t.userExtensionsLocation))return this.D(L.identifier.id,L.location,V)}async removeUninstalledExtension(L){await this.removeExtension(L,"uninstalled"),await this.F(V=>delete V[s.$Tp.create(L).toString()])}async copyExtension(L,V,z,E){const F=await this.C(L,V),J=await this.C(L,z);if(E={...F?.metadata,...E},J)if(this.w.extUri.isEqual(J.location,L.location))await this.u.updateMetadata([[L,{...J.metadata,...E}]],z);else{const Z=await this.scanLocalExtension(J.location,L.type,z);await this.u.removeExtensionFromProfile(Z,z),await this.u.addExtensionsToProfile([[L,{...J.metadata,...E}]],z)}else await this.u.addExtensionsToProfile([[L,E]],z);return this.scanLocalExtension(L.location,L.type,z)}async copyExtensions(L,V,z){const E=await this.scanExtensions(j.ExtensionType.User,L,z),F=await Promise.all(E.filter(J=>!J.isApplicationScoped).map(async J=>[J,await this.scanMetadata(J,L)]));await this.u.addExtensionsToProfile(F,V)}async D(L,V,z){this.z.trace(`Deleting ${z} extension from disk`,L,V.fsPath);const E=this.w.extUri.joinPath(this.w.extUri.dirname(V),`${this.w.extUri.basename(V)}.${(0,u.$yj)((0,h.$7g)()).toString(16)}${M}`);await this.G(V.fsPath,E.fsPath),await this.s.del(E,{recursive:!0}),this.z.info(`Deleted ${z} extension from disk`,L,V.fsPath)}F(L){return this.g.queue(async()=>{let V;try{V=(await this.s.readFile(this.c,"utf8")).value.toString()}catch(E){if((0,Y.$wl)(E)!==Y.FileOperationResult.FILE_NOT_FOUND)throw E}let z={};if(V)try{z=JSON.parse(V)}catch{}return L&&(L(z),Object.keys(z).length?await this.s.writeFile(this.c,y.$Se.fromString(JSON.stringify(z))):await this.s.del(this.c)),z})}async G(L,V){try{await R.Promises.rename(L,V,2*60*1e3)}catch(z){throw(0,r.$Oq)(z,t.ExtensionManagementErrorCode.Rename)}}async scanLocalExtension(L,V,z){try{if(z){const F=(await this.t.scanUserExtensions({profileLocation:z})).find(J=>this.w.extUri.isEqual(J.location,L));if(F)return await this.H(F)}else{const E=await this.t.scanExistingExtension(L,V,{includeInvalid:!0});if(E)return await this.H(E)}throw new t.$tp(i.localize(1828,null,L.path),t.ExtensionManagementErrorCode.ScanningExtension)}catch(E){throw(0,r.$Oq)(E,t.ExtensionManagementErrorCode.ScanningExtension)}}async H(L){const V=await this.s.resolve(L.location);let z,E;return V.children&&(z=V.children.find(({name:F})=>/^readme(\.txt|\.md|)$/i.test(F))?.resource,E=V.children.find(({name:F})=>/^changelog(\.txt|\.md|)$/i.test(F))?.resource),{identifier:L.identifier,type:L.type,isBuiltin:L.isBuiltin||!!L.metadata?.isBuiltin,location:L.location,manifest:L.manifest,targetPlatform:L.targetPlatform,validations:L.validations,isValid:L.isValid,readmeUrl:z,changelogUrl:E,publisherDisplayName:L.metadata?.publisherDisplayName,publisherId:L.metadata?.publisherId||null,isApplicationScoped:!!L.metadata?.isApplicationScoped,isMachineScoped:!!L.metadata?.isMachineScoped,isPreReleaseVersion:!!L.metadata?.isPreReleaseVersion,hasPreReleaseVersion:!!L.metadata?.hasPreReleaseVersion,preRelease:!!L.metadata?.preRelease,installedTimestamp:L.metadata?.installedTimestamp,updated:!!L.metadata?.updated,pinned:!!L.metadata?.pinned,isWorkspaceScoped:!1,source:L.metadata?.source??(L.identifier.uuid?"gallery":"vsix")}}async I(){const L=await this.getUninstalledExtensions();if(Object.keys(L).length===0){this.z.debug("No uninstalled extensions found.");return}this.z.debug("Removing uninstalled extensions:",Object.keys(L));const V=await this.t.scanUserExtensions({includeAllVersions:!0,includeUninstalled:!0,includeInvalid:!0}),z=new Set;for(const F of V)L[s.$Tp.create(F).toString()]||z.add(F.identifier.id.toLowerCase());try{const F=(0,s.$Yp)(V,J=>J.identifier);await I.Promises.settled(F.map(async J=>{const Z=J.sort((G,q)=>S.rcompare(G.manifest.version,q.manifest.version))[0];z.has(Z.identifier.id.toLowerCase())||await this.n(await this.H(Z))}))}catch(F){this.z.error(F)}const E=V.filter(F=>F.metadata&&L[s.$Tp.create(F).toString()]);await Promise.allSettled(E.map(F=>this.removeUninstalledExtension(F)))}async J(){this.z.trace("ExtensionManagementService#removeTempDeleteFolders");let L;try{L=await this.s.resolve(this.t.userExtensionsLocation)}catch(V){(0,Y.$wl)(V)!==Y.FileOperationResult.FILE_NOT_FOUND&&this.z.error(V);return}if(L?.children)try{await Promise.allSettled(L.children.map(async V=>{if(!(!V.isDirectory||!V.name.endsWith(M))){this.z.trace("Deleting the temporarily deleted folder",V.resource.toString());try{await this.s.del(V.resource,{recursive:!0}),this.z.trace("Deleted the temporarily deleted folder",V.resource.toString())}catch(z){(0,Y.$wl)(z)!==Y.FileOperationResult.FILE_NOT_FOUND&&this.z.error(z)}}}))}catch{}}};e.$9q=H,e.$9q=H=Ee([oe(1,Y.$fl),oe(2,l.$Vq),oe(3,o.$Rq),oe(4,W.$Pl),oe(5,me.$em),oe(6,ae.$fk)],H);let K=class extends r.$Pq{get operation(){return this.options.operation??this.j}get verificationStatus(){return this.k}constructor(L,V,z,E,F,J,Z,G,q,X,re,ce){super(),this.l=L,this.manifest=V,this.source=z,this.options=E,this.m=F,this.n=J,this.o=Z,this.p=G,this.q=q,this.s=X,this.t=re,this.u=ce,this.j=t.InstallOperation.Install,this.identifier=this.l.identifier}async h(L){const z=(await this.n.scanExtensions(j.ExtensionType.User,this.options.profileLocation,this.options.productVersion)).find(Z=>(0,s.$Sp)(Z.identifier,this.identifier));z&&(this.j=t.InstallOperation.Update);const E={isApplicationScoped:this.options.isApplicationScoped||z?.isApplicationScoped,isMachineScoped:this.options.isMachineScoped||z?.isMachineScoped,isBuiltin:this.options.isBuiltin||z?.isBuiltin,isSystem:z?.type===j.ExtensionType.System?!0:void 0,installedTimestamp:Date.now(),pinned:this.options.installGivenVersion?!0:this.options.pinned??z?.pinned,source:this.source instanceof v.URI?"vsix":"gallery"};let F;if(this.source instanceof v.URI){if(z&&this.l.equals(new s.$Tp(z.identifier,z.manifest.version)))try{await this.n.removeExtension(z,"existing")}catch{throw new Error(i.localize(1829,null,this.manifest.displayName||this.manifest.name))}const Z=await this.w(this.l);if(Z)try{await this.n.removeExtension(Z,"existing")}catch{throw new Error(i.localize(1830,null,this.manifest.displayName||this.manifest.name))}}else{if(E.id=this.source.identifier.uuid,E.publisherId=this.source.publisherId,E.publisherDisplayName=this.source.publisherDisplayName,E.targetPlatform=this.source.properties.targetPlatform,E.updated=!!z,E.isPreReleaseVersion=this.source.properties.isPreReleaseVersion,E.hasPreReleaseVersion=z?.hasPreReleaseVersion||this.source.properties.isPreReleaseVersion,E.preRelease=(0,b.$pg)(this.options.preRelease)?this.options.preRelease:this.options.installPreReleaseVersion||this.source.properties.isPreReleaseVersion||z?.preRelease,z&&z.type!==j.ExtensionType.System&&z.manifest.version===this.source.version)return this.n.updateMetadata(z,E,this.options.profileLocation);F=await this.w(this.l)}if(L.isCancellationRequested)throw(0,r.$Oq)(new O.$9);if(!F){const Z=await this.m(this.operation,L);F=Z.local,this.k=Z.verificationStatus}if(this.o.extUri.isEqual(this.q.defaultProfile.extensionsResource,this.options.profileLocation))try{await this.s.initializeDefaultProfileExtensions()}catch(Z){throw(0,r.$Oq)(Z,t.ExtensionManagementErrorCode.IntializeDefaultProfile)}if(L.isCancellationRequested)throw(0,r.$Oq)(new O.$9);try{await this.t.addExtensionsToProfile([[F,E]],this.options.profileLocation,!F.isValid)}catch(Z){throw(0,r.$Oq)(Z,t.ExtensionManagementErrorCode.AddToProfile)}const J=await this.n.scanLocalExtension(F.location,j.ExtensionType.User,this.options.profileLocation);if(!J)throw new t.$tp("Cannot find the installed extension",t.ExtensionManagementErrorCode.InstalledExtensionNotFound);return this.source instanceof v.URI&&this.x(F,L),J}async w(L){return(await this.n.getUninstalledExtensions())[L.toString()]?(this.u.trace("Removing the extension from uninstalled list:",L.id),await this.n.setInstalled(L),this.u.info("Removed the extension from uninstalled list:",L.id),(await this.n.scanAllUserExtensions(!0)).find(E=>s.$Tp.create(E).equals(L))):void 0}async x(L,V){try{let[z]=await this.p.getExtensions([{id:L.identifier.id,version:L.manifest.version}],V);if(z||([z]=await this.p.getExtensions([{id:L.identifier.id}],V)),z){const E={id:z.identifier.uuid,publisherDisplayName:z.publisherDisplayName,publisherId:z.publisherId,isPreReleaseVersion:z.properties.isPreReleaseVersion,hasPreReleaseVersion:L.hasPreReleaseVersion||z.properties.isPreReleaseVersion,preRelease:z.properties.isPreReleaseVersion||this.options.installPreReleaseVersion};await this.n.updateMetadata(L,E,this.options.profileLocation)}}catch{}}};K=Ee([oe(6,W.$Pl),oe(7,t.$rp),oe(8,_.$Rl),oe(9,l.$Vq),oe(10,o.$Rq),oe(11,ae.$fk)],K);class ie extends r.$Pq{constructor(L,V,z){super(),this.extension=L,this.options=V,this.j=z}async h(L){await this.j.removeExtensionFromProfile(this.extension,this.options.profileLocation)}}}),define(le[140],he([0,1,6,24,23,18,42,9,17,12]),function(Q,e,P,I,y,k,C,O,g,u){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$_R=void 0;let d=class extends C.$Sq{constructor(m,a,$,S,b,v){super(u.URI.file(m.extensionsPath),a,$,S,b,v)}};e.$_R=d,e.$_R=d=Ee([oe(0,g.$Si),oe(1,O.$fl),oe(2,I.$Rl),oe(3,y.$Pl),oe(4,k.$em),oe(5,P.$fk)],d)}),define(le[141],he([0,1,12,17,42,54,9,10,6,33,23,24]),function(Q,e,P,I,y,k,C,O,g,u,d,f){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$Uic=void 0;let m=class extends k.$Zq{constructor($,S,b,v,h,R,w,i){super(P.URI.file(h.builtinExtensionsPath),P.URI.file(h.extensionsPath),h.userHome,$.defaultProfile,$,S,b,v,h,R,w,i)}};e.$Uic=m,e.$Uic=m=Ee([oe(0,f.$Rl),oe(1,y.$Rq),oe(2,C.$fl),oe(3,g.$fk),oe(4,I.$Si),oe(5,u.$yk),oe(6,d.$Pl),oe(7,O.$Ji)],m)}),define(le[74],he([0,1,8,5,2,109,3,91,10,24]),function(Q,e,P,I,y,k,C,O,g,u){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$sq=e.$qq=e.StorageTarget=e.StorageScope=e.WillSaveStateReason=e.$oq=e.$nq=e.$mq=void 0,e.$pq=a,e.$rq=S,e.$tq=v,e.$mq="__$__isNewStorageMarker",e.$nq="__$__targetStorageMarker",e.$oq=(0,g.$Ki)("storageService");var d;(function(h){h[h.NONE=0]="NONE",h[h.SHUTDOWN=1]="SHUTDOWN"})(d||(e.WillSaveStateReason=d={}));var f;(function(h){h[h.APPLICATION=-1]="APPLICATION",h[h.PROFILE=0]="PROFILE",h[h.WORKSPACE=1]="WORKSPACE"})(f||(e.StorageScope=f={}));var m;(function(h){h[h.USER=0]="USER",h[h.MACHINE=1]="MACHINE"})(m||(e.StorageTarget=m={}));function a(h){const R=h.get(e.$nq);if(R)try{return JSON.parse(R)}catch{}return Object.create(null)}class $ extends y.$Zc{static{this.a=60*1e3}constructor(R={flushInterval:$.a}){super(),this.m=R,this.b=this.B(new I.$te),this.c=this.B(new I.$te),this.onDidChangeTarget=this.c.event,this.f=this.B(new I.$qe),this.onWillSaveState=this.f.event,this.h=this.B(new P.$Wh(()=>this.n(),this.m.flushInterval)),this.j=this.B(new y.$1c),this.C=void 0,this.F=void 0,this.H=void 0}onDidChangeValue(R,w,i){return I.Event.filter(this.b.event,c=>c.scope===R&&(w===void 0||c.key===w),i)}n(){this.j.value=(0,P.$1h)(()=>{this.r()&&this.flush(),this.h.schedule()})}r(){return!0}t(){(0,y.$Uc)([this.j,this.h])}initialize(){return this.g||(this.g=(async()=>{(0,k.mark)("code/willInitStorage");try{await this.O()}finally{(0,k.mark)("code/didInitStorage")}this.h.schedule()})()),this.g}u(R,w){const{key:i,external:c}=w;if(i===e.$nq){switch(R){case f.APPLICATION:this.H=void 0;break;case f.PROFILE:this.F=void 0;break;case f.WORKSPACE:this.C=void 0;break}this.c.fire({scope:R})}else this.b.fire({scope:R,key:i,target:this.J(R)[i],external:c})}w(R){this.f.fire({reason:R})}get(R,w,i){return this.P(w)?.get(R,i)}getBoolean(R,w,i){return this.P(w)?.getBoolean(R,i)}getNumber(R,w,i){return this.P(w)?.getNumber(R,i)}getObject(R,w,i){return this.P(w)?.getObject(R,i)}storeAll(R,w){this.y(()=>{for(const i of R)this.store(i.key,i.value,i.scope,i.target,w)})}store(R,w,i,c,n=!1){if((0,C.$sg)(w)){this.remove(R,i,n);return}this.y(()=>{this.z(R,i,c),this.P(i)?.set(R,w,n)})}remove(R,w,i=!1){this.y(()=>{this.z(R,w,void 0),this.P(w)?.delete(R,i)})}y(R){this.b.pause(),this.c.pause();try{R()}finally{this.b.resume(),this.c.resume()}}keys(R,w){const i=[],c=this.J(R);for(const n of Object.keys(c))c[n]===w&&i.push(n);return i}z(R,w,i,c=!1){const n=this.J(w);typeof i=="number"?n[R]!==i&&(n[R]=i,this.P(w)?.set(e.$nq,JSON.stringify(n),c)):typeof n[R]=="number"&&(delete n[R],this.P(w)?.set(e.$nq,JSON.stringify(n),c))}get D(){return this.C||(this.C=this.L(f.WORKSPACE)),this.C}get G(){return this.F||(this.F=this.L(f.PROFILE)),this.F}get I(){return this.H||(this.H=this.L(f.APPLICATION)),this.H}J(R){switch(R){case f.APPLICATION:return this.I;case f.PROFILE:return this.G;default:return this.D}}L(R){const w=this.P(R);return w?a(w):Object.create(null)}isNew(R){return this.getBoolean(e.$mq,R)===!0}async flush(R=d.NONE){this.f.fire({reason:R});const w=this.P(f.APPLICATION),i=this.P(f.PROFILE),c=this.P(f.WORKSPACE);switch(R){case d.NONE:await P.Promises.settled([w?.whenFlushed()??Promise.resolve(),i?.whenFlushed()??Promise.resolve(),c?.whenFlushed()??Promise.resolve()]);break;case d.SHUTDOWN:await P.Promises.settled([w?.flush(0)??Promise.resolve(),i?.flush(0)??Promise.resolve(),c?.flush(0)??Promise.resolve()]);break}}async log(){const R=this.P(f.APPLICATION)?.items??new Map,w=this.P(f.PROFILE)?.items??new Map,i=this.P(f.WORKSPACE)?.items??new Map;return v(R,w,i,this.Q(f.APPLICATION)??"",this.Q(f.PROFILE)??"",this.Q(f.WORKSPACE)??"")}async optimize(R){return await this.flush(),this.P(R)?.optimize()}async switch(R,w){return this.w(d.NONE),(0,u.$Ql)(R)?this.R(R,w):this.S(R,w)}M(R,w){return!(R.id===w.id||S(w)&&S(R))}N(R,w,i){this.y(()=>{const c=new Set;for(const[n,r]of R)c.add(n),w.get(n)!==r&&this.u(i,{key:n,external:!0});for(const[n]of w.items)c.has(n)||this.u(i,{key:n,external:!0})})}}e.$qq=$;function S(h){return h.isDefault||!!h.useDefaultFlags?.globalState}class b extends ${constructor(){super(),this.U=this.B(new O.$kq(new O.$lq,{hint:O.StorageHint.STORAGE_IN_MEMORY})),this.W=this.B(new O.$kq(new O.$lq,{hint:O.StorageHint.STORAGE_IN_MEMORY})),this.X=this.B(new O.$kq(new O.$lq,{hint:O.StorageHint.STORAGE_IN_MEMORY})),this.B(this.X.onDidChangeStorage(R=>this.u(f.WORKSPACE,R))),this.B(this.W.onDidChangeStorage(R=>this.u(f.PROFILE,R))),this.B(this.U.onDidChangeStorage(R=>this.u(f.APPLICATION,R)))}P(R){switch(R){case f.APPLICATION:return this.U;case f.PROFILE:return this.W;default:return this.X}}Q(R){switch(R){case f.APPLICATION:return"inMemory (application)";case f.PROFILE:return"inMemory (profile)";default:return"inMemory (workspace)"}}async O(){}async R(){}async S(){}r(){return!1}hasScope(R){return!1}}e.$sq=b;async function v(h,R,w,i,c,n){const r=D=>{try{return JSON.parse(D)}catch{return D}},t=new Map,s=new Map;h.forEach((D,j)=>{t.set(j,D),s.set(j,r(D))});const o=new Map,l=new Map;R.forEach((D,j)=>{o.set(j,D),l.set(j,r(D))});const p=new Map,A=new Map;w.forEach((D,j)=>{p.set(j,D),A.set(j,r(D))}),console.group(i!==c?`Storage: Application (path: ${i})`:`Storage: Application & Profile (path: ${i}, default profile)`);const T=[];if(t.forEach((D,j)=>{T.push({key:j,value:D})}),console.table(T),console.groupEnd(),console.log(s),i!==c){console.group(`Storage: Profile (path: ${c}, profile specific)`);const D=[];o.forEach((j,x)=>{D.push({key:x,value:j})}),console.table(D),console.groupEnd(),console.log(l)}console.group(`Storage: Workspace (path: ${n})`);const N=[];p.forEach((D,j)=>{N.push({key:j,value:D})}),console.table(N),console.groupEnd(),console.log(A)}}),define(le[142],he([0,1,13,28,74]),function(Q,e,P,I,y){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$uq=k;async function k(C,O,g){let u=g&&g.get("storage.serviceMachineId",y.StorageScope.APPLICATION)||null;if(u)return u;try{const f=(await O.readFile(C.serviceMachineIdResource)).value.toString();u=(0,I.$6g)(f)?f:null}catch{u=null}if(!u){u=(0,I.$7g)();try{await O.writeFile(C.serviceMachineIdResource,P.$Se.fromString(u))}catch{}}return g?.store("storage.serviceMachineId",u,y.StorageScope.APPLICATION,y.StorageTarget.MACHINE),u}}),define(le[143],he([0,1,142,18,41]),function(Q,e,P,I,y){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$vq=k;async function k(C,O,g,u,d,f,m){const a={"X-Market-Client-Id":`VSCode ${C}`,"User-Agent":`VSCode ${C} (${O.nameShort})`};if((0,y.$Kp)(O,g)&&(0,y.$Mp)(u)===I.TelemetryLevel.USAGE){const $=await(0,P.$uq)(g,d,f);a["X-Market-User-Id"]=$,a["VSCode-SessionId"]=m.machineId||$}return a}}),define(le[144],he([0,1,19,21,7,11,36,3,12,83,30,17,20,26,22,44,9,6,33,46,143,74,18,156]),function(Q,e,P,I,y,k,C,O,g,u,d,f,m,a,$,S,b,v,h,R,w,i,c,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$yq=e.$xq=void 0,e.$wq=V;const r=k.$r?$.TargetPlatform.WEB:(0,m.$np)(k.$x,C.$jc),t="X-Market-Search-Activity-Id";var s;(function(G){G[G.None=0]="None",G[G.IncludeVersions=1]="IncludeVersions",G[G.IncludeFiles=2]="IncludeFiles",G[G.IncludeCategoryAndTags=4]="IncludeCategoryAndTags",G[G.IncludeSharedAccounts=8]="IncludeSharedAccounts",G[G.IncludeVersionProperties=16]="IncludeVersionProperties",G[G.ExcludeNonValidated=32]="ExcludeNonValidated",G[G.IncludeInstallationTargets=64]="IncludeInstallationTargets",G[G.IncludeAssetUri=128]="IncludeAssetUri",G[G.IncludeStatistics=256]="IncludeStatistics",G[G.IncludeLatestVersionOnly=512]="IncludeLatestVersionOnly",G[G.Unpublished=4096]="Unpublished",G[G.IncludeNameConflictInfo=32768]="IncludeNameConflictInfo"})(s||(s={}));function o(...G){return String(G.reduce((q,X)=>q|X,0))}var l;(function(G){G[G.Tag=1]="Tag",G[G.ExtensionId=4]="ExtensionId",G[G.Category=5]="Category",G[G.ExtensionName=7]="ExtensionName",G[G.Target=8]="Target",G[G.Featured=9]="Featured",G[G.SearchText=10]="SearchText",G[G.ExcludeWithFlags=12]="ExcludeWithFlags"})(l||(l={}));const p={Icon:"Microsoft.VisualStudio.Services.Icons.Default",Details:"Microsoft.VisualStudio.Services.Content.Details",Changelog:"Microsoft.VisualStudio.Services.Content.Changelog",Manifest:"Microsoft.VisualStudio.Code.Manifest",VSIX:"Microsoft.VisualStudio.Services.VSIXPackage",License:"Microsoft.VisualStudio.Services.Content.License",Repository:"Microsoft.VisualStudio.Services.Links.Source",Signature:"Microsoft.VisualStudio.Services.VsixSignature"},A={Dependency:"Microsoft.VisualStudio.Code.ExtensionDependencies",ExtensionPack:"Microsoft.VisualStudio.Code.ExtensionPack",Engine:"Microsoft.VisualStudio.Code.Engine",PreRelease:"Microsoft.VisualStudio.Code.PreRelease",EnabledApiProposals:"Microsoft.VisualStudio.Code.EnabledApiProposals",LocalizedLanguages:"Microsoft.VisualStudio.Code.LocalizedLanguages",WebExtension:"Microsoft.VisualStudio.Code.WebExtension",SponsorLink:"Microsoft.VisualStudio.Code.SponsorLink",SupportLink:"Microsoft.VisualStudio.Services.Links.Support",ExecutesCode:"Microsoft.VisualStudio.Code.ExecutesCode"},N={pageNumber:1,pageSize:10,sortBy:m.SortBy.NoneOrRelevance,sortOrder:m.SortOrder.Default,flags:s.None,criteria:[],assetTypes:[]};class D{constructor(q=N){this.d=q}get pageNumber(){return this.d.pageNumber}get pageSize(){return this.d.pageSize}get sortBy(){return this.d.sortBy}get sortOrder(){return this.d.sortOrder}get flags(){return this.d.flags}get criteria(){return this.d.criteria}withPage(q,X=this.d.pageSize){return new D({...this.d,pageNumber:q,pageSize:X})}withFilter(q,...X){const re=[...this.d.criteria,...X.length?X.map(ce=>({filterType:q,value:ce})):[{filterType:q}]];return new D({...this.d,criteria:re})}withSortBy(q){return new D({...this.d,sortBy:q})}withSortOrder(q){return new D({...this.d,sortOrder:q})}withFlags(...q){return new D({...this.d,flags:q.reduce((X,re)=>X|re,0)})}withAssetTypes(...q){return new D({...this.d,assetTypes:q})}withSource(q){return new D({...this.d,source:q})}get raw(){const{criteria:q,pageNumber:X,pageSize:re,sortBy:ce,sortOrder:fe,flags:we,assetTypes:de}=this.d;return{filters:[{criteria:q,pageNumber:X,pageSize:re,sortBy:ce,sortOrder:fe}],assetTypes:de,flags:we}}get searchText(){const q=this.d.criteria.filter(X=>X.filterType===l.SearchText)[0];return q&&q.value?q.value:""}get telemetryData(){return{filterTypes:this.d.criteria.map(q=>String(q.filterType)),flags:this.d.flags,sortBy:String(this.sortBy),sortOrder:String(this.sortOrder),pageNumber:String(this.pageNumber),source:this.d.source,searchTextLength:this.searchText.length}}}function j(G,q){const X=(G||[]).filter(re=>re.statisticName===q)[0];return X?X.value:0}function x(G){const q="Microsoft.VisualStudio.Code.Translation.";return G.files.filter(re=>re.assetType.indexOf(q)===0).reduce((re,ce)=>{const fe=ae(G,ce.assetType);return fe&&re.push([ce.assetType.substring(q.length),fe]),re},[])}function Y(G){if(G.properties){const q=G.properties.filter(ce=>ce.key===p.Repository),X=new RegExp("((git|ssh|http(s)?)|(git@[\\w.]+))(:(//)?)([\\w.@:/\\-~]+)(.git)(/)?"),re=q.filter(ce=>X.test(ce.value))[0];return re?{uri:re.value,fallbackUri:re.value}:null}return ae(G,p.Repository)}function ne(G){return{uri:`${G.fallbackAssetUri}/${p.VSIX}?redirect=true${G.targetPlatform?`&targetPlatform=${G.targetPlatform}`:""}`,fallbackUri:`${G.fallbackAssetUri}/${p.VSIX}${G.targetPlatform?`?targetPlatform=${G.targetPlatform}`:""}`}}function ae(G,q){return G.files.filter(re=>re.assetType===q)[0]?{uri:`${G.assetUri}/${q}${G.targetPlatform?`?targetPlatform=${G.targetPlatform}`:""}`,fallbackUri:`${G.fallbackAssetUri}/${q}${G.targetPlatform?`?targetPlatform=${G.targetPlatform}`:""}`}:null}function ue(G,q){const X=G.properties?G.properties.filter(ce=>ce.key===q):[],re=X.length>0&&X[0].value;return re?re.split(",").map(ce=>(0,a.$Wp)(ce)):[]}function me(G){const q=G.properties?G.properties.filter(X=>X.key===A.Engine):[];return q.length>0&&q[0].value||""}function W(G){const q=G.properties?G.properties.filter(X=>X.key===A.PreRelease):[];return q.length>0&&q[0].value==="true"}function _(G){const q=G.properties?G.properties.filter(X=>X.key===A.ExecutesCode):[];return q.length>0?q[0].value==="true":void 0}function M(G){const q=G.properties?G.properties.filter(re=>re.key===A.EnabledApiProposals):[],X=q.length>0&&q[0].value||"";return X?X.split(","):[]}function U(G){const q=G.properties?G.properties.filter(re=>re.key===A.LocalizedLanguages):[],X=q.length>0&&q[0].value||"";return X?X.split(","):[]}function H(G){return G.properties?.find(q=>q.key===A.SponsorLink)?.value}function K(G){return G.properties?.find(q=>q.key===A.SupportLink)?.value}function ie(G){return G.indexOf("preview")!==-1}function se(G){return G.targetPlatform?(0,m.$mp)(G.targetPlatform):$.TargetPlatform.UNDEFINED}function L(G){const q=(0,P.$Qb)(G.versions.map(se)),X=!!G.tags?.includes(m.$gp),re=q.indexOf($.TargetPlatform.WEB);return X?re===-1&&q.push($.TargetPlatform.WEB):re!==-1&&q.splice(re,1),q}function V(G,q){for(let X=0;X<G.length;X++){const re=G[X];if(re.version===G[X-1]?.version){let ce=X;if(se(re)===q)for(;ce>0&&G[ce-1].version===re.version;)ce--;ce!==X&&(G.splice(X,1),G.splice(ce,0,re))}}return G}function z(G,q,X){G.telemetryData={index:q,querySource:X,queryActivityId:G.queryContext?.[t]}}function E(G,q,X,re){const ce=G.versions[0],fe={manifest:ae(q,p.Manifest),readme:ae(q,p.Details),changelog:ae(q,p.Changelog),license:ae(q,p.License),repository:Y(q),download:ne(q),icon:ae(q,p.Icon),signature:ae(q,p.Signature),coreTranslations:x(q)};return{type:"gallery",identifier:{id:(0,a.$Xp)(G.publisher.publisherName,G.extensionName),uuid:G.extensionId},name:G.extensionName,version:q.version,displayName:G.displayName,publisherId:G.publisher.publisherId,publisher:G.publisher.publisherName,publisherDisplayName:G.publisher.displayName,publisherDomain:G.publisher.domain?{link:G.publisher.domain,verified:!!G.publisher.isDomainVerified}:void 0,publisherSponsorLink:H(ce),description:G.shortDescription??"",installCount:j(G.statistics,"install"),rating:j(G.statistics,"averagerating"),ratingCount:j(G.statistics,"ratingcount"),categories:G.categories||[],tags:G.tags||[],releaseDate:Date.parse(G.releaseDate),lastUpdated:Date.parse(G.lastUpdated),allTargetPlatforms:X,assets:fe,properties:{dependencies:ue(q,A.Dependency),extensionPack:ue(q,A.ExtensionPack),engine:me(q),enabledApiProposals:M(q),localizedLanguages:U(q),targetPlatform:se(q),isPreReleaseVersion:W(q),executesCode:_(q)},hasPreReleaseVersion:W(ce),hasReleaseVersion:!0,preview:ie(G.flags),isSigned:!!fe.signature,queryContext:re,supportLink:K(ce)}}let F=class{constructor(q,X,re,ce,fe,we,de,pe){this.l=X,this.n=re,this.o=ce,this.q=fe,this.u=we,this.w=de,this.x=pe;const ge=de.extensionsGallery,ye=ge?.servicePPEUrl&&pe.getValue("_extensionsGallery.enablePPE");this.d=ye?ge.servicePPEUrl:ge?.serviceUrl,this.g=ye?void 0:ge?.searchUrl,this.h=ge?.controlUrl,this.k=de.extensionsEnabledWithApiProposalVersion?.map(ve=>ve.toLowerCase())??[],this.j=(0,w.$vq)(de.version,de,this.o,this.x,this.u,q,this.q)}y(q=""){return`${this.d}${q}`}isEnabled(){return!!this.d}async getExtensions(q,X,re){const ce=I.CancellationToken.isCancellationToken(X)?{}:X,fe=I.CancellationToken.isCancellationToken(X)?X:re,we=await this.z(q,ce,fe),de=we.map(ge=>ge.identifier.uuid),pe=[];for(const ge of q)ge.uuid&&!de.includes(ge.uuid)&&pe.push({...ge,uuid:void 0});if(pe.length){this.q.publicLog2("galleryService:additionalQueryByName",{count:pe.length});const ge=await this.z(pe,ce,fe);we.push(...ge)}return we}async z(q,X,re){const ce=[],fe=[],we=[],de=[];let pe=!0;for(const ve of q){ve.uuid?fe.push(ve.uuid):ce.push(ve.id);const B=!!(ve.version||ve.preRelease);we.push({id:ve.id,uuid:ve.uuid,includePreRelease:B}),ve.version&&de.push({id:ve.id,uuid:ve.uuid,version:ve.version}),pe=pe&&!!ve.hasPreRelease&&!B}if(!fe.length&&!ce.length)return[];let ge=new D().withPage(1,q.length);fe.length&&(ge=ge.withFilter(l.ExtensionId,...fe)),ce.length&&(ge=ge.withFilter(l.ExtensionName,...ce)),(X.queryAllVersions||pe)&&(ge=ge.withFlags(ge.flags,s.IncludeVersions)),X.source&&(ge=ge.withSource(X.source));const{extensions:ye}=await this.C(ge,{targetPlatform:X.targetPlatform??r,includePreRelease:we,versions:de,compatible:!!X.compatible,productVersion:X.productVersion??{version:this.w.version,date:this.w.date}},re);return X.source&&ye.forEach((ve,B)=>z(ve,B,X.source)),ye}async getCompatibleExtension(q,X,re,ce={version:this.w.version,date:this.w.date}){if((0,m.$op)(q.allTargetPlatforms,re))return null;if(await this.isExtensionCompatible(q,X,re))return q;const fe=new D().withFlags(s.IncludeVersions).withPage(1,1).withFilter(l.ExtensionId,q.identifier.uuid),{extensions:we}=await this.C(fe,{targetPlatform:re,compatible:!0,includePreRelease:X,productVersion:ce},I.CancellationToken.None);return we[0]||null}async isExtensionCompatible(q,X,re,ce={version:this.w.version,date:this.w.date}){if(!(0,m.$pp)(q.properties.targetPlatform,q.allTargetPlatforms,re)||!X&&q.properties.isPreReleaseVersion)return!1;let fe=q.properties.engine;if(!fe){const we=await this.getManifest(q,I.CancellationToken.None);if(!we)throw new Error("Manifest was not found");fe=we.engines.vscode}return!(!(0,S.$_p)(fe,ce.version,ce.date)||!this.A(q.identifier,q.properties.enabledApiProposals))}A(q,X){return!X||!this.k.includes(q.id.toLowerCase())?!0:(0,S.$aq)(X)}async B(q,X,re,ce,fe,we,de={version:this.w.version,date:this.w.date}){if(!(0,m.$pp)(se(X),fe,we)||re!=="any"&&W(X)!==(re==="prerelease"))return!1;if(ce)try{const pe=await this.H(q,X);if(!(0,S.$_p)(pe,de.version,de.date))return!1}catch(pe){return this.n.error(`Error while getting the engine for the version ${X.version}.`,(0,y.$bb)(pe)),!1}return!0}async query(q,X){let re=q.text||"";const ce=q.pageSize??50;let fe=new D().withPage(1,ce);re?(re=re.replace(/\bcategory:("([^"]*)"|([^"]\S*))(\s+|\b|$)/g,(ye,ve,B)=>(fe=fe.withFilter(l.Category,B||ve),"")),re=re.replace(/\btag:("([^"]*)"|([^"]\S*))(\s+|\b|$)/g,(ye,ve,B)=>(fe=fe.withFilter(l.Tag,B||ve),"")),re=re.replace(/\bfeatured(\s+|\b|$)/g,()=>(fe=fe.withFilter(l.Featured),"")),re=re.trim(),re&&(re=re.length<200?re:re.substring(0,200),fe=fe.withFilter(l.SearchText,re)),fe=fe.withSortBy(m.SortBy.NoneOrRelevance)):q.ids?fe=fe.withFilter(l.ExtensionId,...q.ids):q.names?fe=fe.withFilter(l.ExtensionName,...q.names):fe=fe.withSortBy(m.SortBy.InstallCount),typeof q.sortBy=="number"&&(fe=fe.withSortBy(q.sortBy)),typeof q.sortOrder=="number"&&(fe=fe.withSortOrder(q.sortOrder)),q.source&&(fe=fe.withSource(q.source));const we=async(ye,ve)=>{const{extensions:B,total:ee}=await this.C(ye,{targetPlatform:r,compatible:!1,includePreRelease:!!q.includePreRelease,productVersion:q.productVersion??{version:this.w.version,date:this.w.date}},ve);return B.forEach((te,$e)=>z(te,(ye.pageNumber-1)*ye.pageSize+$e,q.source)),{extensions:B,total:ee}},{extensions:de,total:pe}=await we(fe,X),ge=async(ye,ve)=>{if(ve.isCancellationRequested)throw new y.$9;const{extensions:B}=await we(fe.withPage(ye+1),ve);return B};return{firstPage:de,total:pe,pageSize:fe.pageSize,getPage:ge}}async C(q,X,re){const ce=q.flags;q.flags&s.IncludeLatestVersionOnly&&q.flags&s.IncludeVersions&&(q=q.withFlags(q.flags&~s.IncludeVersions,s.IncludeLatestVersionOnly)),!(q.flags&s.IncludeLatestVersionOnly)&&!(q.flags&s.IncludeVersions)&&(q=q.withFlags(q.flags,s.IncludeLatestVersionOnly)),X.versions?.length&&(q=q.withFlags(q.flags&~s.IncludeLatestVersionOnly,s.IncludeVersions)),q=q.withFlags(q.flags,s.IncludeAssetUri,s.IncludeCategoryAndTags,s.IncludeFiles,s.IncludeStatistics,s.IncludeVersionProperties);const{galleryExtensions:fe,total:we,context:de}=await this.E(q,re);if(!(q.flags&s.IncludeLatestVersionOnly)){const ve=[];for(const B of fe){const ee=await this.D(B,X,de);ee&&ve.push(ee)}return{extensions:ve,total:we}}const ge=[],ye=new Map;for(let ve=0;ve<fe.length;ve++){const B=fe[ve],ee={id:(0,a.$Xp)(B.publisher.publisherName,B.extensionName),uuid:B.extensionId},te=(0,O.$pg)(X.includePreRelease)?X.includePreRelease:!!X.includePreRelease.find(Se=>(0,a.$Sp)(Se,ee))?.includePreRelease;if(X.compatible&&(0,m.$op)(L(B),X.targetPlatform))continue;const $e=await this.D(B,X,de);!$e||$e.properties.isPreReleaseVersion&&(!te||!$e.hasReleaseVersion)||!$e.properties.isPreReleaseVersion&&$e.properties.targetPlatform!==X.targetPlatform&&$e.hasPreReleaseVersion?ye.set(B.extensionId,ve):ge.push([ve,$e])}if(ye.size){const ve=new n.$ke,B=new D().withFlags(ce&~s.IncludeLatestVersionOnly,s.IncludeVersions).withPage(1,ye.size).withFilter(l.ExtensionId,...ye.keys()),{extensions:ee}=await this.C(B,X,re);this.q.publicLog2("galleryService:additionalQuery",{duration:ve.elapsed(),count:ye.size});for(const te of ee){const $e=ye.get(te.identifier.uuid);ge.push([$e,te])}}return{extensions:ge.sort((ve,B)=>ve[0]-B[0]).map(([,ve])=>ve),total:we}}async D(q,X,re){const ce={id:(0,a.$Xp)(q.publisher.publisherName,q.extensionName),uuid:q.extensionId},fe=X.versions?.find(ge=>(0,a.$Sp)(ge,ce))?.version,we=(0,O.$pg)(X.includePreRelease)?X.includePreRelease:!!X.includePreRelease.find(ge=>(0,a.$Sp)(ge,ce))?.includePreRelease,de=L(q),pe=V(q.versions,X.targetPlatform);if(X.compatible&&(0,m.$op)(de,X.targetPlatform))return null;for(let ge=0;ge<pe.length;ge++){const ye=pe[ge];if(!(fe&&ye.version!==fe)){if(await this.B(ce.id,ye,we?"any":"release",X.compatible,de,X.targetPlatform,X.productVersion)){if(X.compatible&&!this.A(ce,M(ye)))continue;return E(q,ye,de,re)}if(fe&&ye.version===fe)return null}}return fe||X.compatible?null:E(q,q.versions[0],de)}async E(q,X){if(!this.isEnabled())throw new Error("No extension gallery service configured.");q=q.withFlags(q.flags,s.ExcludeNonValidated).withFilter(l.Target,"Microsoft.VisualStudio.Code").withFilter(l.ExcludeWithFlags,o(s.Unpublished));const re=await this.j,ce=JSON.stringify(q.raw),fe={...re,"Content-Type":"application/json",Accept:"application/json;api-version=3.0-preview.1","Accept-Encoding":"gzip","Content-Length":String(ce.length)},we=new n.$ke;let de,pe,ge=0;try{if(de=await this.l.request({type:"POST",url:this.g&&q.criteria.some(ve=>ve.filterType===l.SearchText)?this.g:this.y("/extensionquery"),data:ce,headers:fe},X),de.res.statusCode&&de.res.statusCode>=400&&de.res.statusCode<500)return{galleryExtensions:[],total:ge};const ye=await(0,R.$hq)(de);if(ye){const ve=ye.results[0],B=ve.extensions,ee=ve.resultMetadata&&ve.resultMetadata.filter(te=>te.metadataType==="ResultCount")[0];return ge=ee&&ee.metadataItems.filter(te=>te.name==="TotalCount")[0].count||0,{galleryExtensions:B,total:ge,context:de.res.headers.activityid?{[t]:de.res.headers.activityid}:{}}}return{galleryExtensions:[],total:ge}}catch(ye){if((0,y.$8)(ye))throw pe=m.ExtensionGalleryErrorCode.Cancelled,ye;{const ve=(0,y.$bb)(ye);throw pe=(0,u.$cp)(ye)?m.ExtensionGalleryErrorCode.Offline:ve.startsWith("XHR timeout")?m.ExtensionGalleryErrorCode.Timeout:m.ExtensionGalleryErrorCode.Failed,new m.$sp(ve,pe)}}finally{this.q.publicLog2("galleryService:query",{...q.telemetryData,requestBodySize:String(ce.length),duration:we.elapsed(),success:!!de&&(0,R.$dq)(de),responseBodySize:de?.res.headers["Content-Length"],statusCode:de?String(de.res.statusCode):void 0,errorCode:pe,count:String(ge)})}}async reportStatistic(q,X,re,ce){if(!this.isEnabled())return;const fe=k.$r?this.y(`/itemName/${q}.${X}/version/${re}/statType/${ce===m.StatisticType.Install?"1":"3"}/vscodewebextension`):this.y(`/publishers/${q}/extensions/${X}/${re}/stats?statType=${ce}`),we=k.$r?"api-version=6.1-preview.1":"*/*;api-version=4.0-preview.1",pe={...await this.j,Accept:we};try{await this.l.request({type:"POST",url:fe,headers:pe},I.CancellationToken.None)}catch{}}async download(q,X,re){this.n.trace("ExtensionGalleryService#download",q.identifier.id);const ce=(0,a.$1p)(q),fe=new Date().getTime(),we=re===m.InstallOperation.Install?"install":re===m.InstallOperation.Update?"update":"",de=we?{uri:`${q.assets.download.uri}${g.URI.parse(q.assets.download.uri).query?"&":"?"}${we}=true`,fallbackUri:`${q.assets.download.fallbackUri}${g.URI.parse(q.assets.download.fallbackUri).query?"&":"?"}${we}=true`}:q.assets.download,pe=q.queryContext?.[t]?{[t]:q.queryContext[t]}:void 0,ge=await this.G(q.identifier.id,de,p.VSIX,pe?{headers:pe}:void 0);try{await this.u.writeFile(X,ge.stream)}catch(ye){try{await this.u.del(X)}catch(ve){this.n.warn(`Error while deleting the file ${X.toString()}`,(0,y.$bb)(ve))}throw new m.$sp((0,y.$bb)(ye),m.ExtensionGalleryErrorCode.DownloadFailedWriting)}this.q.publicLog("galleryService:downloadVSIX",{...ce,duration:new Date().getTime()-fe})}async downloadSignatureArchive(q,X){if(!q.assets.signature)throw new Error("No signature asset found");this.n.trace("ExtensionGalleryService#downloadSignatureArchive",q.identifier.id);const re=await this.G(q.identifier.id,q.assets.signature,p.Signature);try{await this.u.writeFile(X,re.stream)}catch(ce){try{await this.u.del(X)}catch(fe){this.n.warn(`Error while deleting the file ${X.toString()}`,(0,y.$bb)(fe))}throw new m.$sp((0,y.$bb)(ce),m.ExtensionGalleryErrorCode.DownloadFailedWriting)}}async getReadme(q,X){if(q.assets.readme){const re=await this.G(q.identifier.id,q.assets.readme,p.Details,{},X);return await(0,R.$gq)(re)||""}return""}async getManifest(q,X){if(q.assets.manifest){const re=await this.G(q.identifier.id,q.assets.manifest,p.Manifest,{},X),ce=await(0,R.$gq)(re);return ce?JSON.parse(ce):null}return null}async F(q,X,re){const ce=ae(X,p.Manifest);if(!ce)throw new Error("Manifest was not found");const fe={"Accept-Encoding":"gzip"},we=await this.G(q,ce,p.Manifest,{headers:fe});return await(0,R.$hq)(we)}async getCoreTranslation(q,X){const re=q.assets.coreTranslations.filter(ce=>ce[0]===X.toUpperCase())[0];if(re){const ce=await this.G(q.identifier.id,re[1],re[0]),fe=await(0,R.$gq)(ce);return fe?JSON.parse(fe):null}return null}async getChangelog(q,X){if(q.assets.changelog){const re=await this.G(q.identifier.id,q.assets.changelog,p.Changelog,{},X);return await(0,R.$gq)(re)||""}return""}async getAllCompatibleVersions(q,X,re){let ce=new D().withFlags(s.IncludeVersions,s.IncludeCategoryAndTags,s.IncludeFiles,s.IncludeVersionProperties).withPage(1,1);q.uuid?ce=ce.withFilter(l.ExtensionId,q.uuid):ce=ce.withFilter(l.ExtensionName,q.id);const{galleryExtensions:fe}=await this.E(ce,I.CancellationToken.None);if(!fe.length)return[];const we=L(fe[0]);if((0,m.$op)(we,re))return[];const de=[];await Promise.all(fe[0].versions.map(async ye=>{try{await this.B(q.id,ye,X?"any":"release",!0,we,re)&&this.A(q,M(ye))&&de.push(ye)}catch{}}));const pe=[],ge=new Set;for(const ye of V(de,re))ge.has(ye.version)||(ge.add(ye.version),pe.push({version:ye.version,date:ye.lastUpdated,isPreReleaseVersion:W(ye)}));return pe}async G(q,X,re,ce={},fe=I.CancellationToken.None){const we=await this.j,de={type:"GET"},pe={...we,...ce.headers||{}};ce={...ce,...de,headers:pe};const ge=X.uri,ye=X.fallbackUri,ve={...ce,url:ge};try{const B=await this.l.request(ve,fe);if(B.res.statusCode===200)return B;const ee=await(0,R.$gq)(B);throw new Error(`Expected 200, got back ${B.res.statusCode} instead.

${ee}`)}catch(B){if((0,y.$8)(B))throw B;const ee=(0,y.$bb)(B);this.q.publicLog2("galleryService:cdnFallback",{extension:q,assetType:re,message:ee});const te={...ce,url:ye};return this.l.request(te,fe)}}async H(q,X){let re=me(X);if(!re){this.q.publicLog2("galleryService:engineFallback",{extension:q,version:X.version});const ce=await this.F(q,X,I.CancellationToken.None);if(!ce)throw new Error("Manifest was not found");re=ce.engines.vscode}return re}async getExtensionsControlManifest(){if(!this.isEnabled())throw new Error("No extension gallery service configured.");if(!this.h)return{malicious:[],deprecated:{},search:[]};const q=await this.l.request({type:"GET",url:this.h},I.CancellationToken.None);if(q.res.statusCode!==200)throw new Error("Could not get extensions report.");const X=await(0,R.$hq)(q),re=[],ce={},fe=[],we=[];if(X){for(const de of X.malicious)re.push({id:de});if(X.migrateToPreRelease)for(const[de,pe]of Object.entries(X.migrateToPreRelease))(!pe.engine||(0,S.$_p)(pe.engine,this.w.version,this.w.date))&&(ce[de.toLowerCase()]={disallowInstall:!0,extension:{id:pe.id,displayName:pe.displayName,autoMigrate:{storage:!!pe.migrateStorage},preRelease:!0}});if(X.deprecated)for(const[de,pe]of Object.entries(X.deprecated))pe&&(ce[de.toLowerCase()]=(0,O.$pg)(pe)?{}:pe);if(X.search)for(const de of X.search)fe.push(de);if(Array.isArray(X.extensionsEnabledWithPreRelease))for(const de of X.extensionsEnabledWithPreRelease)we.push(de.toLowerCase())}return{malicious:re,deprecated:ce,search:fe,extensionsEnabledWithPreRelease:we}}};F=Ee([oe(1,R.$bq),oe(2,v.$fk),oe(3,f.$Ri),oe(4,c.$em),oe(5,b.$fl),oe(6,h.$yk),oe(7,d.$ej)],F);let J=class extends F{constructor(q,X,re,ce,fe,we,de,pe){super(q,X,re,ce,fe,we,de,pe)}};e.$xq=J,e.$xq=J=Ee([oe(0,i.$oq),oe(1,R.$bq),oe(2,v.$fk),oe(3,f.$Ri),oe(4,c.$em),oe(5,b.$fl),oe(6,h.$yk),oe(7,d.$ej)],J);let Z=class extends F{constructor(q,X,re,ce,fe,we,de){super(void 0,q,X,re,ce,fe,we,de)}};e.$yq=Z,e.$yq=Z=Ee([oe(0,R.$bq),oe(1,v.$fk),oe(2,f.$Ri),oe(3,c.$em),oe(4,b.$fl),oe(5,h.$yk),oe(6,d.$ej)],Z)}),define(le[145],he([0,1,12,17,9,6,124,23,24,3,70]),function(Q,e,P,I,y,k,C,O,g,u,d){"use strict";var f,m;Object.defineProperty(e,"__esModule",{value:!0}),e.$$R=e.$0R=e.$9R=void 0;let a=class extends g.$Ul{static{f=this}static{this.a="profileAssociationsMigration"}constructor(v,h,R,w,i){super(R,w,h,i),this.U=v,this.W=R}O(){return this.U.getItem(f.b,[]).map(h=>({...h,location:(0,u.$jg)(h.location)?this.w.extUri.joinPath(this.profilesHome,h.location):P.URI.revive(h.location)}))}Q(){const v=this.U.getItem(f.c,{});return this.U.getItem(f.a,!1)?v:this.N(v)}S(){return this.w.extUri.joinPath(P.URI.file(this.W.extensionsPath).with({scheme:this.profilesHome.scheme}),"extensions.json")}};e.$9R=a,e.$9R=a=f=Ee([oe(0,C.$4R),oe(1,O.$Pl),oe(2,I.$Si),oe(3,y.$fl),oe(4,k.$fk)],a);let $=m=class extends a{constructor(v,h,R,w,i){super(v,h,R,w,i),this.$=v}P(v){v.length?this.$.setItem(m.b,v.map(h=>({...h,location:this.w.extUri.basename(h.location)}))):this.$.removeItem(m.b)}O(){const v=super.O();return this.$.getItem("userDataProfilesMigration",!1)||(this.P(v),this.$.setItem("userDataProfilesMigration",!0)),v}R(v){v.emptyWindows||v.workspaces?this.$.setItem(m.c,v):this.$.removeItem(m.c)}Q(){const v="workspaceAndProfileInfo",h=this.$.getItem(v,void 0);if(h){this.$.removeItem(v);const w=h.reduce((i,{workspace:c,profile:n})=>(i[P.URI.revive(c).toString()]=P.URI.revive(n).toString(),i),{});this.$.setItem(m.c,{workspaces:w})}const R=super.Q();return this.$.getItem(m.a,!1)||(this.R(R),this.$.setItem(m.a,!0)),R}};e.$0R=$,e.$0R=$=m=Ee([oe(0,C.$5R),oe(1,O.$Pl),oe(2,I.$Si),oe(3,y.$fl),oe(4,k.$fk)],$);let S=class extends ${constructor(v,h,R,w){super(new d.$8R(d.SaveStrategy.IMMEDIATE,h,w,R),v,h,R,w)}async init(){return await this.$.init(),super.init()}};e.$$R=S,e.$$R=S=Ee([oe(0,O.$Pl),oe(1,I.$Si),oe(2,y.$fl),oe(3,k.$fk)],S)}),define(le[146],he([0,1,122,8,13,7,3,30,17,123,6,46,121,157]),function(Q,e,P,I,y,k,C,O,g,u,d,f,m,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$ns=void 0,e.$os=b;let $=class extends f.$cq{constructor(h,R,w,i){super(i),this.m=h,this.n=R,this.r=w,this.s(),this.B(h.onDidChangeConfiguration(c=>{c.affectsConfiguration("http")&&this.s()}))}s(){const h=this.m.getValue("http");this.f=h?.proxy,this.g=!!h?.proxyStrictSSL,this.h=h?.proxyAuthorization}async request(h,R){const{f:w,g:i}=this;let c;try{c=await(0,u.$Wm)(this.m,this.r,this.n.args,process.env)}catch(t){this.j||(this.j=!0,this.r.error("resolving shell environment failed",(0,k.$bb)(t)))}const n={...process.env,...c},r=h.agent?h.agent:await(0,m.$ms)(h.url||"",n,{proxyUrl:w,strictSSL:i});return h.agent=r,h.strictSSL=i,this.h&&(h.headers={...h.headers||{},"Proxy-Authorization":this.h}),this.c(h.isChromiumNetwork?"electron":"node",h,()=>b(h,R))}async resolveProxy(h){}async lookupAuthorization(h){}async lookupKerberosAuthorization(h){try{const R=await new Promise((r,t)=>{Q(["kerberos"],r,t)}).then(be),w=new URL(h),i=this.m.getValue("http.proxyKerberosServicePrincipal")||(process.platform==="win32"?`HTTP/${w.hostname}`:`HTTP@${w.hostname}`);return this.r.debug("RequestService#lookupKerberosAuthorization Kerberos authentication lookup",`proxyURL:${w}`,`spn:${i}`),"Negotiate "+await(await R.initializeClient(i)).step("")}catch(R){this.r.debug("RequestService#lookupKerberosAuthorization Kerberos authentication failed",R);return}}async loadCertificates(){return(await new Promise((R,w)=>{Q(["@vscode/proxy-agent"],R,w)}).then(be)).loadSystemCertificates({log:this.r})}};e.$ns=$,e.$ns=$=Ee([oe(0,O.$ej),oe(1,g.$Si),oe(2,d.$fk),oe(3,d.$gk)],$);async function S(v){return((0,P.parse)(v.url).protocol==="https:"?await new Promise((w,i)=>{Q(["https"],w,i)}).then(be):await new Promise((w,i)=>{Q(["http"],w,i)}).then(be)).request}async function b(v,h){return I.Promises.withAsyncBody(async(R,w)=>{const i=(0,P.parse)(v.url),c=v.getRawRequest?v.getRawRequest(v):await S(v),n={hostname:i.hostname,port:i.port?parseInt(i.port):i.protocol==="https:"?443:80,protocol:i.protocol,path:i.path,method:v.type||"GET",headers:v.headers,agent:v.agent,rejectUnauthorized:(0,C.$pg)(v.strictSSL)?v.strictSSL:!0};v.user&&v.password&&(n.auth=v.user+":"+v.password);const r=c(n,t=>{const s=(0,C.$ng)(v.followRedirects)?v.followRedirects:3;if(t.statusCode&&t.statusCode>=300&&t.statusCode<400&&s>0&&t.headers.location)b({...v,url:t.headers.location,followRedirects:s-1},h).then(R,w);else{let o=t;!v.isChromiumNetwork&&t.headers["content-encoding"]==="gzip"&&(o=t.pipe((0,a.createGunzip)())),R({res:t,stream:(0,y.$8e)(o)})}});r.on("error",w),v.timeout&&r.setTimeout(v.timeout),v.isChromiumNetwork&&r.removeHeader("Content-Length"),v.data&&typeof v.data=="string"&&r.write(v.data),r.end(),h.onCancellationRequested(()=>{r.abort(),w(new k.$9)})})}});var ze=this&&this.__importDefault||function(Q){return Q&&Q.__esModule?Q:{default:Q}};define(le[158],he([0,1,32,35,8,38,7,2,14,15,11,36,12,30,118,62,120,17,96,144,20,72,125,42,54,139,141,9,108,110,51,106,65,69,127,6,114,39,115,130,33,46,146,70,71,18,129,41,131,132,23,134,24,145,133,140,111,113,4,135,159]),function(Q,e,P,I,y,k,C,O,g,u,d,f,m,a,$,S,b,v,h,R,w,i,c,n,r,t,s,o,l,p,A,T,N,D,j,x,Y,ne,ae,ue,me,W,_,M,U,H,K,ie,se,L,V,z,E,F,J,Z,G,q,X,re,ce){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.main=we,P=be(P),ue=ze(ue);class fe extends O.$Zc{constructor(pe){super(),this.b=pe,this.c()}c(){process.once("exit",()=>this.dispose())}async run(){const[pe,ge]=await this.f();return pe.invokeFunction(async ye=>{const ve=ye.get(x.$fk),B=ye.get(o.$fl),ee=ye.get(v.$Si),te=ye.get(E.$Rl);ve.info("CLI main",this.b),this.h(ve),await this.j(ee,B,te,pe),await Promise.all(ge.map($e=>{(0,y.$Bh)($e.flush(),1e3)}))})}async f(){const pe=new N.$Ii,ge={_serviceBrand:void 0,...ue.default};pe.set(me.$yk,ge);const ye=new h.$cn(this.b,ge);pe.set(v.$Si,ye),await Promise.all([this.g(ye.appSettingsHome.with({scheme:g.Schemas.file}).fsPath),this.g(ye.extensionsPath)].map(Ie=>Ie?P.promises.mkdir(Ie,{recursive:!0}):void 0));const ve=new q.$3R((0,x.$tk)(ye),ye.logsHome);pe.set(x.$gk,ve);const B=this.B(ve.createLogger("cli",{name:(0,X.localize)(171,null)})),ee=[];ve.getLogLevel()===x.LogLevel.Trace&&ee.push(new x.$nk(ve.getLogLevel()));const te=this.B(new G.$aS(B,ee));pe.set(x.$fk,te);const $e=this.B(new l.$$q(te));pe.set(o.$fl,$e);const Se=this.B(new p.$Br(te));$e.registerProvider(g.Schemas.file,Se);const Ne=new z.$3s($e);pe.set(V.$Pl,Ne);const ke=new M.$7R(M.SaveStrategy.DELAYED,ye,te,$e),Te=new F.$9R(ke,Ne,ye,$e,te);pe.set(E.$Rl,Te),$e.registerProvider(g.Schemas.vscodeUserData,new re.$ljc(g.Schemas.file,Se,g.Schemas.vscodeUserData,Te,Ne,te));const Re=d.$l&&ge.win32RegValueName?this.B(new ae.$jjc(te,ge.win32RegValueName)):ye.policyFile?this.B(new Y.$kjc(ye.policyFile,$e,te)):new ne.$Bo;pe.set(ne.$zo,Re);const Ce=this.B(new $.$4o(Te.defaultProfile.settingsResource,$e,Re,te));pe.set(a.$ej,Ce),await Promise.all([ke.init(),Ce.initialize()]);let Ue;try{Ue=await(0,J.$Xic)(ke,te)}catch(Ie){Ie.code!=="ENOENT"&&te.error(Ie)}const De=await(0,J.$Yic)(ke,te),Le=await(0,J.$Zic)(ke,te);Te.init(),pe.set(V.$Pl,new z.$3s($e));const Fe=new _.$ns(Ce,ye,te,ve);pe.set(W.$bq,Fe),pe.set(S.$8o,new A.$Hi(b.$rS,void 0,!0)),pe.set(n.$Rq,new A.$Hi(Z.$_R,void 0,!0)),pe.set(r.$Vq,new A.$Hi(s.$Uic,void 0,!0)),pe.set(i.$Bq,new A.$Hi(i.$Dq,void 0,!0)),pe.set(t.$7q,new A.$Hi(t.$8q,void 0,!0)),pe.set(w.$rp,new A.$Hi(R.$yq,void 0,!0)),pe.set(D.$hs,new A.$Hi(j.$js,void 0,!1));const qe=[],Pe=(0,ie.$Pp)(ge,Ce);if((0,ie.$Kp)(ge,ye)){ge.aiConfig&&ge.aiConfig.ariaKey&&qe.push(new se.$1R(Fe,Pe,"monacoworkbench",null,ge.aiConfig.ariaKey));const Ie={appenders:qe,sendErrorTelemetry:!1,commonProperties:(0,U.$Bp)((0,I.release)(),(0,I.hostname)(),process.arch,ge.commit,ge.version,Ue,De,Le,Pe),piiPaths:(0,ie.$Qp)(ye)};pe.set(H.$em,new A.$Hi(K.$ps,[Ie],!1))}else pe.set(H.$em,ie.$Fp);return[new T.$Er(pe),qe]}g(pe){if(d.$l){const ge=(0,ce.getUNCHost)(pe);ge&&(0,ce.addUNCHostToAllowlist)(ge)}return pe}h(pe){(0,C.setUnexpectedErrorHandler)(ge=>{const ye=(0,k.$vj)(ge,!0);ye&&pe.error(`[uncaught exception in CLI]: ${ye}`)}),process.on("uncaughtException",ge=>{(0,C.$3)(ge)||(0,C.$4)(ge)}),process.on("unhandledRejection",ge=>(0,C.$4)(ge))}async j(pe,ge,ye,ve){let B;if(pe.args.profile&&(B=ye.profiles.find(te=>te.name===pe.args.profile),!B))throw new Error(`Profile '${pe.args.profile}' not found.`);const ee=(B??ye.defaultProfile).extensionsResource;if(this.b["list-extensions"])return ve.createInstance(c.$Eq,new x.$nk(x.LogLevel.Info,!1)).listExtensions(!!this.b["show-versions"],this.b.category,ee);if(this.b["install-extension"]||this.b["install-builtin-extension"]){const te={isMachineScoped:!!this.b["do-not-sync"],installPreReleaseVersion:!!this.b["pre-release"],profileLocation:ee};return ve.createInstance(c.$Eq,new x.$nk(x.LogLevel.Info,!1)).installExtensions(this.m(this.b["install-extension"]||[]),this.m(this.b["install-builtin-extension"]||[]),te,!!this.b.force)}else{if(this.b["uninstall-extension"])return ve.createInstance(c.$Eq,new x.$nk(x.LogLevel.Info,!1)).uninstallExtensions(this.m(this.b["uninstall-extension"]),!!this.b.force,ee);if(this.b["update-extensions"])return ve.createInstance(c.$Eq,new x.$nk(x.LogLevel.Info,!1)).updateExtensions(ee);if(this.b["locate-extension"])return ve.createInstance(c.$Eq,new x.$nk(x.LogLevel.Info,!1)).locateExtension(this.b["locate-extension"]);this.b.telemetry&&console.log(await(0,L.$Bjc)(pe.appRoot,pe.extensionsPath))}}m(pe){return pe.map(ge=>/\.vsix$/i.test(ge)?m.URI.file((0,u.$nc)(ge)?ge:(0,u.$oc)((0,f.cwd)(),ge)):ge)}}async function we(de){const pe=new fe(de);try{await pe.run()}finally{pe.dispose()}}})}).call(this);

//# sourceMappingURL=https://main.vscode-cdn.net/sourcemaps/38c31bc77e0dd6ae88a4e9cc93428cc27a56ba40/core/vs/code/node/cliProcessMain.js.map
